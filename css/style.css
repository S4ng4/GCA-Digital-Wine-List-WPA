/* Error notification animations */
@keyframes slideInRight {
    from { 
        transform: translateX(100%); 
        opacity: 0; 
    }
    to { 
        transform: translateX(0); 
        opacity: 1; 
    }
}

@keyframes slideOutRight {
    from { 
        transform: translateX(0); 
        opacity: 1; 
    }
    to { 
        transform: translateX(100%); 
        opacity: 0; 
    }
}

/* Luxury loading overlay - mostra l'index come background */
.loading-overlay {
    position: fixed;
    inset: 0;
    /* Overlay semi-trasparente scuro per mantenere leggibilità */
    background: rgba(10, 10, 10, 0.65);
    /* Blur leggero per effetto elegante */
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 1;
    transition: opacity 500ms ease, backdrop-filter 500ms ease;
}

.loading-overlay.is-hidden {
    opacity: 0;
    pointer-events: none;
}

.loading-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
}

.loading-logo {
    width: 100%;
    display: grid;
    place-items: center;
    position: relative;
}

.loading-logo-image {
    width: clamp(300px, 65vw, 1100px);
    height: auto;
    object-fit: contain;
}

/* Place the ring centered over the logo, matching its width */
.loading-logo .countdown-ring {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    pointer-events: none;
}
.loading-logo .countdown-ring svg {
    width: clamp(300px, 65vw, 1100px);
    height: auto;
}

.loading-message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: block;
    text-align: center;
    pointer-events: none;
    font-family: var(--font-heading);
    font-weight: 600;
    color: var(--ivory);
    text-shadow: 0 2px 8px rgba(0,0,0,0.45);
    font-size: clamp(20px, 3vw, 40px);
    letter-spacing: 0.6px;
    z-index: 3;
    animation: loadingPulse 1200ms cubic-bezier(0.22, 0.61, 0.36, 1) infinite;
}

.loading-message.is-welcome {
    font-size: clamp(28px, 3.8vw, 56px);
    font-weight: 700;
    animation: none;
}

@keyframes loadingPulse {
    0%   { transform: translate(-50%, -50%) scale(1.0); opacity: 1; }
    50%  { transform: translate(-50%, -50%) scale(0.98); opacity: 0.85; }
    100% { transform: translate(-50%, -50%) scale(1.0); opacity: 1; }
}

@media (prefers-reduced-motion: reduce) {
  .loading-message { animation: none !important; }
}

.loading-subtitle {
    color: var(--ivory);
    opacity: 0.75;
    font-family: var(--font-body);
    font-size: 1rem;
    letter-spacing: 0.5px;
}

@keyframes pulseLogo {
    0% { transform: scale(1); box-shadow: 0 0 0 rgba(212,175,55,0.0); }
    50% { transform: scale(1.03); box-shadow: 0 10px 30px rgba(212,175,55,0.15); }
    100% { transform: scale(1); box-shadow: 0 0 0 rgba(212,175,55,0.0); }
}

@media (max-width: 480px) {
    .loading-logo-image { width: 88vw; }
}

/* WOW enhancements: ring, progress, microcopy, skip, bokeh */
.loading-extras {
    position: relative;
    width: 100%;
    max-width: 1100px;
    display: grid;
    place-items: center;
    margin-top: 1rem;
}

.countdown-ring { position: absolute; inset: 0; display: grid; place-items: center; pointer-events: none; }
.countdown-ring svg { width: clamp(300px, 65vw, 1100px); height: auto; }
.ring-bg { fill: none; stroke: rgba(212,175,55,0.22); stroke-width: 2; }
.ring-fg { fill: none; stroke: url(#goldGrad); stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: 411.4; stroke-dashoffset: 0; }

/* removed progress line and tip */

.skip-loading { background: rgba(0,0,0,0.45); border: 1px solid rgba(212,175,55,0.6); color: #D4AF37; border-radius: 999px; padding: 0.55rem 1.25rem; font-family: var(--font-heading); font-size: 1.05rem; letter-spacing: 0.6px; cursor: pointer; opacity: 1; transform: none; transition: all 250ms ease; margin-top: 1.5rem; }
.skip-loading:hover { background: rgba(212,175,55,0.08); }

.gold-bokeh { position: absolute; inset: 0; pointer-events: none; filter: blur(0.3px); }
.gold-bokeh span { position: absolute; width: 8px; height: 8px; border-radius: 50%; background: radial-gradient(circle, rgba(212,175,55,1) 0%, rgba(212,175,55,0.3) 50%, rgba(212,175,55,0.0) 70%); opacity: 0.6; box-shadow: 0 0 10px rgba(212,175,55,0.8), 0 0 20px rgba(212,175,55,0.4); }
.gold-bokeh span:nth-child(1) { top: 18%; left: 22%; animation: drift1 12s ease-in-out infinite; }
.gold-bokeh span:nth-child(2) { top: 68%; left: 75%; animation: drift2 14s ease-in-out infinite; }
.gold-bokeh span:nth-child(3) { top: 40%; left: 10%; animation: drift3 11s ease-in-out infinite; }
.gold-bokeh span:nth-child(4) { top: 25%; left: 60%; animation: drift4 13s ease-in-out infinite; }
.gold-bokeh span:nth-child(5) { top: 75%; left: 30%; animation: drift5 15s ease-in-out infinite; }
.gold-bokeh span:nth-child(6) { top: 55%; left: 85%; animation: drift6 10s ease-in-out infinite; }

/* Puntini colori bandiera italiana */
.italian-flag-bokeh { position: absolute; inset: 0; pointer-events: none; filter: blur(0.3px); }
.italian-flag-bokeh span { position: absolute; width: 8px; height: 8px; border-radius: 50%; opacity: 0.6; }
.italian-flag-bokeh .red-bokeh { top: 30%; left: 45%; background: radial-gradient(circle, rgba(206,43,55,1) 0%, rgba(206,43,55,0.3) 50%, rgba(206,43,55,0.0) 70%); box-shadow: 0 0 10px rgba(206,43,55,0.8), 0 0 20px rgba(206,43,55,0.4); animation: drift7 16s ease-in-out infinite; }
.italian-flag-bokeh .white-bokeh { top: 50%; left: 50%; background: radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0.0) 70%); box-shadow: 0 0 10px rgba(255,255,255,0.8), 0 0 20px rgba(255,255,255,0.4); animation: drift8 13.5s ease-in-out infinite; }
.italian-flag-bokeh .green-bokeh { top: 70%; left: 55%; background: radial-gradient(circle, rgba(0,146,70,1) 0%, rgba(0,146,70,0.3) 50%, rgba(0,146,70,0.0) 70%); box-shadow: 0 0 10px rgba(0,146,70,0.8), 0 0 20px rgba(0,146,70,0.4); animation: drift9 11.5s ease-in-out infinite; }

/* Animazioni casuali per ogni puntino */
@keyframes drift1 { 
    0% { transform: translate(0, 0) scale(1); }
    25% { transform: translate(25px, -18px) scale(1.15); }
    50% { transform: translate(-15px, 22px) scale(0.95); }
    75% { transform: translate(18px, 12px) scale(1.08); }
    100% { transform: translate(0, 0) scale(1); }
}

@keyframes drift2 { 
    0% { transform: translate(0, 0) scale(1); }
    20% { transform: translate(-20px, 15px) scale(1.1); }
    40% { transform: translate(30px, -25px) scale(0.9); }
    60% { transform: translate(-10px, -18px) scale(1.2); }
    80% { transform: translate(15px, 20px) scale(1.05); }
    100% { transform: translate(0, 0) scale(1); }
}

@keyframes drift3 { 
    0% { transform: translate(0, 0) scale(1); }
    30% { transform: translate(22px, 18px) scale(1.12); }
    60% { transform: translate(-28px, -15px) scale(0.92); }
    100% { transform: translate(0, 0) scale(1); }
}

@keyframes drift4 { 
    0% { transform: translate(0, 0) scale(1); }
    25% { transform: translate(-18px, -22px) scale(1.18); }
    50% { transform: translate(28px, 12px) scale(0.88); }
    75% { transform: translate(-12px, 25px) scale(1.1); }
    100% { transform: translate(0, 0) scale(1); }
}

@keyframes drift5 { 
    0% { transform: translate(0, 0) scale(1); }
    20% { transform: translate(30px, -20px) scale(1.15); }
    40% { transform: translate(-25px, 18px) scale(0.85); }
    60% { transform: translate(15px, 28px) scale(1.2); }
    80% { transform: translate(-20px, -15px) scale(0.95); }
    100% { transform: translate(0, 0) scale(1); }
}

@keyframes drift6 { 
    0% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(-22px, 20px) scale(1.1); }
    66% { transform: translate(25px, -18px) scale(0.9); }
    100% { transform: translate(0, 0) scale(1); }
}

@keyframes drift7 { 
    0% { transform: translate(0, 0) scale(1); }
    25% { transform: translate(20px, -25px) scale(1.2); }
    50% { transform: translate(-30px, 15px) scale(0.9); }
    75% { transform: translate(18px, 22px) scale(1.1); }
    100% { transform: translate(0, 0) scale(1); }
}

@keyframes drift8 { 
    0% { transform: translate(0, 0) scale(1); }
    30% { transform: translate(-25px, -18px) scale(1.15); }
    60% { transform: translate(28px, 20px) scale(0.88); }
    100% { transform: translate(0, 0) scale(1); }
}

@keyframes drift9 { 
    0% { transform: translate(0, 0) scale(1); }
    20% { transform: translate(22px, 18px) scale(1.12); }
    40% { transform: translate(-18px, -25px) scale(0.92); }
    60% { transform: translate(25px, -15px) scale(1.18); }
    80% { transform: translate(-20px, 22px) scale(0.95); }
    100% { transform: translate(0, 0) scale(1); }
}

@keyframes pulseCount {
  0%   { transform: scale(1.06); opacity: 1; }
  50%  { transform: scale(0.92); opacity: 0.7; }
  100% { transform: scale(1.06); opacity: 1; }
}

@media (prefers-reduced-motion: reduce) {
  .ring-fg, .progress-line span, .gold-bokeh span, .italian-flag-bokeh span { animation: none !important; transition: none !important; }
}

/* Gran Caffè L'Aquila - Digital Wine List Styles */

/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* === FONT FAMILIES - SISTEMA UNIFORME === */
    --font-heading: 'Cinzel', serif;  /* Heading, titoli, navigazione */
    --font-body: 'Cormorant', serif;  /* Testo corpo, descrizioni */
    
    /* === COLORI === */
    --gold: #D4AF37;
    --gold-light: #F4CF67; /* Lighter gold for hover states */
    --dark-gold: #B8860B;
    --black: #0A0A0A;
    --dark: #0A0A0A; /* Alias for black */
    --charcoal: #1A1A1A;
    --ivory: #F5F5F0;
    --cream: #F8F8F0;
    
    /* === COLORI TESTO WCAG COMPLIANT === */
    --text-accent: var(--ivory);      /* Testo normale - alto contrasto */
    --text-accent-large: var(--gold); /* Testo grande (24px+) - contrasto OK */
    
    /* Wine Type Colors - Red (Default) - Colore più acceso per migliore contrasto */
    --wine-primary: #DC143C; /* Crimson - Rosso più acceso */
    --wine-secondary: #B22222; /* Firebrick - Rosso acceso */
    --wine-accent: #FF1744; /* Rosso acceso brillante */
    --wine-border: rgba(220, 20, 60, 0.3);
    --wine-highlight: rgba(220, 20, 60, 0.1);
    
    /* === SCALA TIPOGRAFICA MODULARE (Major Third 1.25) === */
    --fs-900: 3.815rem;    /* H1 hero/principale */
    --fs-800: 3.052rem;    /* H1 interno */
    --fs-700: 2.441rem;    /* H2 */
    --fs-600: 1.953rem;    /* H3 */
    --fs-500: 1.563rem;    /* H4 / sottotitoli */
    --fs-400: 1.25rem;     /* Testo lead/importante */
    --fs-300: 1rem;        /* Testo corpo (base) */
    --fs-200: 0.8rem;      /* Testo piccolo, caption */
    
    /* === SCALA SPAZIATURA (SISTEMA 8pt) === */
    --space-unit: 0.5rem;   /* 8px se base font-size 16px */
    --space-xxs: calc(var(--space-unit) * 0.5); /* 4px */
    --space-xs: calc(var(--space-unit) * 1);     /* 8px */
    --space-sm: calc(var(--space-unit) * 2);     /* 16px */
    --space-md: calc(var(--space-unit) * 3);     /* 24px */
    --space-lg: calc(var(--space-unit) * 4);     /* 32px */
    --space-xl: calc(var(--space-unit) * 6);     /* 48px */
    --space-xxl: calc(var(--space-unit) * 8);    /* 64px */
    
    /* === REGOLE COLORE PER LEGGIBILITÀ WCAG AA === */
    /* Oro (#D4AF37) usato SOLO per: */
    /* 1. Testo grande (>=24px/1.5rem) su sfondo scuro - contrasto 3:1 OK per WCAG AA */
    /* 2. Accenti, bordi, hover states, icone */
    /* Testo normale (<24px): usa --text-accent (ivory) per contrasto 4.5:1 WCAG AA */
    /* MAI usare oro per testo normale su sfondo chiaro */
}

/* Night Mode (default) */
:root[data-theme="night"] {
    --bg-primary: #0A0A0A;
    --bg-secondary: #1A1A1A;
    --text-primary: #F5F5F0;
    --text-secondary: rgba(245, 245, 240, 0.8);
    --border-color: rgba(212, 175, 55, 0.3);
    --shadow-color: rgba(0, 0, 0, 0.8);
    --overlay-color: rgba(0, 0, 0, 0.85);
}

/* Day Mode - Ottimizzato per E-Paper */
:root[data-theme="day"] {
    --bg-primary: #FDFBF7; /* Carta bianca per e-paper */
    --bg-secondary: #F8F6F0; /* Leggermente più scuro */
    --text-primary: #000000; /* Nero puro per massimo contrasto */
    --text-secondary: #1A1A1A; /* Nero più morbido */
    --gold: #8B6914; /* Oro più scuro per e-paper */
    --gold-light: #A67C00;
    --dark-gold: #5C4409;
    --border-color: #000000; /* Nero per contrasto */
    --shadow-color: rgba(0, 0, 0, 0.2); /* Ombre leggere */
    --overlay-color: rgba(255, 255, 255, 0.95);
    
    /* Wine Type Colors - più scuri per e-paper */
    --wine-primary: #8B0000; /* Rosso molto scuro */
    --wine-secondary: #6B0000;
    --wine-accent: #A00000;
    --wine-border: rgba(0, 0, 0, 0.5);
    --wine-highlight: rgba(0, 0, 0, 0.1);
    
    --ivory: #FFFFFF;
    --cream: #FDFBF7;
    --charcoal: #F8F6F0;
    --black: #FDFBF7;
    --dark: #F8F6F0;
}

body {
    font-family: var(--font-body, 'Cormorant', serif);
    background-color: #0A0A0A !important; /* Colore uniforme per tutto il background */
    color: var(--text-primary, var(--ivory));
    line-height: 1.6;
    min-height: 100vh;
    overflow-x: hidden;
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* === GERARCHIA TIPOGRAFICA - HEADING SYSTEM === */
h1 {
    font-size: var(--fs-800);
    font-weight: 700;
    line-height: 1.1;
    font-family: var(--font-heading);
    letter-spacing: 0.5px;
}

h2 {
    font-size: var(--fs-700);
    font-weight: 600;
    line-height: 1.2;
    font-family: var(--font-heading);
    letter-spacing: 0.3px;
}

h3 {
    font-size: var(--fs-600);
    font-weight: 600;
    line-height: 1.3;
    font-family: var(--font-heading);
    letter-spacing: 0.2px;
}

h4 {
    font-size: var(--fs-500);
    font-weight: 500;
    line-height: 1.4;
    font-family: var(--font-heading);
    letter-spacing: 0.1px;
}

/* Disable scrolling only for home page - ottimizzato per mobile */
body.home-page {
    max-height: 100vh;
    max-height: 100dvh; /* Dynamic viewport height for iOS Safari */
    overflow-y: hidden;
    height: 100vh;
    height: 100dvh; /* Dynamic viewport height for iOS Safari */
    position: fixed;
    width: 100%;
    /* Support for iPhone notch */
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
}

/* Reset per altre pagine - permette scroll normale */
body:not(.home-page) {
    max-height: none;
    overflow-y: auto;
    height: auto;
    position: static;
}

/* Luxury Container */
.luxury-container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    background: var(--bg-primary, var(--black));
    position: relative;
    transition: background 0.3s ease;
    /* Sfondo con immagine gcaLogoWall */
    background-image: url('./image/gcaLogoWall.jpeg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
}

/* Overlay scuro per leggibilità del contenuto */
.luxury-container::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        180deg,
        rgba(10, 10, 10, 0.85) 0%,
        rgba(10, 10, 10, 0.75) 50%,
        rgba(10, 10, 10, 0.85) 100%
    );
    z-index: 0;
    pointer-events: none;
}

/* Assicura che il contenuto sia sopra l'overlay */
.content-wrapper,
.top-nav,
.search-bar-container,
.sidebar,
.regions-panel,
.wines-panel,
.wines-list-container {
    position: relative;
    z-index: 1;
}

:root[data-theme="night"] .luxury-container {
    background: 
        radial-gradient(circle at 80% 20%, rgba(212, 175, 55, 0.03) 0%, transparent 50%),
        linear-gradient(var(--black) 0%, var(--charcoal) 100%);
}

:root[data-theme="day"] .luxury-container {
    background: var(--bg-primary);
    /* Mantieni immagine di sfondo anche in day mode ma con overlay più chiaro */
    background-image: url('./image/gcaLogoWall.jpeg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
}

/* Overlay più chiaro per day mode */
:root[data-theme="day"] .luxury-container::after {
    background: linear-gradient(
        180deg,
        rgba(253, 251, 247, 0.9) 0%,
        rgba(253, 251, 247, 0.85) 50%,
        rgba(253, 251, 247, 0.9) 100%
    );
}

/* Enable scrolling for wine-details page and other non-home pages */
.hero-enhanced .luxury-container,
body:not(.home-page) .luxury-container {
    max-height: none;
    overflow: visible;
}

.luxury-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.02"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="0.5" fill="white"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
    pointer-events: none;
}

/* Header Styles */
.luxury-header {
    padding: 1.5rem 2rem;
    text-align: center;
    position: relative;
    z-index: 2;
    border-bottom: 2px solid rgba(212, 175, 55, 0.3);
    flex-shrink: 0;
    background: linear-gradient(180deg, rgba(10, 10, 10, 0.95) 0%, rgba(26, 26, 26, 0.9) 100%);
}

/* Hero enhancements (shared) */
.home-page .luxury-header,
.hero-enhanced .luxury-header {
    padding: 4rem 0 3rem;
}

.home-page .logo-container .luxury-logo,
.hero-enhanced .logo-container .luxury-logo {
    width: 160px;
    height: 160px;
}

.home-page .luxury-title,
.hero-enhanced .luxury-title {
    font-size: 3.8rem;
    letter-spacing: 5px;
    margin-top: 0.5rem;
}

.home-page .luxury-subtitle,
.hero-enhanced .luxury-subtitle {
    margin-bottom: 1.2rem;
}

.home-page .luxury-divider,
.hero-enhanced .luxury-divider {
    width: 160px;
    margin: 2rem auto 1.5rem;
}

.home-page .luxury-tagline,
.hero-enhanced .luxury-tagline {
    font-size: 1.2rem;
    margin-bottom: 2.2rem;
}

.home-page .luxury-search-container,
.hero-enhanced .luxury-search-container {
    margin: 0 auto 3rem;
}

.home-page .luxury-search-bar,
.hero-enhanced .luxury-search-bar {
    justify-content: center;
}

.home-page .luxury-search-input,
.hero-enhanced .luxury-search-input {
    min-width: 320px;
    max-width: 560px;
}

/* Home hero auto-hide and reveal animations */
.home-page.hero-collapsing .luxury-header {
    transform: translateY(-30px);
    opacity: 0;
    pointer-events: none;
    transition: transform 500ms ease, opacity 500ms ease;
}

.home-page .luxury-search-container {
    transform: scale(0.96);
    opacity: 0;
}

.home-page.search-reveal .luxury-search-container {
    transform: scale(1);
    opacity: 1;
    transition: transform 350ms ease, opacity 350ms ease;
}

.home-page .luxury-wine-selection .luxury-wine-card {
    opacity: 0;
    transform: translateY(12px);
}

.home-page.cards-revealed .luxury-wine-selection .luxury-wine-card {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 400ms ease, transform 400ms ease, border-color 300ms ease;
}

.home-page.cards-revealed .luxury-wine-selection .luxury-wine-card:nth-child(1) { transition-delay: 80ms; }
.home-page.cards-revealed .luxury-wine-selection .luxury-wine-card:nth-child(2) { transition-delay: 160ms; }
.home-page.cards-revealed .luxury-wine-selection .luxury-wine-card:nth-child(3) { transition-delay: 240ms; }
.home-page.cards-revealed .luxury-wine-selection .luxury-wine-card:nth-child(4) { transition-delay: 320ms; }
.home-page.cards-revealed .luxury-wine-selection .luxury-wine-card:nth-child(5) { transition-delay: 400ms; }
.home-page.cards-revealed .luxury-wine-selection .luxury-wine-card:nth-child(6) { transition-delay: 480ms; }

@media (prefers-reduced-motion: reduce) {
    .home-page .luxury-header,
    .home-page .luxury-search-container,
    .home-page .luxury-wine-selection .luxury-wine-card {
        transition: none !important;
        transform: none !important;
        opacity: 1 !important;
    }
}

.header-content {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Ensure desktop layout matches mobile: stack and center on hero pages */
.hero-enhanced .header-content {
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    gap: 0.5rem;
}

.hero-enhanced .back-button {
    align-self: flex-start;
    margin-bottom: 0.5rem;
}

.hero-enhanced .luxury-search-container {
    margin: 0 auto 3rem;
}

.back-button {
    color: var(--text-accent); /* Ivory per WCAG AA - testo piccolo */
    text-decoration: none;
    font-size: 1.1rem; /* 17.6px - piccolo */
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
}

.back-button:hover {
    color: var(--ivory);
}

.logo-container {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.luxury-logo {
    width: 100px;
    height: 100px;
    border-radius: 15px;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem;
    border: none;
    position: relative;
    overflow: hidden;
}

.luxury-logo.small {
    width: 100px;
    height: 100px;
    border: none;
}

.luxury-logo::before {
    display: none;
}

.luxury-logo::after {
    content: 'GCL';
    position: absolute;
    width: 110px;
    height: 110px;
    background: var(--black);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--gold);
    font-family: var(--font-heading);
    font-size: 1.8rem;
    font-weight: 600;
    letter-spacing: 2px;
}

.luxury-logo.small::after {
    width: 74px;
    height: 74px;
    font-size: 1.4rem;
    letter-spacing: 1px;
}

/* Logo Image Styles */
.logo-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 15px;
    z-index: 2;
    position: relative;
}

/* Hide CSS-generated text when logo image is present */
.luxury-logo.has-image::after {
    display: none;
}

/* Removed rotate animation for simplified design */

.luxury-title {
    font-family: var(--font-heading);
    font-size: 2.5rem; /* 40px - grande, oro OK per WCAG AA (3:1) */
    font-weight: 600;
    color: var(--text-accent-large); /* Oro per testo grande */
    letter-spacing: 4px;
    margin-bottom: 0.5rem;
    text-shadow: 0 0 15px rgba(212, 175, 55, 0.4);
}

.luxury-title.medium {
    font-size: 2.5rem;
    letter-spacing: 3px;
    margin-top: 1rem;
}

.luxury-title.small {
    font-size: 2.2rem;
    letter-spacing: 2px;
    margin-top: 1rem;
}

.luxury-subtitle {
    font-size: 1rem;
    letter-spacing: 8px;
    color: rgba(245, 245, 240, 0.9);
    margin-bottom: 1.5rem;
    font-weight: 300;
    text-transform: uppercase;
    line-height: 1.6;
}

.luxury-subtitle.medium {
    font-size: 1.1rem;
    letter-spacing: 6px;
    margin-top: 1rem;
    margin-bottom: 1rem;
    line-height: 1.6;
}

.luxury-subtitle.small {
    font-size: 1rem;
    letter-spacing: 5px;
    margin-top: 0.8rem;
    margin-bottom: 0.8rem;
    line-height: 1.5;
}

.luxury-divider {
    width: 80px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
    margin: 0.5rem auto;
}

.luxury-tagline {
    font-style: italic;
    font-size: 0.9rem;
    color: var(--gold);
    margin-bottom: 0.5rem;
    font-weight: 300;
    line-height: 1.4;
    letter-spacing: 0.5px;
}

/* Search and Filter */
.luxury-search-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
    position: relative;
    z-index: 2;
}

.luxury-search-bar {
    display: flex;
    gap: 1rem;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
}

.luxury-search-actions {
    margin-top: 1rem;
    display: flex;
    justify-content: center;
    gap: 1rem;
}

.luxury-select {
    padding: 0.7rem 1.5rem;
    background: rgba(26, 26, 26, 0.7);
    border: 2px solid rgba(212, 175, 55, 0.3);
    border-radius: 15px;
    color: var(--ivory);
    font-family: var(--font-body);
    font-size: 1rem;
    letter-spacing: 0.5px;
    min-width: 200px;
}

.luxury-select:focus {
    outline: 2px solid var(--gold);
    outline-offset: 2px;
    border-color: var(--gold);
    box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);
}

.search-container {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.luxury-search-input {
    flex: 1;
    min-width: 200px;
    padding: 0.6rem 1rem;
    background: rgba(26, 26, 26, 0.7);
    border: 2px solid rgba(212, 175, 55, 0.3);
    border-radius: 12px;
    color: var(--ivory);
    font-family: var(--font-body);
    font-size: 0.9rem;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
}

.luxury-search-input:focus {
    outline: 2px solid var(--gold);
    outline-offset: 2px;
    border-color: var(--gold);
    box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);
}

.luxury-search-input::placeholder {
    color: rgba(245, 245, 240, 0.5);
}

.luxury-filter-btn, .filter-button {
    padding: 0.6rem 1rem; /* match .view-btn */
    background: transparent;
    border: 2px solid var(--gold);
    border-radius: 12px;
    color: var(--gold);
    font-family: var(--font-body);
    font-size: 0.85rem; /* match .view-btn */
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.filter-button {
    padding: 0.8rem 1.5rem;
    font-size: 1rem;
    border-radius: 15px;
}

.luxury-filter-btn::before, .filter-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
    transition: left 0.5s ease;
}

.luxury-filter-btn:hover, .filter-button:hover {
    background: rgba(212, 175, 55, 0.1);
}

.luxury-filter-btn:hover::before, .filter-button:hover::before {
    left: 100%;
}

/* Breadcrumb - Apple-like design */
.breadcrumb {
    max-width: 1400px;
    margin: 1.5rem auto 1.5rem;
    padding: 0 2rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.875rem;
    font-weight: 400;
    color: rgba(245, 245, 240, 0.6);
    letter-spacing: -0.01em;
    line-height: 1.5;
}

.breadcrumb a {
    color: rgba(212, 175, 55, 0.8);
    text-decoration: none;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 500;
}

.breadcrumb a:hover {
    color: var(--text-accent); /* Ivory per WCAG AA */
    transform: translateY(-1px);
}

.breadcrumb-separator {
    color: rgba(245, 245, 240, 0.3);
    font-weight: 300;
    user-select: none;
}

.breadcrumb-current {
    color: rgba(245, 245, 240, 0.9);
    font-weight: 500;
}

/* Mobile Breadcrumb - Apple-like design */
.mobile-breadcrumb {
    display: none !important;
    padding: 1rem 1.25rem;
    margin: 0;
    flex-direction: row;
    align-items: center;
    gap: 0.625rem;
    font-size: 0.8125rem;
    font-weight: 400;
    color: rgba(245, 245, 240, 0.6);
    letter-spacing: -0.01em;
    line-height: 1.5;
    background: linear-gradient(180deg, rgba(10, 10, 10, 0.95) 0%, rgba(26, 26, 26, 0.9) 100%);
    border-bottom: 0.5px solid rgba(212, 175, 55, 0.1);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
}

.mobile-breadcrumb a {
    color: rgba(212, 175, 55, 0.8);
    text-decoration: none;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 500;
    -webkit-tap-highlight-color: transparent;
}

.mobile-breadcrumb a:active {
    color: var(--text-accent); /* Ivory per WCAG AA */
    transform: scale(0.98);
}

.mobile-breadcrumb .breadcrumb-separator {
    color: rgba(245, 245, 240, 0.3);
    font-weight: 300;
    user-select: none;
}

.mobile-breadcrumb .breadcrumb-current {
    color: rgba(245, 245, 240, 0.9);
    font-weight: 500;
}

/* Main Content Wrapper - Map as Protagonist */
.main-content-wrapper {
    display: flex;
    gap: 1.5rem;
    flex: 1;
    overflow: hidden;
    max-width: 1600px;
    margin: 0 auto;
    padding: 1.5rem;
    position: relative;
    z-index: 2;
}

/* Left Sidebar - Wine Cards */
.wine-cards-sidebar {
    flex: 0 0 280px;
    display: flex;
    flex-direction: column;
    background: linear-gradient(180deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.9) 100%);
    border-radius: 12px;
    padding: 1.5rem;
    border: 1px solid rgba(212, 175, 55, 0.2);
    overflow-y: auto;
    max-height: calc(100vh - 280px);
}

.sidebar-title {
    font-family: var(--font-heading);
    font-size: 1.2rem; /* 19.2px - piccolo */
    color: var(--text-accent); /* Ivory per WCAG AA */
    margin-bottom: 1rem;
    text-align: center;
    letter-spacing: 2px;
    border-bottom: 1px solid rgba(212, 175, 55, 0.3);
    padding-bottom: 0.75rem;
    /* Ombra per leggibilità su sfondo glassmorphism */
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5);
}

/* Breadcrumb inside sidebar */
.sidebar .breadcrumb {
    max-width: 100%;
    margin: 0 0 1.5rem 0;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    font-size: 0.8125rem;
    font-weight: 400;
    color: rgba(245, 245, 240, 0.6);
    letter-spacing: -0.01em;
    line-height: 1.5;
}

/* Wine Selection Cards */
.luxury-wine-selection {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    width: 100%;
    margin: 0;
    padding: 0;
    position: relative;
    z-index: 2;
}

.luxury-wine-card {
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.7), rgba(10, 10, 10, 0.9));
    border: 2px solid rgba(212, 175, 55, 0.2);
    border-radius: 10px;
    padding: 1rem;
    text-align: left;
    text-decoration: none;
    color: var(--ivory);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 1rem;
    min-height: 80px;
    justify-content: flex-start;
}

.luxury-wine-card:hover {
    border-color: var(--gold);
    transform: translateX(5px);
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2);
}

/* Dim non-matching categories during search but keep them visible */
.luxury-wine-card.no-results {
    opacity: 0.5;
    filter: grayscale(20%);
}

.luxury-wine-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, transparent, rgba(212, 175, 55, 0.05), transparent);
    transform: translateX(-100%);
    transition: transform 0.6s ease;
}

.luxury-wine-card:hover::before {
    transform: translateX(100%);
}

.wine-icon {
    width: 50px;
    height: 50px;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    color: var(--gold);
    position: relative;
    flex-shrink: 0;
}

.wine-icon img {
    width: 45px;
    height: 45px;
    object-fit: contain;
    filter: drop-shadow(0 0 6px rgba(212, 175, 55, 0.3));
    transition: all 0.3s ease;
    border-radius: 8px;
    border: 1px solid rgba(212, 175, 55, 0.3);
    padding: 4px;
    background: rgba(26, 26, 26, 0.8);
}

.luxury-wine-card:hover .wine-icon img {
    transform: scale(1.05);
    filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.4));
    border-color: var(--gold);
    background: rgba(26, 26, 26, 0.9);
}

.wine-title {
    font-family: var(--font-heading);
    font-size: 0.95rem;
    color: var(--gold);
    margin: 0;
    letter-spacing: 1px;
    font-weight: 600;
    line-height: 1.3;
    flex: 1;
}

.wine-subtitle {
    font-size: 0.75rem;
    color: rgba(245, 245, 240, 0.7);
    letter-spacing: 0.5px;
    text-transform: uppercase;
    margin: 0.25rem 0 0 0;
    line-height: 1.3;
    display: block;
    width: 100%;
}

.wine-count {
    font-size: 0.7rem; /* 11.2px - molto piccolo */
    color: var(--text-accent); /* Ivory per WCAG AA */
    font-weight: 500;
    margin-top: 0.25rem;
    letter-spacing: 0.5px;
    display: block;
    width: 100%;
}

.wine-cards-sidebar .luxury-wine-card {
    flex-direction: column;
    text-align: center;
    align-items: center;
    gap: 0.5rem;
}

.wine-cards-sidebar .wine-icon {
    margin: 0 auto 0.25rem;
}

.wine-cards-sidebar .wine-title {
    width: 100%;
    text-align: center;
    flex: none;
    margin-bottom: 0.25rem;
}

.wine-cards-sidebar .wine-subtitle,
.wine-cards-sidebar .wine-count {
    width: 100%;
    text-align: center;
}

/* Regions Grid */
.regions-container {
    max-width: 1400px;
    margin: 0 auto 5rem;
    padding: 0 2rem;
    position: relative;
    z-index: 2;
}

.regions-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 3rem;
}

.regions-title {
    font-family: var(--font-heading);
    font-size: 1.8rem;
    color: var(--gold);
    letter-spacing: 2px;
    font-weight: 500;
    margin: 0;
}

.regions-count {
    font-size: 1rem;
    color: rgba(245, 245, 240, 0.7);
}

.regions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 3rem;
}

.region-card {
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.7), rgba(10, 10, 10, 0.9));
    border: 2px solid rgba(212, 175, 55, 0.2);
    border-radius: 15px;
    padding: 2.5rem 1.5rem;
    text-align: center;
    text-decoration: none;
    color: var(--ivory);
    transition: all 0.4s ease;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 320px;
}

.region-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, transparent, rgba(212, 175, 55, 0.05), transparent);
    transform: translateX(-100%);
    transition: transform 0.6s ease;
}

.region-card:hover {
    transform: translateY(-10px);
    border-color: var(--gold);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

.region-card:hover::before {
    transform: translateX(100%);
}

.region-icon {
    width: 140px;
    height: 140px;
    margin: 0 auto 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: var(--gold);
    position: relative;
    flex-shrink: 0;
}

.region-icon::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    border: 2px solid rgba(212, 175, 55, 0.3);
    border-radius: 15px;
    transform: scale(0.9);
    transition: all 0.3s ease;
}

.region-card:hover .region-icon::after {
    transform: scale(1.1);
    border-color: var(--gold);
}

.region-title {
    font-family: var(--font-heading);
    font-size: 1.2rem;
    color: var(--gold);
    margin-bottom: 0.3rem;
    letter-spacing: 1px;
    font-weight: 500;
}

.wine-count {
    font-size: 0.9rem;
    color: rgba(245, 245, 240, 0.7);
    letter-spacing: 1px;
}

/* Regions Table */
.regions-table-container {
    display: none;
    overflow-x: auto;
}

.regions-table {
    width: 100%;
    border-collapse: collapse;
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.7), rgba(10, 10, 10, 0.9));
    border: 2px solid rgba(212, 175, 55, 0.2);
    border-radius: 15px;
    overflow: hidden;
}

.regions-table th {
    background: rgba(212, 175, 55, 0.1);
    color: var(--text-accent); /* Ivory per WCAG AA - testo tabella */
    font-family: var(--font-heading);
    font-weight: 500;
    padding: 1.2rem 1rem;
    text-align: left;
    border-bottom: 1px solid rgba(212, 175, 55, 0.3);
    letter-spacing: 1px;
}

.regions-table td {
    padding: 1.2rem 1rem;
    border-bottom: 1px solid rgba(212, 175, 55, 0.1);
    color: rgba(245, 245, 240, 0.8);
}

.regions-table tr:hover {
    background: rgba(212, 175, 55, 0.05);
}

.table-region-name {
    font-family: var(--font-heading);
    color: var(--text-accent); /* Ivory per WCAG AA */
    font-weight: 500;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    max-width: 200px;
    white-space: normal;
}

.table-region-count {
    color: var(--text-accent); /* Ivory per WCAG AA */
    font-weight: 500;
}

.table-region-description {
    color: rgba(245, 245, 240, 0.7);
    font-style: italic;
    max-width: 300px;
    white-space: normal;
}

.table-explore-region-btn {
    background: transparent;
    border: 2px solid var(--gold);
    border-radius: 15px;
    color: var(--gold);
    padding: 0.5rem 1rem;
    font-family: var(--font-body);
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
}

.table-explore-region-btn:hover {
    background: rgba(212, 175, 55, 0.1);
}

/* View Toggle */
.view-toggle {
    max-width: 1400px;
    margin: 0 auto 2rem;
    padding: 0 2rem;
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
}

.view-btn {
    background: transparent;
    border: 2px solid var(--gold);
    border-radius: 15px;
    color: var(--gold);
    padding: 0.7rem 1.5rem;
    font-family: var(--font-body);
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.view-btn.active {
    background: rgba(212, 175, 55, 0.2);
}

.view-btn:hover {
    background: rgba(212, 175, 55, 0.1);
}

/* Wine Grid and Table */
.wines-container {
    max-width: 1400px;
    margin: 0 auto 4rem;
    padding: 0 2rem;
    position: relative;
    z-index: 2;
}

.wines-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.wines-title {
    font-family: var(--font-heading);
    font-size: 1.8rem;
    color: var(--gold);
    letter-spacing: 2px;
    font-weight: 500;
}

.wines-count {
    font-size: 1rem;
    color: rgba(245, 245, 240, 0.7);
}

.wines-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 2rem;
}

.wine-card {
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.7), rgba(10, 10, 10, 0.9));
    border: 2px solid rgba(212, 175, 55, 0.2);
    border-radius: 15px;
    padding: var(--space-md);
    margin-bottom: var(--space-lg);
    transition: all 0.4s ease;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 320px;
}

.wine-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.7) 50%, rgba(0, 0, 0, 0.8) 100%);
    z-index: 1;
    pointer-events: none;
}

.wine-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, transparent, rgba(212, 175, 55, 0.05), transparent);
    transform: translateX(-100%);
    transition: transform 0.6s ease;
}

.wine-card:hover {
    transform: translateY(-10px);
    border-color: var(--gold);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

.wine-card:hover::before {
    transform: translateX(100%);
}

.wine-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-sm);
    gap: var(--space-sm);
    flex-wrap: wrap;
    width: 100%;
    position: relative;
    z-index: 2;
}

/* Emphasize wine name for better hierarchy */
.wine-name {
    font-family: var(--font-heading);
    font-size: 1.35rem; /* 21.6px - piccolo, usa ivory per WCAG AA */
    color: var(--text-accent); /* Ivory per contrasto 4.5:1 */
    letter-spacing: 1px;
    font-weight: 600;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
}

.wine-name {
    font-family: var(--font-heading);
    font-size: 1.2rem; /* 19.2px - piccolo */
    color: var(--text-accent); /* Ivory per WCAG AA */
    letter-spacing: 1px;
    font-weight: 500;
    line-height: 1.3;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    max-width: 100%;
    display: block;
    flex: 1;
    margin-bottom: 0.3rem;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
}

.wine-price {
    font-size: 1.3rem; /* 20.8px - piccolo, usa ivory */
    color: var(--text-accent); /* Ivory per WCAG AA */
    font-weight: 500;
    white-space: nowrap;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
}

.wine-details {
    margin-bottom: var(--space-sm);
    flex-grow: 1;
    min-height: 0;
    width: 100%;
    position: relative;
    z-index: 2;
}

.wine-producer {
    font-size: 0.9rem;
    color: var(--gold);
    margin-bottom: 0.25rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.6px;
    text-shadow: 0 2px 6px rgba(0, 0, 0, 0.8);
}

.wine-region {
    font-size: 0.8rem;
    color: rgba(245, 245, 240, 0.9);
    margin-bottom: 0.25rem;
    font-style: italic;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-shadow: 0 2px 6px rgba(0, 0, 0, 0.8);
}

.wine-producer-detail {
    display: block;
    font-size: 1rem; /* 16px - piccolo */
    color: var(--text-accent); /* Ivory per WCAG AA */
    margin-bottom: 0.5rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.wine-region-detail {
    display: block;
    font-size: 0.8rem;
    color: rgba(245, 245, 240, 0.7);
    font-style: italic;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.wine-grape {
    font-size: 0.8rem;
    color: rgba(245, 245, 240, 0.9);
    margin-bottom: 0.5rem;
    text-shadow: 0 2px 6px rgba(0, 0, 0, 0.8);
}

.wine-description {
    font-size: 0.95rem;
    color: rgba(245, 245, 240, 0.9);
    line-height: 1.55;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-shadow: 0 2px 6px rgba(0, 0, 0, 0.8);
}

.wine-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: auto;
    width: 100%;
    padding-top: 0.8rem;
    border-top: 1px solid rgba(212, 175, 55, 0.2);
    gap: 0.75rem;
    position: relative;
    z-index: 2;
}

/* Uniform chip/button sizing for vintage, type indicator, and explore */
.wine-year,
.explore-wine,
.wine-family-indicator {
    height: 36px;
    border-radius: 15px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0 14px;
    line-height: 1;
}

.wine-year {
    font-size: 0.95rem;
    color: var(--gold);
    font-weight: 600;
    border: 2px solid rgba(212, 175, 55, 0.4);
    background: rgba(212, 175, 55, 0.15);
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

.explore-wine {
    background: transparent;
    border: 2px solid var(--gold);
    border-radius: 15px;
    color: var(--gold);
    padding: 0 16px;
    font-family: var(--font-body);
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
}

.explore-wine::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
    transition: left 0.5s ease;
}

.explore-wine:hover {
    background: rgba(212, 175, 55, 0.1);
}

.explore-wine:hover::before {
    left: 100%;
}

/* Wine Table */
.wine-table-container {
    display: none;
    overflow-x: auto;
}

.wine-table {
    width: 100%;
    border-collapse: collapse;
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.7), rgba(10, 10, 10, 0.9));
    border: 2px solid rgba(212, 175, 55, 0.2);
    border-radius: 15px;
    overflow: hidden;
}

.wine-table th {
    background: rgba(212, 175, 55, 0.1);
    color: var(--gold);
    font-family: var(--font-heading);
    font-weight: 500;
    padding: 1.2rem 1rem;
    text-align: left;
    border-bottom: 1px solid rgba(212, 175, 55, 0.3);
    letter-spacing: 1px;
}

.wine-table td {
    padding: 1.2rem 1rem;
    border-bottom: 1px solid rgba(212, 175, 55, 0.1);
    color: rgba(245, 245, 240, 0.8);
}

.wine-table tr:hover {
    background: rgba(212, 175, 55, 0.05);
}

.table-wine-name {
    font-family: var(--font-heading);
    color: var(--gold);
    font-weight: 500;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    max-width: 200px;
    white-space: normal;
}

.table-wine-region {
    color: rgba(245, 245, 240, 0.7);
    font-style: italic;
}

.table-wine-price {
    color: var(--gold);
    font-weight: 500;
}

.table-explore-btn {
    background: transparent;
    border: 2px solid var(--gold);
    border-radius: 15px;
    color: var(--gold);
    padding: 0.5rem 1rem;
    font-family: var(--font-body);
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
}

.table-explore-btn:hover {
    background: rgba(212, 175, 55, 0.1);
}

/* Wine Details Page - Top Bar (replaces header) */
.wine-details-top-bar {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.98) 0%, rgba(26, 26, 26, 0.98) 100%);
    border-bottom: 2px solid var(--gold);
    z-index: 100;
    box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
    padding: 0 1rem;
    align-items: center;
    justify-content: space-between;
}

.wine-details-back-btn {
    background: none;
    border: none;
    color: var(--gold);
    font-size: 1rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem;
    text-decoration: none;
    transition: all 0.3s;
}

.wine-details-back-btn:active {
    transform: translateX(-5px);
    color: var(--gold-light);
}

.wine-details-top-title {
    font-family: var(--font-heading);
    font-size: 1rem;
    color: var(--gold);
    letter-spacing: 2px;
    margin: 0;
    text-align: center;
    flex: 1;
}

.wine-details-share-btn {
    background: none;
    border: none;
    color: var(--gold);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0.5rem;
    transition: all 0.3s;
}

.wine-details-share-btn:active {
    transform: scale(0.9);
    color: var(--gold-light);
}

/* Wine Details Logo Styles */
.wine-details-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.wine-details-logo:hover {
    transform: scale(1.1);
}

.wine-details-logo-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

/* TLC11 Logo Styles (for wine-details-tlc11.html) */
.tlc11-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.tlc11-logo:hover {
    transform: scale(1.1);
}

.tlc11-logo-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

/* Wine Details Page */
.wine-details-container {
    max-width: 1400px;
    margin: 2rem auto 4rem;
    padding: 3rem 2rem;
    position: relative;
    z-index: 2;
    background: linear-gradient(180deg, rgba(26, 26, 26, 0.95) 0%, rgba(10, 10, 10, 0.98) 100%);
    border-radius: 20px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(212, 175, 55, 0.1);
    overflow: hidden;
}

@media (max-width: 767px) {
    .wine-details-top-bar {
        display: flex;
    }

    .wine-details-container {
        margin-top: 60px;
        padding: 0 1rem;
    }

    .wine-info-section {
        display: none;
    }

    .share-wine-section {
        display: none;
    }
}

/* Show sparkling guide icon on tablet devices */
@media (min-width: 768px) and (max-width: 1023px) {
    .sparkling-guide-icon {
        display: flex !important;
    }
}

/* Show wine-details-top-bar on tablet devices */
@media (min-width: 768px) and (max-width: 1023px) {
    .wine-details-top-bar {
        display: flex !important;
    }

    .wine-details-container {
        margin-top: 60px;
    }
}

.wine-details-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    margin-bottom: 3rem;
    padding: 2rem 0;
}

.wine-image-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
}

/* Premium parallax effect - sticky positioning for desktop */
@media (min-width: 768px) {
    .wine-image-section {
        position: sticky;
        top: 80px;
        align-self: flex-start;
        z-index: 1;
    }
}

.wine-image {
    width: 100%;
    max-width: 400px;
    height: 500px;
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
    border: 2px solid rgba(212, 175, 55, 0.3);
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 2rem;
    position: relative;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 4px 16px rgba(212, 175, 55, 0.1);
    transition: all 0.3s ease;
}

.wine-image:hover {
    border-color: rgba(212, 175, 55, 0.5);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 0 6px 20px rgba(212, 175, 55, 0.2);
    transform: translateY(-5px);
}

.wine-image::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, transparent, rgba(212, 175, 55, 0.08), transparent);
    pointer-events: none;
}

/* Wine bottle image styles - Premium parallax effect */
#wineBottleImage {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    transition: transform 0.1s ease-out, opacity 0.1s ease-out, filter 0.1s ease-out;
    will-change: transform, opacity, filter;
    position: relative;
    z-index: 1;
}

#wineBottleImage:hover {
    transform: scale(1.05);
}

/* Premium text readability - ensure text section has proper background */
@media (min-width: 768px) {
    .wine-info-section {
        position: relative;
        z-index: 2;
        background: linear-gradient(
            to right,
            var(--charcoal) 0%,
            rgba(26, 26, 26, 0.98) 5%,
            rgba(26, 26, 26, 0.95) 100%
        );
        padding: 1.5rem;
        border-radius: 12px;
        backdrop-filter: blur(2px);
        -webkit-backdrop-filter: blur(2px);
        box-shadow: -2px 0 20px rgba(0, 0, 0, 0.3);
    }
    
    /* Enhanced text shadows for premium readability */
    .wine-info-section .wine-name,
    .wine-info-section .wine-description,
    .wine-info-section .section-title {
        text-shadow: 0 2px 12px rgba(0, 0, 0, 0.5), 0 1px 4px rgba(0, 0, 0, 0.3);
    }
    
    /* Ensure all text elements have good contrast */
    .wine-info-section .info-item,
    .wine-info-section .meta-item,
    .wine-info-section .tasting-notes,
    .wine-info-section .food-pairings,
    .wine-info-section .producer-info {
        background: rgba(26, 26, 26, 0.85);
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
    }
}

.wine-bottle {
    font-size: 8rem;
    color: var(--burgundy);
    z-index: 1;
}

.wine-info-section {
    display: flex;
    flex-direction: column;
    align-items: center; /* center content horizontally */
    /* Note: This section is visible and should be shown */
}

/* Luxury wine name styling for wine-details page */
.wine-details-container .wine-name {
    font-family: var(--font-heading);
    font-size: 2.5rem; /* 40px - grande, oro OK per WCAG AA (3:1) */
    color: var(--text-accent-large); /* Oro per testo grande */
    letter-spacing: 2px;
    font-weight: 600;
    margin-bottom: 1.5rem;
    text-align: center;
    text-shadow: 0 2px 8px rgba(212, 175, 55, 0.2);
    line-height: 1.2;
}

.wine-details-container .wine-description {
    font-family: var(--font-body);
    font-size: 1.15rem;
    color: rgba(245, 245, 240, 0.85);
    line-height: 1.8;
    margin-bottom: 2rem;
    text-align: center;
    max-width: 600px;
    font-weight: 400;
    display: block;
    -webkit-line-clamp: unset;
    line-clamp: unset;
    -webkit-box-orient: unset;
    overflow: visible;
}

.wine-meta {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
    margin-bottom: 2rem;
    width: 100%;
    max-width: 600px;
}

/* Center text content within the info section */
.wine-info-section .wine-name,
.wine-info-section .wine-region,
.wine-info-section .wine-price,
.wine-info-section .wine-description {
    text-align: center;
}

/* Optional: center meta items visually */
.wine-meta .meta-item {
    align-items: center;
    text-align: center;
}

.meta-item {
    display: flex;
    flex-direction: column;
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.6) 0%, rgba(10, 10, 10, 0.85) 100%);
    border: 1px solid rgba(212, 175, 55, 0.2);
    border-radius: 12px;
    padding: 1.25rem 1.5rem;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.meta-item:hover {
    border-color: rgba(212, 175, 55, 0.4);
    box-shadow: 0 4px 16px rgba(212, 175, 55, 0.15);
    transform: translateY(-2px);
}

.meta-label {
    font-family: var(--font-heading);
    font-size: 0.85rem;
    color: var(--gold);
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    font-weight: 600;
}

.meta-value {
    font-family: var(--font-body);
    font-size: 1.2rem;
    color: rgba(245, 245, 240, 0.9);
    font-weight: 500;
    line-height: 1.4;
}

/* Tasting Notes */
.tasting-notes {
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
    border: 2px solid rgba(212, 175, 55, 0.3);
    border-radius: 15px;
    padding: 3rem;
    margin-bottom: 3rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 4px 16px rgba(212, 175, 55, 0.1);
    transition: all 0.3s ease;
}

.tasting-notes:hover {
    border-color: rgba(212, 175, 55, 0.4);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 0 6px 20px rgba(212, 175, 55, 0.15);
}

.section-title {
    font-family: var(--font-heading);
    font-size: 2rem;
    color: var(--gold);
    margin-bottom: 2rem;
    letter-spacing: 1.5px;
    font-weight: 600;
    text-align: center;
    text-shadow: 0 2px 8px rgba(212, 175, 55, 0.2);
    position: relative;
    padding-bottom: 1rem;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
}

.tasting-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
}

.tasting-category {
    display: flex;
    flex-direction: column;
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.5) 0%, rgba(10, 10, 10, 0.7) 100%);
    border: 1px solid rgba(212, 175, 55, 0.15);
    border-radius: 12px;
    padding: 1.5rem;
    transition: all 0.3s ease;
}

.tasting-category:hover {
    border-color: rgba(212, 175, 55, 0.3);
    box-shadow: 0 4px 16px rgba(212, 175, 55, 0.1);
    transform: translateY(-3px);
}

.tasting-label {
    font-family: var(--font-heading);
    font-size: 1.1rem;
    color: var(--gold);
    margin-bottom: 1rem;
    font-weight: 600;
    letter-spacing: 0.8px;
    text-transform: uppercase;
}

.tasting-value {
    font-family: var(--font-body);
    font-size: 1.1rem;
    color: rgba(245, 245, 240, 0.85);
    line-height: 1.7;
    font-weight: 400;
}

/* Elegant message styling for missing tasting notes */
.elegant-message {
    grid-column: 1 / -1;
    text-align: center;
    padding: 2rem;
    background: linear-gradient(145deg, rgba(212, 175, 55, 0.05), rgba(220, 20, 60, 0.05));
    border: 1px solid rgba(212, 175, 55, 0.2);
    border-radius: 8px;
    margin: 1rem 0;
}

.elegant-message .tasting-label {
    font-size: 1.2rem;
    color: var(--gold);
    margin-bottom: 1rem;
    font-weight: 600;
    font-family: var(--font-heading);
}

.elegant-message .tasting-value {
    font-size: 1.1rem;
    color: rgba(245, 245, 240, 0.9);
    text-transform: none !important;
    line-height: 1.7;
    font-style: italic;
    max-width: 1400px;
    margin: 0 auto;
}

/* Wine Information section */
.wine-information {
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
    border: 2px solid rgba(212, 175, 55, 0.3);
    border-radius: 15px;
    padding: 3rem;
    margin-bottom: 3rem;
    text-align: center; /* center headings and content */
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 4px 16px rgba(212, 175, 55, 0.1);
    transition: all 0.3s ease;
}

.wine-information:hover {
    border-color: rgba(212, 175, 55, 0.4);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 0 6px 20px rgba(212, 175, 55, 0.15);
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    justify-items: center; /* center cards in grid */
}

/* Wine Information items with icons */
.info-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.6), rgba(10, 10, 10, 0.85));
    border: 1px solid rgba(212, 175, 55, 0.2);
    border-radius: 12px;
    padding: 1rem 1.2rem;
    width: 100%;
    max-width: 320px;
}

.info-head {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.4rem;
}

.info-icon {
    color: var(--gold);
    font-size: 0.95rem;
}

/* More refined, elegant icon look */
.info-icon.elegant {
    opacity: 0.85;
    filter: drop-shadow(0 0 2px rgba(212, 175, 55, 0.2));
}

.info-label {
    font-size: 0.95rem;
    color: var(--gold);
    font-weight: 600;
    letter-spacing: 0.5px;
    text-transform: uppercase;
}

.info-value {
    font-size: 1.05rem;
    color: rgba(245, 245, 240, 0.9);
}

/* Elegant wine family indicators */
/* Default indicator style (when outside actions, not used now) */
.wine-family-indicator {
    background: var(--gold);
    color: var(--black);
    padding: 0 14px;
    border-radius: 15px;
    font-size: 0.95rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    opacity: 0.95;
    transition: all 0.3s ease;
    border: 2px solid rgba(0, 0, 0, 0.15);
}

/* Inline layout when placed inside actions */
.wine-actions .wine-family-indicator {
    position: static;
    margin: 0 0.25rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

.wine-family-indicator:hover {
    opacity: 1;
    transform: scale(1.05);
}

/* Wine type specific indicators */
.wine-family-rosso {
    background: linear-gradient(135deg, #DC143C, #FF1744);
    color: var(--ivory);
}

.wine-family-bianco {
    background: linear-gradient(135deg, #2C5F2D, #4A7C59);
    color: var(--ivory);
}

.wine-family-rosato {
    background: linear-gradient(135deg, #8B4B8C, #A569BD);
    color: var(--ivory);
}

.wine-family-bolicine {
    background: linear-gradient(135deg, #1E3A8A, #3B82F6);
    color: var(--ivory);
}

/* Subtle wine type indicators in page headers */
.wine-type-badge {
    display: inline-block;
    background: rgba(212, 175, 55, 0.1);
    border: 1px solid var(--gold);
    color: var(--gold);
    padding: 0.2rem 0.6rem;
    border-radius: 15px;
    font-size: 0.7rem;
    font-weight: 500;
    letter-spacing: 0.3px;
    text-transform: uppercase;
    margin-left: 1rem;
    vertical-align: middle;
}

/* Food Pairings */
.food-pairings {
    margin-bottom: 3rem;
}

.pairing-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
}

.pairing-item {
    position: relative;
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
    border: 2px solid rgba(212, 175, 55, 0.3);
    border-radius: 15px;
    padding: 2rem;
    text-align: center;
    transition: all 0.3s ease;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.pairing-item:hover {
    border-color: rgba(212, 175, 55, 0.5);
    transform: translateY(-5px);
    box-shadow: 0 8px 24px rgba(212, 175, 55, 0.2);
}

.pairing-icon {
    font-size: 2rem;
    color: var(--gold);
    margin-bottom: 1rem;
}

.pairing-name {
    font-size: 1.1rem;
    color: var(--ivory);
    font-weight: 500;
    transition: color 0.3s ease;
}

:root[data-theme="night"] .pairing-name {
    color: var(--ivory);
}

:root[data-theme="day"] .pairing-name {
    color: var(--text-primary);
    font-weight: 600;
}

.personalized-pairing {
    border-color: var(--gold) !important;
    background: rgba(212, 175, 55, 0.15) !important;
}

:root[data-theme="day"] .personalized-pairing {
    background: rgba(139, 105, 20, 0.15) !important;
    border-color: var(--gold) !important;
}

.pairing-score {
    display: block;
    font-size: 0.75rem;
    color: var(--gold);
    font-weight: 600;
    margin-top: 0.25rem;
    letter-spacing: 0.5px;
}

.gca-food-pairing-badge {
    position: absolute;
    top: 0.75rem;
    left: 50%;
    transform: translateX(-50%);
    background: var(--gold);
    color: var(--black);
    padding: 0.35rem 0.75rem;
    border-radius: 6px;
    font-size: 0.65rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    z-index: 1;
    white-space: nowrap;
}

.pairing-item {
    position: relative;
}

/* Producer Info */
.producer-info {
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
    border: 2px solid rgba(212, 175, 55, 0.3);
    border-radius: 15px;
    padding: 3rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 4px 16px rgba(212, 175, 55, 0.1);
    transition: all 0.3s ease;
}

.producer-info:hover {
    border-color: rgba(212, 175, 55, 0.4);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 0 6px 20px rgba(212, 175, 55, 0.15);
}

.producer-name {
    font-family: var(--font-heading);
    font-size: 1.8rem;
    color: var(--gold);
    margin-bottom: 1.5rem;
    letter-spacing: 1.5px;
    font-weight: 600;
    text-align: center;
    text-shadow: 0 2px 8px rgba(212, 175, 55, 0.2);
}

.producer-description {
    font-family: var(--font-body);
    font-size: 1.15rem;
    color: rgba(245, 245, 240, 0.85);
    line-height: 1.8;
    text-align: center;
    font-weight: 400;
}

/* Footer */
.luxury-footer {
    background: rgba(10, 10, 10, 0.9);
    padding: 1rem 2rem;
    margin-top: auto;
    border-top: 1px solid rgba(212, 175, 55, 0.1);
    position: relative;
    z-index: 2;
    flex-shrink: 0;
    display: none; /* Hidden for compact view */
}

.footer-content {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.footer-logo {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    color: var(--gold);
    margin-bottom: 1.5rem;
    letter-spacing: 2px;
}

.footer-info {
    display: flex;
    gap: 2rem;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
    justify-content: center;
}

.footer-info p {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
    color: rgba(245, 245, 240, 0.7);
}

.footer-info i {
    color: var(--gold);
}

.social-icons {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.social-icons a {
    color: rgba(245, 245, 240, 0.7);
    font-size: 1.2rem;
    transition: color 0.3s ease;
}

.social-icons a:hover {
    color: var(--gold);
}

.copyright {
    font-size: 0.8rem;
    color: rgba(245, 245, 240, 0.5);
    text-align: center;
}

/* Loading States */
.loading {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 2rem;
    color: var(--gold);
    font-size: 1.1rem;
}

.loading::after {
    content: '';
    width: 20px;
    height: 20px;
    border: 2px solid var(--gold);
    border-top: 2px solid transparent;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-left: 1rem;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 1024px) {
    .wines-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    }
    
    .regions-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    }
    
    .wine-details-content {
        grid-template-columns: 1fr;
        gap: 2rem;
    }
    
    .wine-image {
        max-width: 300px;
        height: 400px;
    }

    .wine-details-container {
        margin-bottom: 120px;
        padding: 0 1rem;
    }

    .wine-details-content {
        padding-bottom: 0;
    }
}

@media (max-width: 767px) {
    .header-content {
        flex-direction: column;
        gap: 1.5rem;
    }
    
    .luxury-title {
        font-size: 2.5rem;
    }
    
    .luxury-title.medium {
        font-size: 2rem;
    }
    
    .luxury-title.small {
        font-size: 1.8rem;
    }
    
    .luxury-subtitle {
        font-size: 1rem;
        letter-spacing: 6px;
        margin-bottom: 2rem;
    }
    
    .luxury-subtitle.medium {
        font-size: 1rem;
        letter-spacing: 4px;
        margin-bottom: 1.5rem;
    }
    
    .luxury-subtitle.small {
        font-size: 0.9rem;
        letter-spacing: 3px;
        margin-bottom: 1.5rem;
    }
    
    .luxury-search-bar {
        flex-direction: column;
    }
    
    .luxury-search-input {
        min-width: 100%;
    }
    
    .search-container {
        width: 100%;
        justify-content: center;
    }
    
    .luxury-wine-selection {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .regions-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .regions-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .regions-table {
        font-size: 0.95rem;
    }
    
    .regions-table th,
    .regions-table td {
        padding: 1rem 0.75rem;
    }
    
    .regions-table th {
        font-size: 1rem;
    }
    
    .regions-table td {
        font-size: 0.95rem;
        color: rgba(245, 245, 240, 0.9);
    }
    
    .table-region-name {
        font-size: 1rem;
    }
    
    .table-region-count {
        font-size: 1rem;
        font-weight: 600;
    }
    
    .table-region-description {
        font-size: 0.9rem;
        color: rgba(245, 245, 240, 0.8);
    }
    
    .wines-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .view-toggle {
        justify-content: center;
    }
    
    .wine-table {
        font-size: 0.9rem;
    }
    
    .wine-table th,
    .wine-table td {
        padding: 0.8rem 0.5rem;
    }
    
    .wine-meta {
        grid-template-columns: 1fr;
    }
    
    .tasting-grid {
        grid-template-columns: 1fr;
    }
    
    .info-grid {
        grid-template-columns: 1fr;
    }
    
    .elegant-message {
        padding: 1.5rem;
    }
    
    .elegant-message .tasting-value {
        font-size: 1rem;
    }
    
    .pairing-list {
        grid-template-columns: 1fr;
    }
}

/* Mobile adjustments for uniform chips */
@media (max-width: 767px) {
    .wine-year,
    .explore-wine,
    .wine-family-indicator {
        height: 32px;
        border-radius: 12px;
        padding: 0 12px;
        font-size: 0.9rem;
    }
}

@media (max-width: 480px) {
    .luxury-wine-selection {
        grid-template-columns: 1fr;
    }
    
    .regions-grid {
        grid-template-columns: 1fr;
    }
    
    .wines-grid {
        grid-template-columns: 1fr;
    }
    
    .luxury-title {
        font-size: 2rem;
    }
    
    .luxury-title.medium {
        font-size: 1.8rem;
    }
    
    .luxury-title.small {
        font-size: 1.6rem;
    }
    
    .wine-header {
        flex-direction: column;
        gap: 0.5rem;
        align-items: flex-start;
    }
    
    .wine-name {
        font-size: 1.2rem;
        line-height: 1.4;
        word-break: break-word;
    }
    
    .view-toggle {
        flex-direction: column;
        align-items: center;
    }
    
    .view-btn {
        width: 100%;
        max-width: 200px;
    }
    
    .wine-bottle {
        font-size: 6rem;
    }
    
    .wine-icon {
        width: 100px;
        height: 100px;
    }
    
    .wine-icon img {
        width: 80px;
        height: 80px;
        padding: 6px;
    }
}

/* Filter Dropdown Styles */
.filter-dropdown {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(5px);
}

.filter-dropdown-content {
    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
    border: 2px solid #d4af37;
    border-radius: 15px;
    padding: 30px;
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    animation: filterSlideIn 0.3s ease-out;
}

@keyframes filterSlideIn {
    from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.filter-dropdown-content h3 {
    color: #d4af37;
    font-family: var(--font-heading);
    font-size: 1.5rem;
    font-weight: 600;
    margin: 0 0 20px 0;
    text-align: center;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

.filter-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 10px;
    margin-bottom: 20px;
    max-height: 400px;
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 5px;
}

/* Custom scrollbar for filter-options */
.filter-options::-webkit-scrollbar {
    width: 8px;
}

.filter-options::-webkit-scrollbar-track {
    background: rgba(26, 26, 26, 0.5);
    border-radius: 4px;
}

.filter-options::-webkit-scrollbar-thumb {
    background: rgba(212, 175, 55, 0.5);
    border-radius: 4px;
}

.filter-options::-webkit-scrollbar-thumb:hover {
    background: rgba(212, 175, 55, 0.7);
}

.filter-search-wrapper {
    position: relative;
    margin-bottom: 20px;
}

.filter-search-input {
    width: 100%;
    padding: 12px 16px 12px 40px;
    background: rgba(26, 26, 26, 0.8);
    border: 1.5px solid rgba(212, 175, 55, 0.3);
    border-radius: 8px;
    color: #ffffff;
    font-family: var(--font-body);
    font-size: 0.95rem;
    transition: all 0.3s ease;
}

.filter-search-input:focus {
    outline: none;
    border-color: rgba(212, 175, 55, 0.6);
    background: rgba(26, 26, 26, 0.95);
    box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
}

.filter-search-input::placeholder {
    color: rgba(245, 245, 240, 0.5);
}

.filter-option {
    background: linear-gradient(135deg, #2d2d2d 0%, #3d3d3d 100%);
    border: 1px solid #555;
    border-radius: 8px;
    color: #ffffff;
    padding: 12px 16px;
    font-family: var(--font-body);
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.filter-option::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
    transition: left 0.5s ease;
}

.filter-option:hover::before {
    left: 100%;
}

.filter-option:hover {
    background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
    border-color: #d4af37;
    color: #1a1a1a;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
}

.filter-option:active {
    transform: translateY(0);
}

.close-filter {
    background: linear-gradient(135deg, #666 0%, #888 100%);
    border: 1px solid #888;
    border-radius: 8px;
    color: #ffffff;
    padding: 12px 24px;
    font-family: var(--font-body);
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
    margin-top: 10px;
}

.close-filter:hover {
    background: linear-gradient(135deg, #888 0%, #aaa 100%);
    border-color: #aaa;
    transform: translateY(-1px);
}

.filter-actions {
    display: flex;
    gap: 10px;
    margin-top: 10px;
}

.filter-actions button {
    flex: 1;
    margin: 0;
}

.clear-filters {
    background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
    border: 1px solid #d4af37;
    border-radius: 8px;
    color: #1a1a1a;
    padding: 12px 24px;
    font-family: var(--font-body);
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
}

.clear-filters:hover {
    background: linear-gradient(135deg, #b8941f 0%, #a0821c 100%);
    border-color: #b8941f;
    transform: translateY(-1px);
    box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
}

/* Share Wine Section */
.share-wine-section {
    max-width: 1400px;
    margin: 2rem auto 2rem;
    padding: 0 2rem;
    text-align: center;
    position: relative;
    z-index: 10;
}

.share-wine-btn {
    background: rgba(0, 0, 0, 0.9);
    border: 2px solid transparent;
    border-radius: 12px;
    color: #D4AF37;
    padding: 0.8rem 1.5rem;
    font-family: var(--font-heading);
    font-size: 0.9rem;
    font-weight: 600;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
}

.share-wine-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, #009246, #FFFFFF, #CE2B37, #009246, #FFFFFF, #CE2B37);
    background-size: 300% 300%;
    border-radius: 15px;
    z-index: -1;
    animation: italianFlagBorder 3s ease-in-out infinite;
}

@keyframes italianFlagBorder {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

.share-wine-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 18px rgba(0, 146, 70, 0.6);
    color: #F5F5F0;
    background: rgba(0, 0, 0, 0.95);
}

.share-wine-btn:hover::before {
    animation-duration: 1.5s;
}

.share-wine-btn i {
    font-size: 1rem;
    text-shadow: 0 0 6px rgba(212, 175, 55, 0.5);
}

.share-wine-btn span {
    text-shadow: 0 0 4px rgba(212, 175, 55, 0.3);
}

/* Share Modal */
.share-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(5px);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.share-modal.active {
    opacity: 1;
    visibility: visible;
}

.share-modal-content {
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.95), rgba(10, 10, 10, 0.98));
    border: 2px solid var(--gold);
    border-radius: 20px;
    padding: 2.5rem;
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    transform: scale(0.9) translateY(-50px);
    transition: all 0.3s ease;
}

.share-modal.active .share-modal-content {
    transform: scale(1) translateY(0);
}

.share-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(212, 175, 55, 0.3);
}

.share-modal-header h3 {
    color: var(--gold);
    font-family: var(--font-heading);
    font-size: 1.5rem;
    font-weight: 600;
    margin: 0;
    letter-spacing: 1px;
}

.close-share-modal {
    background: transparent;
    border: 2px solid var(--gold);
    border-radius: 50%;
    color: var(--gold);
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1.1rem;
}

.close-share-modal:hover {
    background: var(--gold);
    color: var(--black);
    transform: rotate(90deg);
}

.share-options {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    margin-bottom: 2rem;
}

.share-option {
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.7), rgba(10, 10, 10, 0.9));
    border: 2px solid rgba(212, 175, 55, 0.2);
    border-radius: 15px;
    padding: 1.5rem 1rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.8rem;
    position: relative;
    overflow: hidden;
}

.share-option::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, transparent, rgba(212, 175, 55, 0.05), transparent);
    transform: translateX(-100%);
    transition: transform 0.6s ease;
}

.share-option:hover {
    border-color: var(--gold);
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
}

.share-option:hover::before {
    transform: translateX(100%);
}

.share-option i {
    font-size: 1.8rem;
    color: var(--gold);
    transition: all 0.3s ease;
}

.share-option span {
    font-family: var(--font-body);
    font-size: 0.9rem;
    color: var(--ivory);
    font-weight: 500;
    letter-spacing: 0.5px;
}

.share-option:hover i {
    transform: scale(1.1);
}

/* Social-specific colors */
.share-option:nth-child(1):hover { /* Facebook */
    border-color: #1877F2;
}

.share-option:nth-child(1):hover i {
    color: #1877F2;
}

.share-option:nth-child(2):hover { /* Instagram */
    border-color: #E4405F;
}

.share-option:nth-child(2):hover i {
    color: #E4405F;
}

.share-option:nth-child(3):hover { /* Twitter */
    border-color: #1DA1F2;
}

.share-option:nth-child(3):hover i {
    color: #1DA1F2;
}

.share-option:nth-child(4):hover { /* WhatsApp */
    border-color: #25D366;
}

.share-option:nth-child(4):hover i {
    color: #25D366;
}

.share-option:nth-child(5):hover { /* Email */
    border-color: #EA4335;
}

.share-option:nth-child(5):hover i {
    color: #EA4335;
}

.share-option:nth-child(6):hover { /* SMS */
    border-color: #34A853;
}

.share-option:nth-child(6):hover i {
    color: #34A853;
}

/* Share URL Section */
.share-url-section {
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid rgba(212, 175, 55, 0.3);
}

.share-url-section label {
    display: block;
    color: var(--gold);
    font-family: var(--font-body);
    font-size: 1rem;
    font-weight: 500;
    margin-bottom: 1rem;
    letter-spacing: 0.5px;
}

.url-copy-container {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.url-copy-container input {
    flex: 1;
    background: rgba(26, 26, 26, 0.8);
    border: 2px solid rgba(212, 175, 55, 0.3);
    border-radius: 10px;
    color: var(--ivory);
    padding: 0.8rem 1rem;
    font-family: var(--font-body);
    font-size: 0.9rem;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
}

.url-copy-container input:focus {
    outline: none;
    border-color: var(--gold);
    box-shadow: 0 0 10px rgba(212, 175, 55, 0.2);
}

.copy-url-btn {
    background: linear-gradient(135deg, var(--gold) 0%, var(--dark-gold) 100%);
    border: 2px solid var(--gold);
    border-radius: 10px;
    color: var(--black);
    padding: 0.8rem 1.2rem;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 50px;
}

.copy-url-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
}

.copy-url-btn:active {
    transform: translateY(0);
}

/* Mobile Responsive */
@media (max-width: 767px) {
    .filter-dropdown-content {
        padding: 20px;
        margin: 20px;
        width: calc(100% - 40px);
    }
    
    .filter-options {
        grid-template-columns: 1fr;
    }
    
    .filter-dropdown-content h3 {
        font-size: 1.3rem;
    }
    
    .share-options {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .share-modal-content {
        padding: 2rem;
        margin: 1rem;
    }
    
    .share-modal-header h3 {
        font-size: 1.3rem;
    }
}

@media (max-width: 480px) {
    .share-options {
        grid-template-columns: 1fr;
    }
    
    .share-wine-btn {
        padding: 1rem 2rem;
        font-size: 1rem;
    }
    
    .share-modal-content {
        padding: 1.5rem;
        margin: 0.5rem;
    }
    
    .url-copy-container {
        flex-direction: column;
        gap: 1rem;
    }
    
    .copy-url-btn {
        width: 100%;
    }
}

/* Interactive Map Section Styles - Protagonist */
.interactive-map-main {
    flex: 1;
    position: relative;
    width: 100%;
    height: 100%;
    padding: 0;
    background: linear-gradient(135deg, var(--charcoal) 0%, var(--black) 100%);
    display: flex;
    flex-direction: column;
    border-radius: 12px;
    border: 2px solid rgba(212, 175, 55, 0.3);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
    overflow: hidden;
}

#map-container {
    position: relative;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    flex: 1;
    display: flex;
    flex-direction: column;
}

#map {
    width: 100%;
    height: 100%;
    min-height: 500px; /* Ensure map has minimum height */
    flex: 1;
    z-index: 1;
    background: #0A0A0A !important;
    border-radius: 0;
    overflow: hidden;
}

/* Day mode styles for general #map */
:root[data-theme="day"] #map {
    background: var(--bg-primary, #FDFBF7) !important;
}

/* Rimuoviamo lo sfondo della mappa di Leaflet */
.leaflet-tile-pane {
    display: none !important;
}

.leaflet-container {
    background: #0A0A0A !important;
}

/* Day mode styles for general leaflet container */
:root[data-theme="day"] .leaflet-container {
    background: var(--bg-primary, #FDFBF7) !important;
}

.map-overlay {
    position: absolute;
    top: 15px;
    left: 15px;
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(10, 10, 10, 0.98));
    padding: 15px 20px;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    z-index: 1000;
    max-width: 280px;
    border-left: 4px solid var(--gold);
    backdrop-filter: blur(10px);
}

.map-overlay h1 {
    color: var(--gold);
    margin-bottom: 8px;
    font-size: 1.3rem;
    font-family: var(--font-heading);
    letter-spacing: 1px;
}

.map-overlay p {
    color: var(--ivory);
    font-size: 0.85rem;
    line-height: 1.4;
    margin: 0;
}

.region-info {
    position: absolute;
    bottom: 15px;
    left: 15px;
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(10, 10, 10, 0.98));
    padding: 15px 20px;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    z-index: 1000;
    max-width: 280px;
    display: none;
    border-left: 4px solid var(--gold);
    backdrop-filter: blur(10px);
}

.region-info h3 {
    color: var(--gold);
    margin-bottom: 8px;
    border-bottom: 1px solid rgba(212, 175, 55, 0.3);
    padding-bottom: 5px;
    font-family: var(--font-heading);
    font-size: 1.1rem;
    letter-spacing: 0.5px;
}

.region-info p {
    margin-bottom: 5px;
    font-size: 0.85rem;
    color: var(--ivory);
    line-height: 1.4;
}

.controls {
    position: absolute;
    top: 15px;
    right: 15px;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.control-btn {
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(10, 10, 10, 0.98));
    border: 2px solid var(--gold);
    border-radius: 50%;
    width: 42px;
    height: 42px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    cursor: pointer;
    transition: all 0.2s;
    backdrop-filter: blur(10px);
}

.control-btn:hover {
    background: rgba(212, 175, 55, 0.1);
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
}

.control-btn svg path {
    stroke: var(--gold);
}

.legend {
    position: absolute;
    bottom: 15px;
    right: 15px;
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(10, 10, 10, 0.98));
    padding: 12px 16px;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    z-index: 1000;
    max-width: 180px;
    border-left: 4px solid var(--gold);
    backdrop-filter: blur(10px);
}

.legend h4 {
    margin-bottom: 8px;
    color: var(--gold);
    font-size: 0.9rem;
    font-family: var(--font-heading);
    letter-spacing: 0.5px;
}

.legend-item {
    display: flex;
    align-items: center;
    margin-bottom: 6px;
}

.legend-color {
    width: 18px;
    height: 18px;
    margin-right: 8px;
    border: 1px solid rgba(212, 175, 55, 0.3);
    border-radius: 3px;
}

.legend-item span {
    color: var(--ivory);
    font-size: 0.8rem;
    line-height: 1.3;
}

/* Desktop layout (>= 1024px) - iPad Pro e superiori */
@media (min-width: 1024px) {
    /* Hide mobile elements */
    .mobile-menu-btn,
    .mobile-search-btn,
    .mobile-search-bar-container,
    .mobile-map-wines-container,
    .mobile-views-container {
        display: none !important;
    }
    
    /* Hide mobile-specific UI */
    .mobile-wine-type-selector {
        display: none !important;
    }
    
    .mobile-wine-type-popup {
        display: none !important;
    }

    /* Hide mobile breadcrumb */
    .breadcrumb,
    .mobile-breadcrumb {
        display: none !important;
    }
    
    /* Show desktop elements */
    .main-content-desktop {
        display: flex !important;
        margin-left: 0 !important;
    }
    
    /* Reset content wrapper margin */
    .content-wrapper {
        margin-left: 0 !important;
        margin-top: 0 !important;
        flex-direction: row !important;
    }
    
    .map-wrapper {
        display: flex !important;
    }

    .interactive-map-main {
        display: flex !important;
    }
    
    /* Sidebar visibile solo su desktop (>= 1024px) */
    .sidebar {
        display: flex !important;
    }

    .search-bar-container {
        display: block !important;
    }

    .top-nav {
        position: relative !important;
        box-shadow: none !important;
    }

    .logo {
        display: block !important;
    }
}

/* Tablet 820x1180 - Usa layout desktop come 1024x1366 */
/* Gestisce portrait (820x1180) - width 820px-1023px */
@media (min-width: 820px) and (max-width: 1023px) {
    /* Usa layout desktop invece di mobile */
    .mobile-menu-btn,
    .mobile-search-btn,
    .mobile-map-wines-container,
    .mobile-views-container {
        display: none !important;
    }
    
    /* Show mobile search bar on tablet for quick filters */
    .mobile-search-bar-container {
        display: block !important;
        position: fixed;
        top: calc(var(--mobile-nav-height) + constant(safe-area-inset-top));
        top: calc(var(--mobile-nav-height) + env(safe-area-inset-top));
        left: 0;
        right: 0;
        z-index: 190;
        background: linear-gradient(180deg, rgba(26, 26, 26, 0.98) 0%, rgba(10, 10, 10, 0.98) 100%);
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        padding: 1rem 1.25rem;
    }
    
    /* Show quick search buttons on tablet */
    .mobile-quick-search-buttons {
        display: flex !important;
    }
    
    /* Hide mobile-specific UI */
    .mobile-wine-type-selector {
        display: none !important;
    }
    
    .mobile-wine-type-popup {
        display: none !important;
    }

    /* Hide mobile breadcrumb */
    .breadcrumb,
    .mobile-breadcrumb {
        display: none !important;
    }
    
    /* Show desktop elements */
    .main-content-desktop {
        display: flex !important;
        margin-left: 0 !important;
    }
    
    /* Reset content wrapper margin - account for search bar */
    .content-wrapper {
        margin-left: 0 !important;
        margin-top: 140px !important; /* Space for search bar */
        flex-direction: row !important;
    }
    
    .map-wrapper {
        display: flex !important;
        min-height: 600px !important;
        max-height: calc(75vh - 140px) !important; /* Account for search bar */
    }
    
    #map {
        min-height: 600px !important;
        max-height: 75vh !important;
    }

    .interactive-map-main {
        display: flex !important;
    }
    
    /* Sidebar visibile */
    .sidebar {
        display: flex !important;
    }
    
    /* Search bar container ridotta quando wine list è attiva */
    .search-bar-container {
        display: block !important;
        padding: 1rem 1.5rem;
    }
    
    .search-wrapper {
        max-width: 100%;
    }
    
    .search-input-wrapper {
        min-width: 250px;
    }
    
    .search-input {
        padding: 0.75rem 1.125rem;
        font-size: 0.9rem;
    }

    .top-nav {
        position: relative !important;
        box-shadow: none !important;
    }

    .logo {
        display: block !important;
    }
    
    /* Desktop wines grid visibile */
    .wines-grid-container {
        display: grid !important;
    }
    
    /* Sidebar wine cards ridotta per tablet */
    .wine-cards-sidebar {
        flex: 0 0 240px;
        padding: 1.25rem;
        max-height: calc(100vh - 200px);
    }
    
    .sidebar-title {
        font-size: 1.1rem;
        margin-bottom: 0.875rem;
        padding-bottom: 0.625rem;
    }
}

/* Tablet 820x1180 ruotato in landscape (1180x820) - width > 1023px ma height = 820px */
@media (min-width: 1024px) and (max-width: 1366px) and (min-height: 700px) and (max-height: 900px) {
    /* Usa layout desktop invece di mobile anche in landscape */
    .mobile-menu-btn,
    .mobile-search-btn,
    .mobile-search-bar-container,
    .mobile-map-wines-container,
    .mobile-views-container {
        display: none !important;
    }
    
    /* Hide mobile-specific UI */
    .mobile-wine-type-selector {
        display: none !important;
    }
    
    .mobile-wine-type-popup {
        display: none !important;
    }

    /* Hide mobile breadcrumb */
    .breadcrumb,
    .mobile-breadcrumb {
        display: none !important;
    }
    
    /* Show desktop elements */
    .main-content-desktop {
        display: flex !important;
        margin-left: 0 !important;
    }
    
    /* Reset content wrapper margin */
    .content-wrapper {
        margin-left: 0 !important;
        margin-top: 0 !important;
        flex-direction: row !important;
    }
    
    .map-wrapper {
        display: flex !important;
        min-height: 500px !important;
        max-height: 70vh !important;
    }
    
    #map {
        min-height: 500px !important;
        max-height: 70vh !important;
    }

    .interactive-map-main {
        display: flex !important;
    }
    
    /* Sidebar visibile */
    .sidebar {
        display: flex !important;
    }
    
    /* Search bar container ridotta quando wine list è attiva in landscape */
    .search-bar-container {
        display: block !important;
        padding: 0.875rem 1.25rem;
    }
    
    .search-wrapper {
        max-width: 100%;
    }
    
    .search-input-wrapper {
        min-width: 220px;
    }
    
    .search-input {
        padding: 0.625rem 1rem;
        font-size: 0.875rem;
    }

    .top-nav {
        position: relative !important;
        box-shadow: none !important;
    }

    .logo {
        display: block !important;
    }
    
    /* Desktop wines grid visibile */
    .wines-grid-container {
        display: grid !important;
    }
    
    /* Sidebar wine cards ridotta per tablet landscape */
    .wine-cards-sidebar {
        flex: 0 0 220px;
        padding: 1rem;
        max-height: calc(100vh - 180px);
    }
    
    .sidebar-title {
        font-size: 1rem;
        margin-bottom: 0.75rem;
        padding-bottom: 0.5rem;
    }
}

/* Tablet layout - solo per schermi 768px-819px - unificato con mobile */
@media (min-width: 768px) and (max-width: 819px) {
    :root {
        --mobile-nav-height: 70px;
        --mobile-wine-type-height: 124px;
        --mobile-search-height: 112px;
    }
    
    /* Usa lo stesso layout mobile - desktop map nascosta */
    .main-content-desktop .map-wrapper {
        display: none !important;
    }
    
    /* Sidebar completamente nascosta su tablet */
    .sidebar {
        display: none !important;
    }
    
    /* Search bar desktop nascosta */
    .search-bar-container {
        display: none !important;
    }
    
    /* Mobile map container unificato */
    .mobile-map-wines-container {
        display: flex !important;
    }
    
    /* Quando mobile-wines-cards-container è visibile, espandi fino ai pulsanti */
    .mobile-map-wines-container.wines-cards-expanded {
        margin-top: 0 !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        z-index: 50 !important;
        padding-top: calc(var(--mobile-nav-height) + var(--mobile-search-height)) !important; /* Nav + search bar (fino ai pulsanti) */
    }
    
    /* Nascondi wine type selector quando wines-cards-expanded è attivo */
    body:has(.mobile-map-wines-container.wines-cards-expanded) .mobile-wine-type-selector {
        display: none !important;
    }
    
    /* Assicura che mobile-wines-cards-header parta subito dopo i pulsanti */
    .mobile-map-wines-container.wines-cards-expanded .mobile-wines-cards-header {
        margin-top: 0 !important;
    }
    
    /* Mobile map wrapper unificato */
    .mobile-map-wrapper {
        min-height: 585px; /* Aumentato del 30% da 450px */
        max-height: 78vh; /* Aumentato del 30% da 60vh */
        height: 78vh; /* Aumentato del 30% da 60vh */
        border-radius: 20px;
    }
    
    #mobileMap {
        min-height: 350px;
        height: 100%;
        border-radius: 20px;
        margin-left: 51px; /* Aggiunto margin-left di 51px */
        margin-top: 83px; /* Aggiunto margin-top di 83px */
    }
    
    /* Desktop wines grid nascosto */
    .wines-grid-container {
        display: none !important;
    }
}

/* Tutti i dispositivi sotto iPad Pro - layout unificato (già gestito da @media (max-width: 1023px)) */

/* Leaflet Zoom Controls - Position bottom left */
.leaflet-control-zoom {
    position: absolute !important;
    bottom: 20px !important;
    left: 20px !important;
    top: auto !important;
    right: auto !important;
    margin: 0 !important;
}

.leaflet-control-zoom a {
    width: 34px !important;
    height: 34px !important;
    line-height: 34px !important;
    background-color: rgba(26, 26, 26, 0.9) !important;
    color: var(--gold) !important;
    border: 1px solid rgba(212, 175, 55, 0.3) !important;
    font-size: 18px !important;
    font-weight: 600 !important;
    transition: all 0.3s ease !important;
}

.leaflet-control-zoom a:hover {
    background-color: rgba(212, 175, 55, 0.2) !important;
    border-color: var(--gold) !important;
    color: var(--gold) !important;
    transform: scale(1.05) !important;
}

.leaflet-control-zoom-in {
    border-radius: 8px 8px 0 0 !important;
}

.leaflet-control-zoom-out {
    border-radius: 0 0 8px 8px !important;
    border-top: none !important;
}

@media (max-width: 767px) {
    .luxury-header {
        padding: 1rem;
    }
    
    .luxury-logo {
        width: 80px;
        height: 80px;
    }
    
    .luxury-title {
        font-size: 2rem;
    }
    
    .luxury-subtitle {
        font-size: 0.85rem;
    }
    
    .luxury-search-bar {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    /* Wine cards sidebar nascosta su mobile */
    .wine-cards-sidebar {
        display: none !important;
    }
    
    .luxury-wine-card {
        min-width: 150px;
        padding: 0.75rem;
    }
    
    .wine-icon img {
        width: 35px;
        height: 35px;
    }
    
    .wine-title {
        font-size: 0.85rem;
    }
    
    .wine-subtitle {
        font-size: 0.7rem;
    }
    
    /* Map elements are hidden together with map-wrapper on mobile - only for wine-details page */
    .wine-details-page .map-wrapper {
        display: none !important;
    }
    
    .wine-details-page .map-overlay, 
    .wine-details-page .legend, 
    .wine-details-page .region-info,
    .wine-details-page .interactive-map-main {
        display: none !important;
    }
    
    .wine-details-page .controls {
        display: none !important;
    }
    
    /* Assicura che sidebar sia nascosta anche nelle altre pagine */
    .sidebar {
        display: none !important;
    }
    
    .wine-details-container {
        margin-bottom: 0;
        padding-bottom: 2rem;
    }

    .wine-details-content {
        padding-bottom: 0;
        margin-bottom: 2rem;
    }

    .luxury-footer {
        display: block;
    }

    .tasting-notes,
    .food-pairings,
    .producer-info {
        margin-bottom: 2rem;
    }
}

.main-layout {
    display: flex;
    flex-direction: column;
    height: 100vh;
    background: #0A0A0A !important; /* Colore uniforme per tutto il background */
    width: 100vw;
    overflow: hidden;
    position: relative;
}

/* ==================== TOP NAVIGATION ==================== */
.top-nav {
    /* Glassmorphism effect */
    background: rgba(10, 10, 10, 0.65);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border-bottom: 1px solid rgba(212, 175, 55, 0.2);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
    padding: 1.5rem 2.5rem;
    display: flex;
    align-items: center;
    gap: 2rem;
    flex-shrink: 0;
    z-index: 100;
    min-height: 90px;
    position: relative;
}

.logo {
    width: 48px;
    height: 48px;
    background: transparent;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: transform 0.3s ease;
    cursor: pointer;
    overflow: hidden;
}

.logo-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
}

.logo:hover {
    transform: scale(1.05);
}

.nav-title-section {
    flex: 1;
}

.nav-title {
    font-family: var(--font-heading);
    font-size: var(--fs-600, 1.953rem); /* 31px - grande, oro OK per WCAG AA */
    font-weight: 600;
    color: var(--text-accent-large); /* Oro per testo grande */
    letter-spacing: 3.5px;
    text-transform: uppercase;
    margin: 0;
    line-height: 1.2;
    font-style: normal;
    /* Ombra per leggibilità su sfondo glassmorphism */
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5);
}

.nav-subtitle {
    font-family: var(--font-body);
    font-size: 0.9rem;
    color: rgba(245, 245, 240, 0.8); /* Aumentato contrasto per leggibilità */
    letter-spacing: 0.8px;
    margin: 0.25rem 0 0 0;
    line-height: 1.3;
    /* Ombra per leggibilità su sfondo glassmorphism */
    text-shadow: 0 1px 4px rgba(0, 0, 0, 0.7);
}

/* ==================== CONTENT WRAPPER ==================== */
.content-wrapper {
    display: flex;
    flex: 1;
    overflow: hidden;
    background: #0A0A0A !important; /* Colore uniforme per tutto il background */
    gap: 0;
    min-height: 500px; /* Ensure content wrapper has minimum height */
}

/* When wines list is hidden (default), map takes full space */
.map-wrapper {
    flex: 1;
    width: 100%;
    min-height: 500px; /* Ensure map wrapper has minimum height */
    display: flex !important; /* Always visible by default */
}

/* Hide wines list by default - shown only when region is selected */
.wines-list-container {
    display: none !important;
    flex: 1;
    width: 100%;
    position: relative;
    height: 100%;
}

/* Desktop wines list - hidden by default, shown when container is visible (solo >= 1024px) */
@media (min-width: 1024px) {
    .wines-list-header,
    .wines-grid-container {
        display: none;
    }

    /* Show wines list header and grid when wines list container is visible */
    .wines-list-container[style*="display: flex"] .wines-list-header,
    .wines-list-container[style*="display: flex"] .wines-grid-container,
    .wines-list-container[style*="display: block"] .wines-list-header,
    .wines-list-container[style*="display: block"] .wines-grid-container {
        display: flex;
    }

    .wines-list-container[style*="display: flex"] .wines-grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
    }
}

/* When wines list is shown, hide map */
.wines-list-container[style*="display: flex"] ~ .map-wrapper,
.wines-list-container[style*="display: block"] ~ .map-wrapper,
.wines-list-container[style*="display: flex"] + .map-wrapper,
.wines-list-container[style*="display: block"] + .map-wrapper {
    display: none !important;
}

/* Ensure wines list container takes full space when visible */
.wines-list-container[style*="display: flex"],
.wines-list-container[style*="display: block"] {
    flex: 1 !important;
    width: 100% !important;
    height: 100% !important;
    position: relative !important;
}

/* ==================== REGIONS PANEL ==================== */
.regions-panel {
    width: 0;
    /* Glassmorphism effect */
    background: rgba(10, 10, 10, 0.6);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border-right: 1px solid rgba(212, 175, 55, 0.2);
    box-shadow: 4px 0 24px 0 rgba(0, 0, 0, 0.4);
    overflow-y: auto;
    flex-shrink: 0;
    transition: width 0.3s ease;
    display: flex;
    flex-direction: column;
    position: relative;
}

.regions-panel.active {
    width: 300px;
}

.regions-panel-header {
    padding: 2rem 1.5rem;
    border-bottom: 1px solid rgba(212, 175, 55, 0.15);
    flex-shrink: 0;
}

.regions-panel-title {
    font-family: var(--font-heading);
    font-size: 1rem;
    font-weight: 700;
    color: var(--gold);
    letter-spacing: 1.5px;
    text-transform: uppercase;
    margin-bottom: 0.5rem;
    /* Ombra per leggibilità su sfondo glassmorphism */
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5);
}

.regions-panel-subtitle {
    font-family: var(--font-body);
    font-size: 0.85rem;
    color: rgba(245, 245, 240, 0.6);
    letter-spacing: 0.5px;
}

.regions-list {
    flex: 1;
    overflow-y: auto;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.regions-list::-webkit-scrollbar,
.wines-list::-webkit-scrollbar {
    width: 6px;
}

.regions-list::-webkit-scrollbar-track,
.wines-list::-webkit-scrollbar-track {
    background: transparent;
}

.regions-list::-webkit-scrollbar-thumb,
.wines-list::-webkit-scrollbar-thumb {
    background: rgba(212, 175, 55, 0.3);
    border-radius: 3px;
}

.regions-list::-webkit-scrollbar-thumb:hover,
.wines-list::-webkit-scrollbar-thumb:hover {
    background: rgba(212, 175, 55, 0.5);
}

.region-item {
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
    border: none;
    border-radius: 12px;
    padding: 1.25rem 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.region-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
    transition: left 0.5s ease;
    pointer-events: none;
}

.region-item:hover::before {
    left: 100%;
}

.region-item:hover {
    transform: translateX(5px);
    box-shadow: 0 6px 20px rgba(212, 175, 55, 0.25);
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%);
}

.region-item.active {
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.1) 100%);
    box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
}

.region-item.dimmed {
    opacity: 0.4;
    pointer-events: none;
    cursor: not-allowed;
}

.region-item.dimmed .region-item-name {
    color: rgba(212, 175, 55, 0.4);
}

.region-item.dimmed .region-item-count {
    color: rgba(245, 245, 240, 0.3);
}

.region-item.dimmed:hover {
    transform: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
}

.region-item-name {
    font-family: var(--font-heading);
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--gold);
    letter-spacing: 0.8px;
    margin-bottom: 0.4rem;
}

.region-item-count {
    font-size: 0.75rem;
    color: rgba(245, 245, 240, 0.7);
    letter-spacing: 0.5px;
}

/* ==================== WINES PANEL ==================== */
.wines-panel {
    width: 0;
    /* Glassmorphism effect */
    background: rgba(10, 10, 10, 0.6);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border-left: 1px solid rgba(212, 175, 55, 0.2);
    box-shadow: -4px 0 24px 0 rgba(0, 0, 0, 0.4);
    overflow-y: auto;
    flex-shrink: 0;
    transition: width 0.3s ease;
    display: flex;
    flex-direction: column;
    position: relative;
}

.wines-panel.active {
    width: 340px;
}

.wines-panel-header {
    padding: 2rem 1.5rem;
    border-bottom: 1px solid rgba(212, 175, 55, 0.15);
    flex-shrink: 0;
}

.wines-panel-title {
    font-family: var(--font-heading);
    font-size: 1rem;
    font-weight: 700;
    color: var(--gold);
    letter-spacing: 1.5px;
    text-transform: uppercase;
    margin-bottom: 0.5rem;
    /* Ombra per leggibilità su sfondo glassmorphism */
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5);
}

.wines-panel-subtitle {
    font-family: var(--font-body);
    font-size: 0.85rem;
    color: rgba(245, 245, 240, 0.6);
    letter-spacing: 0.5px;
}

.wines-list {
    flex: 1;
    overflow-y: auto;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.wine-item {
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
    border: none;
    border-radius: 12px;
    padding: 1.25rem 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.wine-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
    transition: left 0.5s ease;
}

.wine-item:hover::before {
    left: 100%;
}

.wine-item:hover {
    transform: translateX(-5px);
    box-shadow: 0 6px 20px rgba(212, 175, 55, 0.25);
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%);
}

.wine-item-name {
    font-family: var(--font-heading);
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--gold);
    letter-spacing: 0.8px;
    margin-bottom: 0.4rem;
    line-height: 1.3;
}

.wine-item-producer {
    font-size: 0.75rem;
    color: rgba(245, 245, 240, 0.8);
    margin-bottom: 0.3rem;
    font-style: italic;
}

.wine-item-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 0.5rem;
}

.wine-item-price {
    font-size: 0.85rem;
    color: var(--gold);
    font-weight: 600;
}

.wine-item-vintage {
    font-size: 0.7rem;
    color: rgba(245, 245, 240, 0.6);
}

/* ==================== SIDEBAR ==================== */
.sidebar {
    width: 240px;
    /* Glassmorphism effect */
    background: rgba(10, 10, 10, 0.6);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border-right: 1px solid rgba(212, 175, 55, 0.2);
    box-shadow: 4px 0 24px 0 rgba(0, 0, 0, 0.4);
    padding: 2rem 1.5rem;
    overflow-y: auto;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    position: relative;
}

.sidebar::-webkit-scrollbar {
    width: 6px;
}

.sidebar::-webkit-scrollbar-track {
    background: transparent;
}

.sidebar::-webkit-scrollbar-thumb {
    background: rgba(212, 175, 55, 0.3);
    border-radius: 3px;
}

.sidebar::-webkit-scrollbar-thumb:hover {
    background: rgba(212, 175, 55, 0.5);
}

.sidebar-title {
    font-family: var(--font-heading);
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--gold);
    letter-spacing: 1.8px;
    text-transform: uppercase;
    text-align: center;
    padding-bottom: 0.875rem;
    border-bottom: 1px solid rgba(212, 175, 55, 0.2);
    margin-bottom: 0.25rem;
}

.wine-categories {
    display: flex;
    flex-direction: column;
    gap: 0.875rem;
}

.wine-card-sidebar {
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
    border: none;
    border-radius: 12px;
    padding: 1.25rem 1rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);
    position: relative;
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    display: block;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.wine-card-sidebar::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
    transition: left 0.5s ease;
}

.wine-card-sidebar:hover::before {
    left: 100%;
}

.wine-card-sidebar:hover {
    transform: translateX(8px) scale(1.02);
    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%);
}

.wine-card-sidebar.active {
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.1) 100%);
    box-shadow: 0 4px 20px rgba(212, 175, 55, 0.4);
}

.wine-icon-sidebar {
    width: 45px;
    height: 45px;
    margin: 0 auto 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

.wine-card-info-btn {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    background: rgba(212, 175, 55, 0.15);
    border: 1px solid rgba(212, 175, 55, 0.4);
    border-radius: 50%;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: var(--gold, #D4AF37);
    font-size: 0.9rem;
    z-index: 10;
    padding: 0;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}

.wine-card-info-btn:hover {
    background: rgba(212, 175, 55, 0.3);
    border-color: var(--gold, #D4AF37);
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.4);
}

.wine-card-info-btn:active {
    transform: scale(0.95);
}

.wine-card-info-btn i {
    font-size: 0.85rem;
}

.wine-icon-sidebar img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    filter: drop-shadow(0 0 6px rgba(212, 175, 55, 0.3));
    transition: all 0.3s ease;
}

.wine-card-sidebar:hover .wine-icon-sidebar img {
    transform: scale(1.05);
    filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.4));
}

.wine-card-title {
    font-family: var(--font-heading);
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--gold);
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-bottom: 0.35rem;
    line-height: 1.25;
}

.wine-card-subtitle {
    font-family: var(--font-body);
    font-size: 0.8rem;
    color: rgba(245, 245, 240, 0.7);
    letter-spacing: 0.4px;
    margin-bottom: 0.5rem;
    line-height: 1.25;
}

.wine-card-count {
    font-size: 0.7rem;
    color: var(--gold);
    font-weight: 600;
    letter-spacing: 0.8px;
    text-transform: uppercase;
}

/* ==================== SEARCH BAR ==================== */
@keyframes glow-border-search {
    0%, 100% {
        border-color: rgba(212, 175, 55, 0.3);
        box-shadow: 0 0 0 0 rgba(248, 248, 240, 0),
                    0 0 0 0 rgba(248, 248, 240, 0);
    }
    50% {
        border-color: rgba(248, 248, 240, 0.8);
        box-shadow: 0 0 10px 2px rgba(248, 248, 240, 0.8),
                    0 0 20px 4px rgba(248, 248, 240, 0.4);
    }
}

.search-bar-container {
    /* Glassmorphism effect */
    background: rgba(10, 10, 10, 0.55);
    backdrop-filter: blur(15px) saturate(180%);
    -webkit-backdrop-filter: blur(15px) saturate(180%);
    border-bottom: 1px solid rgba(212, 175, 55, 0.15);
    box-shadow: 0 4px 24px 0 rgba(0, 0, 0, 0.3);
    padding: var(--space-md) var(--space-lg);
    flex-shrink: 0;
    z-index: 50;
    position: relative;
}

.search-wrapper {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    gap: 0.875rem;
    align-items: center;
    flex-wrap: wrap;
}

.search-input-wrapper {
    flex: 1;
    min-width: 320px;
    position: relative;
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.5rem;
}

.search-input-wrapper > input {
    flex: 1;
}

.search-input {
    width: 100%;
    padding: 0.875rem 1.375rem;
    background: rgba(26, 26, 26, 0.8);
    border: 1.5px solid rgba(212, 175, 55, 0.3);
    border-radius: 8px;
    color: var(--light);
    font-family: var(--font-body);
    font-size: 0.95rem;
    transition: background 0.3s ease;
    letter-spacing: 0.4px;
    animation: glow-border-search 7s ease-in-out 1;
}

.search-input:focus {
    outline: none;
    background: rgba(26, 26, 26, 0.95);
}

.search-input:not(:placeholder-shown) {
    background: rgba(26, 26, 26, 0.9);
}

.search-input:not(:placeholder-shown):focus {
    background: rgba(26, 26, 26, 0.95);
}

.search-input.search-active {
    background: rgba(26, 26, 26, 0.95);
}

.search-input.search-active:focus {
    background: rgba(26, 26, 26, 0.95);
}

.search-input::placeholder {
    color: rgba(245, 245, 240, 0.5);
}

/* Autocomplete Dropdown Styles */
.search-autocomplete-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: 0.5rem;
    background: linear-gradient(180deg, rgba(26, 26, 26, 0.98) 0%, rgba(10, 10, 10, 0.98) 100%);
    border: 1.5px solid rgba(212, 175, 55, 0.3);
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5),
                0 0 20px rgba(212, 175, 55, 0.1);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    z-index: 1000;
    max-height: 400px;
    overflow-y: auto;
    overflow-x: hidden;
}

.autocomplete-suggestions {
    padding: 0.5rem 0;
}

.autocomplete-suggestion {
    padding: 0.875rem 1.25rem;
    cursor: pointer;
    transition: all 0.2s ease;
    border-bottom: 1px solid rgba(212, 175, 55, 0.1);
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.autocomplete-suggestion:last-child {
    border-bottom: none;
}

.autocomplete-suggestion:hover,
.autocomplete-suggestion.selected {
    background: rgba(212, 175, 55, 0.15);
    border-left: 3px solid var(--gold);
    padding-left: calc(1.25rem - 3px);
}

.autocomplete-suggestion-icon {
    color: var(--gold);
    font-size: 1rem;
    width: 20px;
    text-align: center;
    flex-shrink: 0;
}

.autocomplete-suggestion-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.autocomplete-suggestion-main {
    color: var(--light);
    font-family: var(--font-body);
    font-size: 1rem;
    font-weight: 500;
    letter-spacing: 0.3px;
}

.autocomplete-suggestion-sub {
    color: rgba(245, 245, 240, 0.6);
    font-family: var(--font-body);
    font-size: 0.85rem;
    letter-spacing: 0.2px;
}

.autocomplete-suggestion-count {
    color: var(--gold);
    font-family: var(--font-body);
    font-size: 0.9rem;
    font-weight: 600;
    padding: 0.25rem 0.5rem;
    background: rgba(212, 175, 55, 0.1);
    border-radius: 4px;
    flex-shrink: 0;
}

.autocomplete-suggestions-empty {
    padding: 2rem 1.25rem;
    text-align: center;
    color: rgba(245, 245, 240, 0.5);
    font-family: var(--font-body);
    font-size: 0.95rem;
}

/* Mobile autocomplete */
.mobile-autocomplete {
    position: absolute;
    top: calc(100% + 0.5rem);
    left: 0;
    right: 0;
    bottom: auto;
    max-height: 60vh;
    border-radius: 12px;
    margin-top: 0;
    border: 1.5px solid rgba(212, 175, 55, 0.3);
    z-index: 200;
    overflow-y: auto;
}

/* Scrollbar for autocomplete */
.search-autocomplete-dropdown::-webkit-scrollbar {
    width: 6px;
}

.search-autocomplete-dropdown::-webkit-scrollbar-track {
    background: rgba(26, 26, 26, 0.5);
    border-radius: 3px;
}

.search-autocomplete-dropdown::-webkit-scrollbar-thumb {
    background: rgba(212, 175, 55, 0.4);
    border-radius: 3px;
}

.search-autocomplete-dropdown::-webkit-scrollbar-thumb:hover {
    background: rgba(212, 175, 55, 0.6);
}

/* Search Results Table Styles */
.wines-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
    background: rgba(26, 26, 26, 0.5);
    border-radius: 8px;
    overflow: hidden;
}

.wines-table thead {
    background: rgba(212, 175, 55, 0.1);
}

.wines-table th {
    padding: 1rem 1.25rem;
    text-align: left;
    color: var(--gold);
    font-family: var(--font-body);
    font-size: 1.1rem;
    font-weight: 600;
    letter-spacing: 0.5px;
    border-bottom: 2px solid rgba(212, 175, 55, 0.2);
}

.wines-table tbody tr {
    border-bottom: 1px solid rgba(212, 175, 55, 0.1);
    transition: all 0.2s ease;
    cursor: pointer;
}

.wines-table tbody tr:hover {
    background: rgba(212, 175, 55, 0.1);
    transform: translateX(4px);
}

.wines-table tbody tr:last-child {
    border-bottom: none;
}

.wines-table td {
    padding: 1rem 1.25rem;
    color: var(--light);
    font-family: var(--font-body);
    font-size: 0.95rem;
    vertical-align: middle;
}

.wine-table-type {
    font-family: var(--font-body);
    font-size: 0.95rem;
    color: var(--gold);
    font-weight: 600;
    text-transform: capitalize;
}

.wine-table-name {
    font-family: var(--font-body);
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--light);
}

.wine-table-producer {
    color: rgba(245, 245, 240, 0.8);
}

.wine-table-region {
    color: rgba(245, 245, 240, 0.7);
    font-size: 0.9rem;
}

.wine-table-varietal {
    color: rgba(245, 245, 240, 0.7);
    font-size: 0.9rem;
}

.wine-table-price {
    color: var(--gold);
    font-family: var(--font-body);
    font-size: 1.1rem;
    font-weight: 600;
    text-align: right;
}

/* Mobile search results cards */
.mobile-wine-card {
    background: rgba(26, 26, 26, 0.6);
    border: 1px solid rgba(212, 175, 55, 0.2);
    border-radius: 12px;
    padding: 1.25rem;
    margin-bottom: 1rem;
    transition: all 0.3s ease;
    cursor: pointer;
}

.mobile-wine-card:active {
    transform: scale(0.98);
    background: rgba(212, 175, 55, 0.1);
}

.mobile-wine-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid rgba(212, 175, 55, 0.2);
}

.mobile-wine-card-name {
    font-family: var(--font-body);
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--light);
    margin: 0;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.mobile-wine-card-producer-inline {
    font-size: 1rem;
    color: rgba(212, 175, 55, 0.9);
    font-weight: 500;
    font-style: italic;
}

.mobile-wine-card-price {
    font-family: var(--font-body);
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--gold);
}

.mobile-wine-card-info {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.mobile-wine-card-info p {
    margin: 0;
    font-family: var(--font-body);
    font-size: 0.9rem;
    color: rgba(245, 245, 240, 0.8);
}

.mobile-wine-card-info strong {
    color: var(--gold);
    font-weight: 600;
}

.mobile-wine-card-subcategory {
    font-size: 0.7rem;
    color: var(--gold);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: var(--font-heading);
    margin-bottom: 0.5rem;
    padding: 0.2rem 0.4rem;
    background: rgba(212, 175, 55, 0.1);
    border: 1px solid rgba(212, 175, 55, 0.3);
    border-radius: 4px;
    display: inline-block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

.mobile-wine-card-info .mobile-wine-card-subcategory-wrapper {
    margin-top: 0.5rem;
    margin-bottom: 0.75rem;
    padding: 0.5rem;
    background: rgba(212, 175, 55, 0.05);
    border-left: 3px solid var(--gold);
    border-radius: 4px;
    transition: all 0.3s ease;
}

.mobile-wine-card-info .mobile-wine-card-subcategory-wrapper:hover {
    background: rgba(212, 175, 55, 0.1);
    border-left-color: var(--gold-light);
    transform: translateX(2px);
}

.mobile-wine-card-info .mobile-wine-card-subcategory {
    margin-top: 0;
    margin-bottom: 0.25rem;
    padding: 0;
    background: transparent;
    border: none;
    display: block;
}

.mobile-wine-card-info .mobile-wine-card-subcategory-desc {
    font-size: 0.65rem;
    color: rgba(245, 245, 240, 0.75);
    font-style: italic;
    font-family: var(--font-body);
    line-height: 1.3;
    margin-top: 0.2rem;
}

.active-filters-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.875rem;
    background: rgba(212, 175, 55, 0.15);
    border: 1px solid rgba(212, 175, 55, 0.4);
    border-radius: 6px;
    color: var(--gold);
    font-family: var(--font-body);
    font-size: 0.85rem;
    letter-spacing: 0.3px;
    white-space: nowrap;
    flex-shrink: 0;
    animation: fadeIn 0.3s ease;
}

.active-filters-badge::before {
    content: '🔍';
    font-size: 0.9rem;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateX(-10px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.btn-filter {
    padding: 0.875rem 1.25rem;
    background: transparent;
    border: 1.5px solid var(--gold);
    border-radius: 8px;
    color: var(--gold);
    font-family: var(--font-body);
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    letter-spacing: 0.4px;
    white-space: nowrap;
    font-weight: 500;
}

.btn-filter:hover {
    background: rgba(212, 175, 55, 0.1);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(212, 175, 55, 0.2);
}

/* ==================== MAP CONTAINER ==================== */
.map-wrapper {
    flex: 1;
    position: relative;
    overflow: hidden;
    min-height: 500px; /* Ensure map wrapper has minimum height */
    transition: opacity 0.3s ease, visibility 0.3s ease;
    display: flex !important; /* Always visible by default */
}

.map-wrapper.hidden {
    display: none;
}

#map {
    width: 100%;
    height: 100%;
    min-height: 500px; /* Ensure map has minimum height */
    z-index: 1;
    background: #0A0A0A !important;
}

/* Day mode styles for #map in this section */
:root[data-theme="day"] #map {
    background: var(--bg-primary, #FDFBF7) !important;
}

/* ==================== WINES LIST CONTAINER ==================== */
.wines-list-container {
    flex: 1;
    /* display: none is set in base rules above - hidden by default */
    flex-direction: column;
    overflow: hidden;
    background: linear-gradient(180deg, rgba(26, 26, 26, 0.95) 0%, rgba(10, 10, 10, 0.98) 100%);
    position: relative;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
}

.wines-list-container > * {
    position: relative;
    z-index: 1;
}

.wines-list-header {
    /* Glassmorphism effect */
    background: rgba(10, 10, 10, 0.6);
    backdrop-filter: blur(15px) saturate(180%);
    -webkit-backdrop-filter: blur(15px) saturate(180%);
    border-bottom: 1px solid rgba(212, 175, 55, 0.2);
    box-shadow: 0 4px 24px 0 rgba(0, 0, 0, 0.3);
    padding: 2rem 2.5rem;
    display: flex;
    align-items: center;
    gap: 2rem;
    flex-shrink: 0;
    position: relative;
    z-index: 10;
}

.btn-back-to-map {
    padding: 0.75rem 1.25rem;
    background: transparent;
    border: 1.5px solid var(--gold);
    border-radius: 8px;
    color: var(--gold);
    font-family: var(--font-body);
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    letter-spacing: 0.4px;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    white-space: nowrap;
}

.btn-back-to-map:hover {
    background: rgba(212, 175, 55, 0.1);
    transform: translateX(-3px);
    box-shadow: 0 5px 15px rgba(212, 175, 55, 0.2);
}

.wines-list-title-section {
    flex: 1;
}

.wines-list-title {
    font-family: var(--font-heading);
    font-size: var(--fs-600, 1.953rem); /* 31px - grande, oro OK per WCAG AA */
    font-weight: 600;
    color: var(--text-accent-large); /* Oro per testo grande */
    letter-spacing: 2px;
    text-transform: uppercase;
    margin: 0 0 0.25rem 0;
    line-height: 1.2;
    /* Ombra per leggibilità su sfondo glassmorphism */
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5);
}

.wines-list-subtitle {
    font-family: var(--font-body);
    font-size: 0.9rem;
    color: rgba(245, 245, 240, 0.8); /* Aumentato contrasto per leggibilità */
    letter-spacing: 0.8px;
    margin: 0;
    line-height: 1.3;
    /* Ombra per leggibilità su sfondo glassmorphism */
    text-shadow: 0 1px 4px rgba(0, 0, 0, 0.7);
}

/* Wine type filter buttons */
.wines-list-filters {
    display: flex;
    gap: 0.75rem;
    align-items: center;
    flex-wrap: wrap;
}

.wine-type-filter-btn {
    padding: 0.5rem 1rem;
    background: rgba(26, 26, 26, 0.7);
    border: 1.5px solid rgba(212, 175, 55, 0.3);
    border-radius: 6px;
    color: rgba(245, 245, 240, 0.7);
    font-family: var(--font-body);
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    letter-spacing: 0.5px;
}

.wine-type-filter-btn:hover {
    background: rgba(212, 175, 55, 0.1);
    border-color: rgba(212, 175, 55, 0.5);
    color: var(--gold);
    transform: translateY(-2px);
}

.wine-type-filter-btn.active {
    background: rgba(212, 175, 55, 0.2);
    border-color: var(--gold);
    color: var(--gold);
    font-weight: 600;
}

/* Desktop wines grid container - desktop only (solo >= 1024px) */
@media (min-width: 1024px) {
    .wines-grid-container {
        flex: 1;
        overflow-y: auto;
        padding: 2.5rem;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
    }
}

/* ==================== WINES TABLE ==================== */
.wines-table {
    width: 100%;
    border-collapse: collapse;
    background: rgba(26, 26, 26, 0.6);
    backdrop-filter: blur(10px);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.wines-table thead {
    background: rgba(212, 175, 55, 0.15);
}

.wines-table th {
    padding: 1.25rem 1.5rem;
    text-align: left;
    font-family: var(--font-heading);
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--gold);
    letter-spacing: 0.5px;
    text-transform: uppercase;
    border-bottom: 2px solid rgba(212, 175, 55, 0.3);
}

.wines-table tbody tr {
    border-bottom: 1px solid rgba(212, 175, 55, 0.1);
    transition: all 0.3s ease;
    cursor: pointer;
}

.wines-table tbody tr:hover {
    background: rgba(212, 175, 55, 0.1);
    transform: translateX(5px);
}

.wines-table tbody tr:last-child {
    border-bottom: none;
}

.wines-table td {
    padding: 1.25rem 1.5rem;
    color: rgba(245, 245, 240, 0.9);
    font-family: var(--font-body);
    font-size: 1rem;
    vertical-align: middle;
}

.wine-table-name {
    font-weight: 600;
    color: var(--gold);
    font-size: 1.1rem;
}

.wine-table-producer {
    color: rgba(245, 245, 240, 0.8);
    font-style: italic;
}

.wine-table-denomination {
    color: rgba(245, 245, 240, 0.7);
    font-size: 0.95rem;
}

.wine-table-price {
    font-weight: 600;
    color: var(--gold);
    font-size: 1.1rem;
    text-align: right;
}

/* Responsive table styles */
@media (max-width: 1024px) {
    .wines-table {
        font-size: 0.9rem;
    }
    
    .wines-table th,
    .wines-table td {
        padding: 1rem;
    }
    
    .wine-table-name,
    .wine-table-price {
        font-size: 1rem;
    }
}

/* Desktop wines table responsive styles */
@media (max-width: 767px) {
    /* Desktop wines grid hidden on mobile - use mobile cards instead */
    .wines-grid-container {
        display: none !important;
    }
    
    .wines-table {
        font-size: 0.85rem;
        border-radius: 8px;
    }
    
    .wines-table th,
    .wines-table td {
        padding: 0.75rem 0.5rem;
    }
    
    .wine-table-name {
        font-size: 0.95rem;
    }
    
    .wine-table-producer,
    .wine-table-denomination {
        font-size: 0.85rem;
    }
    
    .wine-table-price {
        font-size: 0.95rem;
    }
}

.wines-grid-container::-webkit-scrollbar {
    width: 8px;
}

.wines-grid-container::-webkit-scrollbar-track {
    background: transparent;
}

.wines-grid-container::-webkit-scrollbar-thumb {
    background: rgba(212, 175, 55, 0.3);
    border-radius: 4px;
}

.wines-grid-container::-webkit-scrollbar-thumb:hover {
    background: rgba(212, 175, 55, 0.5);
}

.wine-grid-item {
    background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
    border: none;
    border-radius: 16px;
    padding: 2rem;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.wine-grid-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
    transition: left 0.5s ease;
}

.wine-grid-item:hover::before {
    left: 100%;
}

.wine-grid-item:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 12px 35px rgba(212, 175, 55, 0.3);
    background: linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%);
}

.wine-grid-item-name {
    font-family: var(--font-heading);
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--gold);
    letter-spacing: 1px;
    margin-bottom: 0.75rem;
    line-height: 1.3;
}

.wine-grid-item-producer {
    font-size: 0.9rem;
    color: rgba(245, 245, 240, 0.8);
    margin-bottom: 0.5rem;
    font-style: italic;
}

.wine-grid-item-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(212, 175, 55, 0.15);
}

.wine-grid-item-price {
    font-size: 1rem;
    color: var(--gold);
    font-weight: 600;
}

.wine-grid-item-vintage {
    font-size: 0.85rem;
    color: rgba(245, 245, 240, 0.6);
}

.leaflet-container {
    background: #0A0A0A !important;
}

/* Day mode styles for .leaflet-container in this section */
:root[data-theme="day"] .leaflet-container {
    background: var(--bg-primary, #FDFBF7) !important;
}

.leaflet-tile-pane {
    display: none !important;
}

.leaflet-pane {
    z-index: 1;
}

/* Effetto luminoso ancora più intenso al hover */
#map svg path.leaflet-interactive:hover,
#mobileMap svg path.leaflet-interactive:hover {
    filter: drop-shadow(0 0 8px rgba(212, 175, 55, 1)) 
            drop-shadow(0 0 16px rgba(212, 175, 55, 0.9)) 
            drop-shadow(0 0 24px rgba(212, 175, 55, 0.7))
            drop-shadow(0 0 32px rgba(212, 175, 55, 0.5))
            drop-shadow(0 0 40px rgba(212, 175, 55, 0.3));
}

@keyframes borderFlow {
    0% {
        filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.3));
    }
    50% {
        filter: drop-shadow(0 0 16px rgba(212, 175, 55, 0.6));
    }
    100% {
        filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.3));
    }
}

.map-animated {
    animation: borderFlow 0.8s ease-in-out;
}

.region-info {
    position: absolute;
    bottom: 1.75rem;
    left: 1.75rem;
    background: rgba(26, 26, 26, 0.75);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    padding: 1.5rem 1.75rem;
    padding-top: 2.5rem;
    border-radius: 16px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6),
                0 0 0 1px rgba(212, 175, 55, 0.1) inset;
    z-index: 1000;
    max-width: 420px;
    display: none;
    border: 1px solid rgba(212, 175, 55, 0.25);
    border-left: 4px solid var(--gold);
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.region-info.show {
    opacity: 1;
    transform: translateY(0);
}

.region-info-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: rgba(212, 175, 55, 0.15);
    border: 1px solid rgba(212, 175, 55, 0.3);
    color: var(--gold);
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 10;
    font-size: 0.875rem;
}

.region-info-close:hover {
    background: rgba(212, 175, 55, 0.25);
    border-color: rgba(212, 175, 55, 0.5);
    transform: scale(1.1);
}

.region-info-close:active {
    transform: scale(0.95);
}

.region-info h3 {
    font-family: var(--font-heading);
    color: var(--gold);
    margin-bottom: 1rem;
    font-size: 1.2rem;
    letter-spacing: 1px;
    text-transform: uppercase;
    line-height: 1.3;
}

.region-info p {
    margin-bottom: 0.75rem;
    font-size: 0.875rem;
    color: rgba(245, 245, 240, 0.85);
    line-height: 1.6;
}

.region-info p strong {
    color: var(--gold);
    font-weight: 600;
}

.region-fact {
    font-style: italic;
    color: rgba(245, 245, 240, 0.75) !important;
    font-size: 0.85rem !important;
    margin-top: 1rem !important;
    padding-top: 1rem;
    border-top: 1px solid rgba(212, 175, 55, 0.2);
}

.region-wine-facts {
    color: rgba(212, 175, 55, 0.9) !important;
    font-size: 0.85rem !important;
    font-weight: 500;
    margin-top: 0.75rem !important;
}

/* Responsive styles for region info panel */
@media (max-width: 767px) {
    .region-info {
        bottom: 1rem;
        left: 1rem;
        right: 1rem;
        max-width: none;
        padding: 1.25rem 1.5rem;
        padding-top: 2.25rem;
        border-radius: 12px;
    }

    .region-info-close {
        top: 0.75rem;
        right: 0.75rem;
        width: 28px;
        height: 28px;
        font-size: 0.75rem;
    }

    .region-info h3 {
        font-size: 1.1rem;
        margin-bottom: 0.875rem;
    }

    .region-info p {
        font-size: 0.8125rem;
        margin-bottom: 0.625rem;
    }
}

/* Region tooltip */
.region-tooltip {
    position: absolute;
    background: rgba(26, 26, 26, 0.95);
    backdrop-filter: blur(10px);
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(212, 175, 55, 0.3);
    z-index: 2000;
    display: none;
    border: 1px solid rgba(212, 175, 55, 0.6);
    pointer-events: none;
    font-family: var(--font-heading);
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--gold);
    letter-spacing: 0.8px;
    text-transform: uppercase;
    white-space: nowrap;
    animation: tooltipFadeIn 0.2s ease;
    transform: translateX(-50%);
    /* Effetto luminoso intenso per il testo */
    text-shadow: 0 0 10px rgba(212, 175, 55, 1),
                 0 0 20px rgba(212, 175, 55, 0.8),
                 0 0 30px rgba(212, 175, 55, 0.6),
                 0 2px 4px rgba(0, 0, 0, 0.9);
}

@keyframes tooltipFadeIn {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(-5px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* Sparkling Wine Guide Icon */
.sparkling-guide-icon {
    position: absolute;
    bottom: 1.75rem;
    right: 1.75rem;
    background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(10, 10, 10, 0.98));
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    padding: 0.875rem 1.25rem;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5),
                0 0 20px rgba(212, 175, 55, 0.2);
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    border: 1px solid rgba(212, 175, 55, 0.4);
    border-left: 4px solid var(--gold);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    animation: sparklingIconFadeIn 0.4s ease-out;
    cursor: pointer;
}

.sparkling-guide-icon i {
    color: var(--gold);
    font-size: 1.25rem;
    transition: transform 0.3s ease;
}

.sparkling-guide-text {
    font-family: var(--font-heading);
    color: var(--gold);
    font-size: 0.9rem;
    font-weight: 600;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    white-space: nowrap;
}

.sparkling-guide-icon:hover {
    background: linear-gradient(145deg, rgba(36, 36, 32, 0.98), rgba(20, 20, 18, 0.98));
    border-color: rgba(212, 175, 55, 0.6);
    box-shadow: 0 10px 32px rgba(0, 0, 0, 0.6),
                0 0 30px rgba(212, 175, 55, 0.3);
    transform: translateY(-2px);
}

.sparkling-guide-icon:hover i {
    transform: scale(1.1);
}

.sparkling-guide-icon:active {
    transform: translateY(0);
}

@keyframes sparklingIconFadeIn {
    from {
        opacity: 0;
        transform: translateY(10px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Mobile Sparkling Guide Icon */
.mobile-sparkling-guide-icon {
    bottom: 1rem;
    right: 1rem;
    padding: 0.75rem 1rem;
    font-size: 0.85rem;
    z-index: 1001;
}

.mobile-sparkling-guide-icon i {
    font-size: 1.1rem;
}

.mobile-sparkling-guide-icon .sparkling-guide-text {
    font-size: 0.8rem;
}

/* Sparkling Guide Icon inside wine card */
.mobile-wine-card-sparkling-icon {
    position: absolute;
    bottom: 0.75rem;
    right: 0.75rem;
    padding: 0.5rem 0.75rem;
    font-size: 0.75rem;
    z-index: 10;
    animation: sparklingIconFadeIn 0.4s ease-out;
}

.mobile-wine-card-sparkling-icon i {
    font-size: 1rem;
}

.mobile-wine-card-sparkling-icon .sparkling-guide-text {
    font-size: 0.7rem;
}

/* Day mode styles for Sparkling Guide Icon */
:root[data-theme="day"] .sparkling-guide-icon {
    background: linear-gradient(145deg, rgba(253, 251, 247, 0.98), rgba(248, 245, 238, 0.98));
    border-color: rgba(212, 175, 55, 0.5);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15),
                0 0 20px rgba(212, 175, 55, 0.15);
}

:root[data-theme="day"] .sparkling-guide-icon .sparkling-guide-text,
:root[data-theme="day"] .sparkling-guide-icon i {
    color: #8B6914;
}

:root[data-theme="day"] .sparkling-guide-icon:hover {
    background: linear-gradient(145deg, rgba(248, 245, 238, 0.98), rgba(243, 239, 228, 0.98));
    box-shadow: 0 10px 32px rgba(0, 0, 0, 0.2),
                0 0 30px rgba(212, 175, 55, 0.25);
}

/* ==================== RESPONSIVE ==================== */
@media (max-width: 1200px) {
    .sidebar {
        width: 200px;
        padding: 1.5rem 1rem;
    }
}

@media (max-width: 992px) {
    .content-wrapper {
        flex-direction: column;
    }

    .content-wrapper > div:last-child {
        display: flex;
        flex-direction: column;
        flex: 1;
        overflow: hidden;
    }

    .sidebar {
        order: 2;
        width: 100%;
        max-height: 160px;
        border-right: none;
        border-bottom: 1px solid rgba(212, 175, 55, 0.15);
        padding: 1rem 1.25rem;
    }

    .content-wrapper > div:last-child {
        order: 1;
    }

    .wine-categories {
        flex-direction: row;
        overflow-x: auto;
        gap: 0.8rem;
    }

    .wine-card-sidebar {
        flex: 0 0 auto;
        min-width: 130px;
        padding: 0.875rem 0.75rem;
    }

    .search-wrapper {
        flex-direction: column;
    }

    .search-input-wrapper {
        min-width: auto;
        width: 100%;
    }

    .btn-filter {
        width: 100%;
    }

    .map-wrapper {
        flex: 1;
        min-height: 0;
    }

    .regions-panel.active {
        width: 240px;
    }

    .wines-panel.active {
        width: 280px;
    }

    .wines-list-container {
        min-height: 0;
    }

    .wines-list-header {
        padding: 1rem 1.25rem;
        flex-wrap: wrap;
    }

    .btn-back-to-map {
        width: 100%;
        justify-content: center;
        margin-bottom: 0.5rem;
    }

    /* Desktop wines grid - hidden on mobile */
    .wines-grid-container {
        display: none !important;
    }
}

@media (max-width: 767px) {
    .top-nav {
        padding: 1rem 1.25rem;
        gap: 1rem;
        min-height: 70px;
    }

    .logo {
        width: 42px;
        height: 42px;
    }

    .nav-title {
        font-size: 1.15rem;
        letter-spacing: 2.5px;
        font-weight: 400;
    }

    .nav-subtitle {
        font-size: 0.8rem;
        margin-top: 0.2rem;
    }

    .search-bar-container {
        padding: 1rem 1.25rem;
    }

    .search-input {
        font-size: 0.9rem;
        padding: 0.8rem 1rem;
    }

    .btn-filter {
        padding: 0.8rem 1rem;
        font-size: 0.85rem;
    }

    /* Sidebar già nascosta su mobile tramite regola principale */
    .sidebar {
        display: none !important;
    }
    
    .wine-card-sidebar {
        display: none !important;
    }

    .region-info {
        bottom: 1rem;
        left: 1rem;
        padding: 1rem 1.125rem;
        max-width: 260px;
    }

    .region-info h3 {
        font-size: 1rem;
        margin-bottom: 0.75rem;
    }

    .region-info p {
        font-size: 0.8rem;
        margin-bottom: 0.4rem;
    }

    .wines-list-header {
        padding: 1rem;
        gap: 1rem;
    }

    .wines-list-title {
        font-size: 1.15rem;
    }

    .wines-list-subtitle {
        font-size: 0.8rem;
    }

    /* Desktop wines grid - hidden on mobile, use mobile cards */
    .wines-grid-container {
        display: none !important;
    }

    .wine-grid-item-name {
        font-size: 1rem;
    }

    .wine-grid-item-producer {
        font-size: 0.85rem;
    }
}

/* ==================== MOBILE STYLES ==================== */

/* Mobile Menu Button and Search Button */
.mobile-menu-btn,
.mobile-search-btn {
    display: none;
    background: none;
    border: none;
    color: var(--gold);
    font-size: 1.4rem;
    cursor: pointer;
    padding: 0.5rem;
    transition: transform 0.2s, color 0.2s, opacity 0.3s;
    flex-shrink: 0;
    position: relative;
    width: 44px;
    height: 44px;
    z-index: 100;
}

.mobile-menu-btn {
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 5px;
}

/* Burger Menu Lines */
.mobile-menu-btn .burger-line {
    display: block;
    width: 24px;
    height: 2px;
    background-color: var(--gold);
    border-radius: 2px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
}

/* Burger Menu Animation - When Menu is Open */
body.mobile-menu-open .mobile-menu-btn .burger-line:nth-child(1),
body:has(.mobile-side-menu.open) .mobile-menu-btn .burger-line:nth-child(1),
.mobile-side-menu.open ~ * .mobile-menu-btn .burger-line:nth-child(1) {
    transform: translateY(7px) rotate(45deg);
    background-color: var(--gold-light);
}

body.mobile-menu-open .mobile-menu-btn .burger-line:nth-child(2),
body:has(.mobile-side-menu.open) .mobile-menu-btn .burger-line:nth-child(2),
.mobile-side-menu.open ~ * .mobile-menu-btn .burger-line:nth-child(2) {
    opacity: 0;
    transform: scaleX(0);
}

body.mobile-menu-open .mobile-menu-btn .burger-line:nth-child(3),
body:has(.mobile-side-menu.open) .mobile-menu-btn .burger-line:nth-child(3),
.mobile-side-menu.open ~ * .mobile-menu-btn .burger-line:nth-child(3) {
    transform: translateY(-7px) rotate(-45deg);
    background-color: var(--gold-light);
}

/* Burger Menu Active State */
.mobile-menu-btn:active {
    transform: scale(0.9);
    opacity: 0.8;
}

.mobile-menu-btn:active .burger-line {
    background-color: var(--gold-light);
}

/* Burger Menu Opacity when menu is open */
body.mobile-menu-open .mobile-menu-btn,
body:has(.mobile-side-menu.open) .mobile-menu-btn,
.mobile-side-menu.open ~ * .mobile-menu-btn {
    opacity: 1;
    color: var(--gold-light);
    z-index: 9999 !important;
    pointer-events: all;
}

.mobile-search-btn:active {
    transform: scale(0.9);
    color: var(--gold-light);
}

/* Mobile Overlay */
.mobile-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--overlay-color, rgba(0, 0, 0, 0.7));
    z-index: 9997;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1), background 0.35s ease;
    backdrop-filter: blur(8px) saturate(150%);
    -webkit-backdrop-filter: blur(8px) saturate(150%);
}

.mobile-overlay.visible {
    opacity: 1;
    pointer-events: all;
    background: rgba(0, 0, 0, 0.75);
}

:root[data-theme="day"] .mobile-overlay {
    background: rgba(0, 0, 0, 0.5);
}

:root[data-theme="day"] .mobile-overlay.visible {
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(10px) saturate(150%);
    -webkit-backdrop-filter: blur(10px) saturate(150%);
}

/* Mobile Side Menu */
.mobile-side-menu {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 28%;
    max-width: 250px;
    background: var(--bg-secondary, linear-gradient(180deg, rgba(26, 26, 26, 0.98) 0%, rgba(10, 10, 10, 1) 100%));
    border-right: 2px solid var(--border-color, var(--gold));
    z-index: 95;
    transform: translateX(-100%);
    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), background 0.3s ease, border-color 0.3s ease;
    box-shadow: 5px 0 25px var(--shadow-color, rgba(212, 175, 55, 0.4));
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

.mobile-side-menu.open {
    /* Effetto vetro opaco con contrasto migliorato - testo leggibile ma permette di vedere le wine card sotto */
    background: linear-gradient(180deg, rgba(15, 15, 15, 0.85) 0%, rgba(5, 5, 5, 0.9) 100%);
    backdrop-filter: blur(40px) saturate(200%) brightness(0.7);
    -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(0.7);
    border-right: 1px solid rgba(212, 175, 55, 0.5);
    box-shadow: 5px 0 50px rgba(212, 175, 55, 0.3),
                0 0 100px rgba(0, 0, 0, 0.5),
                inset 0 0 80px rgba(212, 175, 55, 0.08),
                inset -1px 0 0 rgba(255, 255, 255, 0.1);
    z-index: 9998 !important;
}

/* Rendi le wine card opache quando il menu è aperto - effetto vetro opaco */
/* Quando l'overlay è visibile, le wine card diventano opache */
.mobile-overlay.visible ~ * .mobile-wine-card,
.mobile-overlay.visible ~ * .mobile-wine-card-grid,
.mobile-overlay.visible ~ * .mobile-wines-cards-grid .mobile-wine-card-grid {
    opacity: 0.4;
    transition: opacity 0.3s ease;
    filter: blur(2px);
}

/* Quando il menu è aperto, le wine card sono visibili ma opache */
body:has(.mobile-side-menu.open) .mobile-wine-card,
body:has(.mobile-side-menu.open) .mobile-wine-card-grid,
body:has(.mobile-side-menu.open) .mobile-wines-cards-grid .mobile-wine-card-grid {
    opacity: 0.5;
    transition: opacity 0.3s ease;
    filter: blur(1px);
}

/* Fallback per browser che non supportano :has() */
.mobile-side-menu.open ~ * .mobile-wine-card,
.mobile-side-menu.open ~ * .mobile-wine-card-grid {
    opacity: 0.5;
    transition: opacity 0.3s ease;
    filter: blur(1px);
}

:root[data-theme="night"] .mobile-side-menu {
    background: linear-gradient(180deg, rgba(26, 26, 26, 0.98) 0%, rgba(10, 10, 10, 1) 100%);
}

:root[data-theme="day"] .mobile-side-menu {
    background: var(--bg-primary);
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
}

:root[data-theme="day"] .mobile-side-menu.open {
    /* Effetto vetro opaco per day mode con contrasto migliorato - testo leggibile */
    background: rgba(250, 250, 245, 0.85);
    backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
    -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
    border-right: 1px solid rgba(212, 175, 55, 0.4);
    box-shadow: 5px 0 50px rgba(0, 0, 0, 0.2), 
                0 0 100px rgba(255, 255, 255, 0.3),
                inset 0 0 80px rgba(212, 175, 55, 0.05),
                inset -1px 0 0 rgba(0, 0, 0, 0.1);
}

.mobile-side-menu::-webkit-scrollbar {
    width: 4px;
}

.mobile-side-menu::-webkit-scrollbar-track {
    background: rgba(26, 26, 26, 0.5);
}

.mobile-side-menu::-webkit-scrollbar-thumb {
    background: rgba(212, 175, 55, 0.5);
    border-radius: 2px;
}

.mobile-side-menu.open {
    transform: translateX(0);
}

.mobile-menu-header {
    padding: 1.5rem 1.25rem;
    border-bottom: 2px solid rgba(212, 175, 55, 0.3);
    flex-shrink: 0;
    background: transparent;
    transition: background 0.3s ease, border-color 0.3s ease;
}

/* Effetto opaco uniforme per l'header quando il menu è aperto */
.mobile-side-menu.open .mobile-menu-header {
    background: linear-gradient(180deg, rgba(15, 15, 15, 0.85) 0%, rgba(5, 5, 5, 0.9) 100%);
    backdrop-filter: blur(40px) saturate(200%) brightness(0.7);
    -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(0.7);
    border-bottom: 1px solid rgba(212, 175, 55, 0.5);
    box-shadow: 0 2px 20px rgba(212, 175, 55, 0.15),
                inset 0 -1px 0 rgba(255, 255, 255, 0.05);
}

:root[data-theme="day"] .mobile-side-menu.open .mobile-menu-header {
    background: rgba(250, 250, 245, 0.85);
    backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
    -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
    border-bottom: 1px solid rgba(212, 175, 55, 0.4);
    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
}

.mobile-menu-close {
    background: none;
    border: none;
    color: var(--gold);
    font-size: 1rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
    padding: 0.5rem 0;
    transition: transform 0.2s, color 0.2s;
}

.mobile-menu-close:active {
    transform: translateX(-5px);
    color: var(--gold-light);
}

.mobile-menu-title {
    font-family: var(--font-heading);
    font-size: 1.4rem;
    color: var(--gold);
    letter-spacing: 2px;
    text-shadow: 0 0 10px rgba(212, 175, 55, 0.6), 0 2px 4px rgba(0, 0, 0, 0.5);
    margin: 0;
    font-weight: 600;
}

/* Search Bar in Menu */
.mobile-menu-search-container {
    padding: 1rem 1.25rem;
    border-bottom: 1px solid rgba(212, 175, 55, 0.2);
    flex-shrink: 0;
    background: transparent;
    transition: background 0.3s ease;
}

.mobile-side-menu.open .mobile-menu-search-container {
    background: linear-gradient(180deg, rgba(15, 15, 15, 0.85) 0%, rgba(5, 5, 5, 0.9) 100%);
    backdrop-filter: blur(40px) saturate(200%) brightness(0.7);
    -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(0.7);
}

:root[data-theme="day"] .mobile-side-menu.open .mobile-menu-search-container {
    background: rgba(250, 250, 245, 0.85);
    backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
    -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
}

.mobile-menu-search-wrapper {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.mobile-menu-search-input-wrapper {
    position: relative;
    width: 100%;
    cursor: pointer;
    transition: all 0.3s ease;
}

.mobile-menu-search-input-wrapper:active {
    transform: scale(0.98);
}

.mobile-menu-search-icon {
    position: absolute;
    left: 0.875rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--gold-dark);
    font-size: 0.95rem;
    z-index: 1;
    pointer-events: none;
}

.mobile-menu-search-input {
    width: 100%;
    padding: 0.75rem 0.875rem 0.75rem 2.5rem;
    background: rgba(26, 26, 26, 0.6);
    border: 1px solid rgba(212, 175, 55, 0.2);
    border-radius: 8px;
    color: rgba(245, 245, 240, 0.8);
    font-size: 0.9rem;
    font-family: var(--font-body);
    transition: all 0.3s;
    cursor: pointer;
}

.mobile-menu-search-input:focus {
    outline: none;
    background: rgba(26, 26, 26, 0.8);
    border-color: rgba(212, 175, 55, 0.4);
    box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
}

.mobile-menu-quick-search-buttons {
    display: flex;
    gap: 0.5rem;
    width: 100%;
}

.mobile-menu-quick-search-btn {
    flex: 1;
    padding: 0.5rem 0.75rem;
    background: rgba(212, 175, 55, 0.08);
    border: 1px solid rgba(212, 175, 55, 0.2);
    border-radius: 6px;
    color: var(--gold);
    font-size: 0.8rem;
    font-weight: 500;
    font-family: var(--font-body);
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
}

.mobile-menu-quick-search-btn:active {
    background: rgba(212, 175, 55, 0.15);
    border-color: rgba(212, 175, 55, 0.4);
    transform: scale(0.97);
}

.mobile-menu-quick-search-btn.active {
    background: rgba(212, 175, 55, 0.2);
    border-color: var(--gold);
    box-shadow: 0 0 8px rgba(212, 175, 55, 0.3);
}

/* Search Popup */
.mobile-menu-search-popup {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 300;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
}

.mobile-menu-search-popup-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.mobile-menu-search-popup-content {
    position: relative;
    width: 100%;
    max-width: 500px;
    background: linear-gradient(180deg, rgba(26, 26, 26, 0.98) 0%, rgba(10, 10, 10, 0.98) 100%);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 16px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(212, 175, 55, 0.3);
    border: 1px solid rgba(212, 175, 55, 0.3);
    animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    max-height: 90vh;
    display: flex;
    flex-direction: column;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.mobile-menu-search-popup-header {
    padding: 1.5rem 1.5rem 1rem;
    border-bottom: 1px solid rgba(212, 175, 55, 0.2);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.mobile-menu-search-popup-title {
    font-family: var(--font-heading);
    font-size: 1.3rem;
    color: var(--gold);
    letter-spacing: 1px;
    margin: 0;
    font-weight: 600;
}

.mobile-menu-search-popup-close {
    background: none;
    border: none;
    color: var(--gold);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0.5rem;
    transition: transform 0.2s, color 0.2s;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mobile-menu-search-popup-close:active {
    transform: scale(0.9);
    background: rgba(212, 175, 55, 0.1);
}

.mobile-menu-search-popup-body {
    padding: 1.5rem;
    overflow-y: auto;
    flex: 1;
    max-height: calc(90vh - 80px);
}

.mobile-menu-search-popup-input-wrapper {
    position: relative;
    width: 100%;
    margin-bottom: 1rem;
    z-index: 10;
}

/* Autocomplete in popup */
.mobile-menu-search-popup-autocomplete {
    position: absolute;
    top: calc(100% + 0.5rem);
    left: 0;
    right: 0;
    max-height: 300px;
    overflow-y: auto;
    z-index: 20;
}

.mobile-menu-search-popup-icon {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--gold-dark);
    font-size: 1rem;
    z-index: 1;
}

.mobile-menu-search-popup-input {
    width: 100%;
    padding: 1rem 1rem 1rem 2.75rem;
    background: rgba(26, 26, 26, 0.9);
    border: 1px solid rgba(212, 175, 55, 0.3);
    border-radius: 10px;
    color: rgba(245, 245, 240, 0.9);
    font-size: 1rem;
    font-family: var(--font-body);
    transition: all 0.3s;
}

.mobile-menu-search-popup-input:focus {
    outline: none;
    background: rgba(26, 26, 26, 1);
    border-color: var(--gold);
    box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
}

.mobile-menu-search-popup-quick-buttons {
    display: flex;
    gap: 0.75rem;
    width: 100%;
}

.mobile-menu-search-popup-quick-btn {
    flex: 1;
    padding: 0.75rem 1rem;
    background: rgba(212, 175, 55, 0.1);
    border: 1px solid rgba(212, 175, 55, 0.3);
    border-radius: 6px;
    color: var(--gold);
    font-size: 0.9rem;
    font-weight: 500;
    font-family: var(--font-body);
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
}

.mobile-menu-search-popup-quick-btn:active {
    background: rgba(212, 175, 55, 0.2);
    border-color: rgba(212, 175, 55, 0.5);
    transform: scale(0.97);
}

.mobile-menu-search-popup-quick-btn.active {
    background: rgba(212, 175, 55, 0.25);
    border-color: var(--gold);
    box-shadow: 0 0 12px rgba(212, 175, 55, 0.4);
}

.mobile-menu-categories {
    padding: 1rem 0;
    overflow-y: auto;
    flex: 1;
    display: flex;
    flex-direction: column;
    transition: padding-top 0.3s ease;
}

/* Scroll categories down when menu is open to show search bar */
.mobile-side-menu.open .mobile-menu-categories {
    padding-top: 0;
}

#mobileMenuSwitchContainer {
    margin-top: auto;
    padding-top: 1rem;
    flex-shrink: 0;
}

.mobile-menu-switch-container {
    border-top: 1px solid rgba(212, 175, 55, 0.2);
    margin-top: auto !important;
}

.mobile-menu-category {
    padding: 1.375rem 1.5rem;
    border-bottom: 1px solid var(--border-color, rgba(212, 175, 55, 0.2));
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    color: var(--text-primary, rgba(245, 245, 240, 0.95));
    font-size: 1.1rem;
    position: relative;
    overflow: hidden;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.mobile-menu-category::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, rgba(212, 175, 55, 0.25) 0%, transparent 100%);
    transition: left 0.3s ease;
}

.mobile-menu-category:active {
    background: linear-gradient(90deg, rgba(212, 175, 55, 0.15) 0%, transparent 100%);
    transform: translateX(8px);
    color: var(--gold-light);
}

.mobile-menu-category:active::before {
    left: 0;
}

.mobile-menu-category-name {
    font-weight: 500;
    color: var(--text-primary, rgba(245, 245, 240, 0.95));
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.mobile-menu-category-count {
    color: var(--gold-dark);
    font-size: 0.9rem;
    margin-right: 0.5rem;
}

/* Day/Night Mode Switch - Visibile su mobile e tablet */
.day-night-switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 26px;
    flex-shrink: 0;
    z-index: 1;
}

.day-night-switch-input {
    opacity: 0;
    width: 0;
    height: 0;
}

.day-night-switch-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(212, 175, 55, 0.3);
    transition: 0.3s;
    border-radius: 26px;
}

.day-night-switch-slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 3px;
    bottom: 3px;
    background-color: var(--gold);
    transition: 0.3s;
    border-radius: 50%;
}

.day-night-switch-input:checked + .day-night-switch-slider {
    background-color: var(--gold);
}

.day-night-switch-input:checked + .day-night-switch-slider:before {
    transform: translateX(24px);
    background-color: #FFFFFF;
}

/* Mobile Views Container */
.mobile-views-container {
    display: none;
    position: relative;
    flex: 1;
    overflow: hidden;
}

.mobile-view {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--black);
    padding: 1.5rem 1.25rem;
    padding-bottom: 2rem;
    transform: translateX(100%);
    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 5;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    -webkit-overflow-scrolling: touch;
}

.mobile-view::-webkit-scrollbar {
    width: 4px;
}

.mobile-view::-webkit-scrollbar-track {
    background: rgba(26, 26, 26, 0.5);
}

.mobile-view::-webkit-scrollbar-thumb {
    background: rgba(212, 175, 55, 0.5);
    border-radius: 2px;
}

.mobile-view::-webkit-scrollbar-thumb:hover {
    background: rgba(212, 175, 55, 0.7);
}

.mobile-view.mobile-view-active {
    transform: translateX(0);
    z-index: 10;
}

.mobile-view-header {
    margin-bottom: 1.5rem;
}

.mobile-back-btn {
    background: none;
    border: none;
    color: var(--gold);
    font-size: 1rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
    padding: 0.5rem 0;
    transition: all 0.3s;
}

.mobile-back-btn:active {
    transform: translateX(-8px);
    color: var(--gold-light);
}

.mobile-view-title {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    color: var(--gold);
    margin-bottom: 1.75rem;
    letter-spacing: 1.5px;
    text-shadow: 0 0 12px rgba(212, 175, 55, 0.4);
    font-weight: 600;
    line-height: 1.3;
}

/* Mobile Regions List */
.mobile-regions-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.mobile-region-card {
    background: rgba(15, 15, 15, 0.95);
    border: 1px solid rgba(212, 175, 55, 0.35);
    border-radius: 16px;
    padding: 1.5rem 1.25rem;
    margin-bottom: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(10px);
    position: relative;
    overflow: hidden;
}

.mobile-region-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
    transition: left 0.5s ease;
}

.mobile-region-card:active {
    transform: scale(0.98) translateY(-2px);
    box-shadow: 0 8px 24px rgba(212, 175, 55, 0.5);
    border-color: var(--gold);
    background: rgba(15, 15, 15, 1);
}

.mobile-region-card:active::before {
    left: 100%;
}

.mobile-region-name {
    font-size: 1.25rem;
    color: var(--gold);
    font-weight: 600;
    letter-spacing: 0.5px;
}

.mobile-region-count {
    font-size: 0.95rem;
    color: var(--gold-dark);
    margin-right: 0.75rem;
    font-weight: 500;
}

/* Mobile Wines View with Background */
.mobile-region-background {
    position: fixed;
    top: 70px; /* Account for fixed nav */
    left: 0;
    right: 0;
    bottom: 0;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0;
    transition: opacity 0.6s ease-in-out, top 0.3s ease;
    z-index: 1;
}

.mobile-region-background.search-bar-active {
    top: 140px; /* Account for nav + search bar */
}

.mobile-region-background.visible {
    opacity: 0.15;
}

.mobile-region-background::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, 
        rgba(0, 0, 0, 0.9) 0%, 
        rgba(0, 0, 0, 0.7) 30%,
        rgba(0, 0, 0, 0.7) 70%,
        rgba(0, 0, 0, 0.9) 100%);
}

.mobile-view-content {
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    flex: 1;
    overflow: hidden;
    min-height: 0;
}

/* Mobile Wines List */
.mobile-wines-list {
    list-style: none;
    padding: 1rem;
    margin: 0;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    flex: 1;
    min-height: 0;
    max-height: 100%;
}

.mobile-wines-list::-webkit-scrollbar {
    width: 4px;
}

.mobile-wines-list::-webkit-scrollbar-track {
    background: rgba(26, 26, 26, 0.5);
}

.mobile-wines-list::-webkit-scrollbar-thumb {
    background: rgba(212, 175, 55, 0.5);
    border-radius: 2px;
}

.mobile-wines-list::-webkit-scrollbar-thumb:hover {
    background: rgba(212, 175, 55, 0.7);
}

.mobile-wine-card {
    background: rgba(15, 15, 15, 0.98);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(212, 175, 55, 0.4);
    border-radius: 16px;
    padding: 1.5rem 1.25rem;
    margin-bottom: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.7);
    position: relative;
    overflow: hidden;
}

.mobile-wine-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.15), transparent);
    transition: left 0.5s ease;
}

.mobile-wine-card:active {
    transform: scale(0.98) translateY(-2px);
    box-shadow: 0 10px 28px rgba(212, 175, 55, 0.5);
    border-color: var(--gold-light);
    background: rgba(15, 15, 15, 1);
}

.mobile-wine-card:active::before {
    left: 100%;
}

.mobile-wine-info {
    flex: 1;
}

.mobile-wine-name {
    font-size: 1.3rem;
    color: var(--gold-light);
    font-weight: 700;
    margin-bottom: 0.5rem;
    text-shadow: 0 0 8px rgba(255, 215, 0, 0.3);
    line-height: 1.4;
    letter-spacing: 0.3px;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.mobile-wine-producer-inline {
    font-size: 1rem;
    color: rgba(212, 175, 55, 0.9);
    font-weight: 500;
    font-style: italic;
}

.mobile-wine-vintage {
    font-size: 0.9rem;
    color: rgba(245, 245, 240, 0.7);
    font-weight: 400;
    margin-top: 0.25rem;
}

.mobile-wine-producer {
    font-size: 1rem;
    color: rgba(212, 175, 55, 0.85);
    font-weight: 500;
    line-height: 1.5;
}

.mobile-wine-price {
    font-size: 1.5rem;
    color: var(--gold);
    font-weight: 700;
    margin: 0 0.75rem;
    text-shadow: 0 0 10px rgba(212, 175, 55, 0.4);
    white-space: nowrap;
}

/* Mobile Responsive Styles - Apple-like design */
@media (max-width: 767px) {
    :root {
        --mobile-nav-height: 70px;
        --mobile-wine-type-height: 124px;
        --mobile-search-height: 112px;
    }

    /* Show mobile buttons, hide desktop sidebar */
    .mobile-menu-btn {
        display: flex;
    }
    .mobile-search-btn {
        display: none !important;
        pointer-events: none;
        opacity: 0;
    }

    .sidebar {
        display: none;
    }

    .mobile-views-container {
        display: none !important; /* Hide menu-based views, show map instead */
    }

    .mobile-map-wines-container {
        display: flex !important; /* Show map container by default */
        flex-direction: column;
        flex: 1;
        overflow: hidden;
        min-height: 0;
        margin-top: calc(140px + 70px); /* Search bar height + wine type selector height */
    }
    
    /* Quando mobile-wines-cards-container è visibile, espandi fino ai pulsanti */
    .mobile-map-wines-container.wines-cards-expanded {
        margin-top: 0 !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        z-index: 50 !important;
        padding-top: calc(var(--mobile-nav-height) + var(--mobile-search-height)) !important; /* Nav + search bar (fino ai pulsanti) */
    }
    
    /* Nascondi wine type selector quando wines-cards-expanded è attivo */
    body:has(.mobile-map-wines-container.wines-cards-expanded) .mobile-wine-type-selector {
        display: none !important;
    }
    
    /* Assicura che mobile-wines-cards-header parta subito dopo i pulsanti */
    .mobile-map-wines-container.wines-cards-expanded .mobile-wines-cards-header {
        margin-top: 0 !important;
    }

    /* Hide desktop breadcrumb on mobile */
    .breadcrumb {
        display: none !important;
    }

    /* Hide desktop map wrapper on mobile - use mobile map instead */
    .main-content-desktop .map-wrapper {
        display: none;
    }

    .regions-panel,
    .wines-panel {
        display: none;
    }

    .main-content-desktop .wines-list-container {
        display: none;
    }
    
    /* Apple-like spacing improvements */
    .top-nav {
        padding: 1rem 1.25rem;
    }
    
    .mobile-search-bar-container {
        padding: 1rem 1.25rem;
    }
    
    /* Improved typography for mobile - Apple style */
    .nav-title {
        font-size: 1.25rem;
        letter-spacing: -0.02em;
        font-weight: 600;
    }
    
    .nav-subtitle {
        font-size: 0.8125rem;
        letter-spacing: -0.01em;
        opacity: 0.7;
    }
    
    /* Better touch targets - Apple recommends 44x44px */
    .mobile-menu-btn,
    .mobile-search-btn {
        min-width: 44px;
        min-height: 44px;
        padding: 0.75rem;
    }
    
    /* Improved search input - Apple style */
    .mobile-search-input {
        font-size: 1rem;
        padding: 0.875rem 1rem 0.875rem 2.75rem;
        border-radius: 12px;
        background: rgba(26, 26, 26, 0.8);
        border: 0.5px solid rgba(212, 175, 55, 0.2);
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .mobile-search-input:focus {
        background: rgba(26, 26, 26, 0.95);
        border-color: rgba(212, 175, 55, 0.4);
        outline: none;
    }
    
    /* Improved filter buttons - Apple style */
    .mobile-filter-btn {
        padding: 0.625rem 1rem;
        border-radius: 6px;
        font-size: 0.875rem;
        font-weight: 500;
        letter-spacing: -0.01em;
        min-height: 36px;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .mobile-filter-btn:active {
        transform: scale(0.97);
    }

    /* Fixed top nav for mobile */
    .top-nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        justify-content: space-between;
        z-index: 200;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        min-height: var(--mobile-nav-height);
        padding-top: constant(safe-area-inset-top); /* iOS 11.0-11.2 */
        padding-top: env(safe-area-inset-top); /* iOS 11.2+ */
    }

    .nav-title-section {
        flex: 1;
        text-align: center;
    }

    .logo {
        display: none;
    }

    /* Mobile Search Bar (positioned below nav) */
    .mobile-search-bar-container {
        position: fixed;
        top: calc(var(--mobile-nav-height) + constant(safe-area-inset-top)); /* iOS 11.0-11.2 */
        top: calc(var(--mobile-nav-height) + env(safe-area-inset-top)); /* iOS 11.2+ */
        left: 0;
        right: 0;
        z-index: 190;
        background: linear-gradient(180deg, rgba(26, 26, 26, 0.98) 0%, rgba(10, 10, 10, 0.98) 100%);
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        padding: 1rem 1.25rem;
        padding-left: calc(1.25rem + constant(safe-area-inset-left)); /* iOS 11.0-11.2 */
        padding-left: calc(1.25rem + env(safe-area-inset-left)); /* iOS 11.2+ */
        padding-right: calc(1.25rem + constant(safe-area-inset-right)); /* iOS 11.0-11.2 */
        padding-right: calc(1.25rem + env(safe-area-inset-right)); /* iOS 11.2+ */
        display: block; /* Always visible on mobile and tablet */
    }

    .mobile-search-bar-container.visible {
        display: block;
    }

    .mobile-search-wrapper {
        max-width: 100%;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .mobile-search-input-wrapper {
        position: relative;
        width: 100%;
    }

    .mobile-search-icon {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--gold-dark);
        font-size: 1rem;
        z-index: 1;
    }

    .mobile-search-input {
        width: 100%;
        padding: 0.875rem 1rem 0.875rem 2.75rem;
        background: rgba(26, 26, 26, 0.9);
        color: rgba(245, 245, 240, 0.9);
        font-size: 0.95rem;
        font-family: var(--font-body);
        transition: background 0.3s;
        animation: glow-border-search 7s ease-in-out 1;
    }

    .mobile-search-input:focus {
        outline: none;
        background: rgba(26, 26, 26, 1);
    }

    .mobile-filter-buttons {
        display: flex;
        gap: 0.75rem;
        width: 100%;
    }

    .mobile-filter-btn {
        flex: 1;
        padding: 0.75rem 1rem;
        background: rgba(212, 175, 55, 0.1);
        color: var(--gold);
        font-size: 0.9rem;
        font-weight: 500;
        font-family: var(--font-heading);
        cursor: pointer;
        transition: all 0.3s;
        text-align: center;
    }

    .mobile-filter-btn:active {
        background: rgba(212, 175, 55, 0.2);
        transform: scale(0.98);
    }

    /* Quick Search Buttons - Compact single line */
    .mobile-quick-search-buttons {
        display: flex;
        gap: 0.5rem;
        width: 100%;
        margin-top: 0.5rem;
        flex-wrap: nowrap;
        justify-content: center;
    }

    .mobile-quick-search-btn {
        flex: 0 1 auto;
        padding: 0.5rem 0.75rem;
        background: rgba(212, 175, 55, 0.08);
        border: 1px solid rgba(212, 175, 55, 0.2);
        border-radius: 6px;
        color: var(--gold);
        font-size: 0.75rem;
        font-weight: 500;
        font-family: var(--font-body);
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
        position: relative;
        overflow: hidden;
        white-space: nowrap;
        min-width: fit-content;
    }

    .mobile-quick-search-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
        transition: left 0.5s;
    }

    .mobile-quick-search-btn:hover::before,
    .mobile-quick-search-btn:active::before {
        left: 100%;
    }

    .mobile-quick-search-btn:active {
        background: rgba(212, 175, 55, 0.15);
        border-color: rgba(212, 175, 55, 0.4);
        transform: scale(0.97);
    }

    .mobile-quick-search-btn.active {
        background: rgba(212, 175, 55, 0.2);
        border-color: var(--gold);
        box-shadow: 0 0 12px rgba(212, 175, 55, 0.3);
    }

    .mobile-quick-search-btn span {
        position: relative;
        z-index: 1;
    }

    /* Hide desktop search bar on mobile */
    .search-bar-container {
        display: none;
    }

    /* Hide quick search buttons on desktop (1024px+) */
    @media (min-width: 1024px) {
    .mobile-quick-search-buttons {
        display: none !important;
    }
}

    /* Hide desktop main content on mobile */
    .main-content-desktop {
        display: none !important;
    }

    /* Mobile Wine Type Selector - Vertical Left Side Design */
    .mobile-wine-type-selector {
        position: fixed;
        /* Position on left side, centered vertically */
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        z-index: 180; /* Inferiore a mobile-search-bar-container (190) */
        background: linear-gradient(90deg, rgba(15, 15, 15, 0.98) 0%, rgba(20, 20, 20, 0.95) 100%);
        backdrop-filter: blur(40px) saturate(180%);
        -webkit-backdrop-filter: blur(40px) saturate(180%);
        box-shadow: 4px 0 16px rgba(0, 0, 0, 0.4), 
                    0 0 0 1px rgba(212, 175, 55, 0.2),
                    inset -1px 0 0 rgba(255, 255, 255, 0.05);
        border-right: 1px solid rgba(212, 175, 55, 0.25);
        padding: 0.75rem 0.5rem; /* Padding normale, senza padding-top extra */
        padding-left: calc(0.5rem + constant(safe-area-inset-left)); /* iOS 11.0-11.2 */
        padding-left: calc(0.5rem + env(safe-area-inset-left)); /* iOS 11.2+ */
        border-radius: 0 16px 16px 0;
        overflow-y: visible; /* Rimosso scroll, mostra tutti i chip */
        overflow-x: visible; /* Cambiato da hidden a visible per non tagliare i chip */
        -webkit-overflow-scrolling: auto; /* Disabilitato scroll */
        max-height: none; /* Rimossa limitazione altezza per mostrare tutti i chip */
        height: auto; /* Altezza automatica per contenere tutti i chip */
        width: 70px;
        min-width: 70px; /* Assicura larghezza minima */
        margin-top: 70px; /* Aggiunto margin-top di 70px */
    }

    .mobile-wine-types-scroll {
        display: flex;
        flex-direction: column;
        gap: 0.5rem; /* Ridotto da 0.75rem per risparmiare spazio */
        align-items: center;
        overflow-y: visible; /* Rimosso scroll, mostra tutti i chip */
        overflow-x: visible; /* Permette ai chip di essere completamente visibili */
        padding-right: 0.25rem;
        padding-top: 0; /* Assicura che il primo chip sia visibile */
        max-height: none; /* Rimossa limitazione per mostrare tutti i chip */
    }

    .mobile-wine-types-scroll::-webkit-scrollbar {
        width: 3px;
    }

    .mobile-wine-types-scroll::-webkit-scrollbar-track {
        background: rgba(26, 26, 26, 0.5);
    }

    .mobile-wine-types-scroll::-webkit-scrollbar-thumb {
        background: rgba(212, 175, 55, 0.5);
        border-radius: 2px;
    }

    @keyframes glow-border {
        0%, 100% {
            border-color: rgba(212, 175, 55, 0.2);
            box-shadow: 0 0 0 0 rgba(212, 175, 55, 0),
                        0 0 0 0 rgba(212, 175, 55, 0),
                        0 2px 8px rgba(0, 0, 0, 0.2);
        }
        50% {
            border-color: rgba(212, 175, 55, 0.8);
            box-shadow: 0 0 10px 2px rgba(212, 175, 55, 0.8),
                        0 0 20px 4px rgba(212, 175, 55, 0.4),
                        0 2px 8px rgba(0, 0, 0, 0.2);
        }
    }

    .mobile-wine-type-chip {
        flex: 0 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.25rem; /* Ridotto da 0.35rem */
        padding: 0.5rem 0.35rem; /* Ridotto padding laterale per più spazio testo */
        background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(15, 15, 15, 1));
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border: 1px solid rgba(212, 175, 55, 0.3);
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        width: 58px;
        min-height: 60px; /* Aumentato per permettere testo su più righe */
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.7),
                    0 2px 8px rgba(0, 0, 0, 0.4);
        box-sizing: border-box;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        will-change: transform;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    
    /* Assicura che il primo chip sia visibile */
    .mobile-wine-types-scroll .mobile-wine-type-chip:first-child {
        margin-top: 0;
        visibility: visible;
        opacity: 1;
    }
    
    .mobile-wine-type-chip::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.15), transparent);
        transition: left 0.5s ease;
        z-index: 2;
    }

    .mobile-wine-type-chip:active {
        transform: scale(0.96) translateY(-2px);
        box-shadow: 0 12px 32px rgba(212, 175, 55, 0.6),
                    0 6px 16px rgba(212, 175, 55, 0.4),
                    0 0 0 2px rgba(212, 175, 55, 0.2);
        border-color: rgba(212, 175, 55, 0.6);
    }

    .mobile-wine-type-chip:active::before {
        left: 100%;
    }

    .mobile-wine-type-chip:hover {
        box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4),
                    0 3px 10px rgba(212, 175, 55, 0.2);
        border-color: rgba(212, 175, 55, 0.4);
    }

    .mobile-wine-type-chip.active {
        transform: scale(0.95) translateY(-3px);
        box-shadow: 0 16px 40px rgba(212, 175, 55, 0.7),
                    0 8px 20px rgba(212, 175, 55, 0.5),
                    0 0 0 3px rgba(212, 175, 55, 0.3),
                    inset 0 0 30px rgba(212, 175, 55, 0.1);
        border-color: rgba(212, 175, 55, 0.8);
        background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(30, 25, 15, 1));
    }

    .mobile-wine-type-icon {
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .mobile-wine-type-icon img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 6px;
        filter: drop-shadow(0 0 4px rgba(212, 175, 55, 0.3));
    }

    .mobile-wine-type-chip.active .mobile-wine-type-icon img {
        filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.6));
    }

    .mobile-wine-type-name {
        font-size: 0.5rem; /* Leggermente ridotto per permettere più testo */
        color: var(--gold);
        font-weight: 600;
        text-align: center;
        letter-spacing: 0.2px;
        white-space: normal; /* Cambiato da nowrap a normal per permettere andare a capo */
        line-height: 1.2; /* Aumentato per migliore leggibilità su più righe */
        max-width: 100%;
        overflow: visible; /* Cambiato da hidden a visible */
        word-wrap: break-word; /* Permette di spezzare parole lunghe */
        hyphens: auto; /* Aggiunge trattini automatici se necessario */
    }

    .mobile-wine-type-count {
        font-size: 0.55rem;
        color: var(--gold-dark);
        font-weight: 400;
    }

    /* Mobile Wine Type Popup */
    .mobile-wine-type-popup {
        position: fixed;
        /* Position below search bar and filter buttons */
        top: calc(var(--mobile-nav-height) + 140px + constant(safe-area-inset-top)); /* iOS 11.0-11.2 */
        top: calc(var(--mobile-nav-height) + 140px + env(safe-area-inset-top)); /* iOS 11.2+ */
        left: 80px; /* Positioned right next to the vertical selector */
        width: 22%;
        max-width: 180px;
        z-index: 184;
        background: linear-gradient(180deg, rgba(26, 26, 26, 0.98) 0%, rgba(10, 10, 10, 1) 100%);
        backdrop-filter: blur(40px) saturate(200%) brightness(0.7);
        -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(0.7);
        box-shadow: 5px 0 50px rgba(212, 175, 55, 0.3), 
                    0 0 100px rgba(0, 0, 0, 0.5),
                    inset 0 0 80px rgba(212, 175, 55, 0.08),
                    inset -1px 0 0 rgba(255, 255, 255, 0.1);
        border-bottom: 0.5px solid rgba(212, 175, 55, 0.2);
        border-right: 2px solid var(--gold);
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
        height: auto;
        max-height: calc(100vh - var(--mobile-nav-height) - 140px - constant(safe-area-inset-top) - constant(safe-area-inset-bottom) - 20px); /* iOS 11.0-11.2 */
        max-height: calc(100vh - var(--mobile-nav-height) - 140px - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 20px); /* iOS 11.2+ */
        display: flex;
        flex-direction: column;
        transform: translateX(-100%);
        opacity: 0;
        transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), 
                    opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1),
                    background 0.3s ease,
                    border-color 0.3s ease;
        overflow: hidden;
    }
    
    .mobile-wine-type-popup-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.3);
        z-index: -1;
    }

    .mobile-wine-type-popup.show {
        transform: translateX(0);
        opacity: 1;
    }

    .mobile-wine-type-popup-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 10px;
        padding: 20px;
        padding-left: calc(20px + constant(safe-area-inset-left)); /* iOS 11.0-11.2 */
        padding-left: calc(20px + env(safe-area-inset-left)); /* iOS 11.2+ */
        padding-right: calc(20px + constant(safe-area-inset-right)); /* iOS 11.0-11.2 */
        padding-right: calc(20px + env(safe-area-inset-right)); /* iOS 11.2+ */
        border-bottom: 2px solid rgba(212, 175, 55, 0.3);
        background: linear-gradient(180deg, rgba(15, 15, 15, 0.85) 0%, rgba(5, 5, 5, 0.9) 100%);
        backdrop-filter: blur(40px) saturate(200%) brightness(0.7);
        -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(0.7);
        box-shadow: 0 2px 20px rgba(212, 175, 55, 0.15),
                    inset 0 -1px 0 rgba(255, 255, 255, 0.05);
        flex-shrink: 0;
        transition: background 0.3s ease, border-color 0.3s ease;
    }

    .mobile-wine-type-popup-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--gold);
        font-family: var(--font-heading);
        letter-spacing: 1px;
        text-shadow: 0 0 10px rgba(212, 175, 55, 0.6), 0 2px 4px rgba(0, 0, 0, 0.5);
        margin: 0;
    }

    .mobile-wine-type-popup-close {
        background: transparent;
        border: 1px solid rgba(212, 175, 55, 0.4);
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        color: var(--gold);
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        padding: 0;
        position: relative;
        overflow: hidden;
    }
    
    .mobile-wine-type-popup-close::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
        transition: left 0.5s ease;
    }

    .mobile-wine-type-popup-close:active {
        transform: scale(0.95);
        background: rgba(212, 175, 55, 0.15);
        border-color: var(--gold);
    }
    
    .mobile-wine-type-popup-close:active::before {
        left: 100%;
    }

    .mobile-wine-type-popup-close i {
        font-size: 0.875rem;
    }

    .mobile-wine-type-popup-tabs {
        display: flex;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        padding-left: calc(1rem + constant(safe-area-inset-left)); /* iOS 11.0-11.2 */
        padding-left: calc(1rem + env(safe-area-inset-left)); /* iOS 11.2+ */
        padding-right: calc(1rem + constant(safe-area-inset-right)); /* iOS 11.0-11.2 */
        padding-right: calc(1rem + env(safe-area-inset-right)); /* iOS 11.2+ */
        border-bottom: 1px solid rgba(212, 175, 55, 0.15);
        background: transparent;
    }

    .mobile-wine-type-popup-tab {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 0.625rem 0.875rem;
        background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
        border: 1.5px solid rgba(212, 175, 55, 0.3);
        border-radius: 10px;
        color: rgba(245, 245, 240, 0.7);
        font-size: 0.8125rem;
        font-weight: 500;
        font-family: var(--font-body);
        letter-spacing: 0.5px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }
    
    .mobile-wine-type-popup-tab::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
        transition: left 0.5s ease;
        pointer-events: none;
    }
    
    .mobile-wine-type-popup-tab:hover::before {
        left: 100%;
    }

    .mobile-wine-type-popup-tab i {
        display: none;
    }

    .mobile-wine-type-popup-tab.active {
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.1) 100%);
        border-color: var(--gold);
        color: var(--gold);
        font-weight: 600;
        box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
    }
    
    .mobile-wine-type-popup-tab:hover {
        background: rgba(212, 175, 55, 0.1);
        border-color: rgba(212, 175, 55, 0.5);
        color: var(--gold);
        transform: translateY(-2px);
    }

    .mobile-wine-type-popup-tab:active {
        transform: scale(0.98) translateY(0);
    }

    .mobile-wine-type-popup-content {
        flex: 1;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        padding: 1rem 1.25rem;
        padding-left: calc(1.25rem + constant(safe-area-inset-left)); /* iOS 11.0-11.2 */
        padding-left: calc(1.25rem + env(safe-area-inset-left)); /* iOS 11.2+ */
        padding-right: calc(1.25rem + constant(safe-area-inset-right)); /* iOS 11.0-11.2 */
        padding-right: calc(1.25rem + env(safe-area-inset-right)); /* iOS 11.2+ */
        position: relative;
        background: transparent;
    }
    
    .mobile-wine-type-popup-content::-webkit-scrollbar {
        width: 4px;
    }
    
    .mobile-wine-type-popup-content::-webkit-scrollbar-track {
        background: rgba(26, 26, 26, 0.5);
    }
    
    .mobile-wine-type-popup-content::-webkit-scrollbar-thumb {
        background: rgba(212, 175, 55, 0.5);
        border-radius: 2px;
    }
    
    .mobile-wine-type-popup-content::-webkit-scrollbar-thumb:hover {
        background: rgba(212, 175, 55, 0.7);
    }

    .mobile-wine-type-popup-section {
        display: none;
    }

    .mobile-wine-type-popup-section.active {
        display: block;
    }

    .mobile-wine-type-popup-regions {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .mobile-wine-type-popup-varietals {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .mobile-wine-type-popup-region {
        padding: 1rem 1.25rem;
        background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
        position: relative;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }
    
    .mobile-wine-type-popup-region::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
        transition: left 0.5s ease;
        pointer-events: none;
    }
    
    .mobile-wine-type-popup-region:hover::before {
        left: 100%;
    }

    .mobile-wine-type-popup-region:hover {
        transform: translateX(5px);
        box-shadow: 0 6px 20px rgba(212, 175, 55, 0.25);
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%);
    }
    
    .mobile-wine-type-popup-region:active {
        transform: translateX(5px) scale(0.98);
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.1) 100%);
        box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
    }

    .mobile-wine-type-popup-region-name {
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--gold);
        margin: 0;
        font-family: var(--font-heading);
        letter-spacing: 0.8px;
    }

    .mobile-wine-type-popup-region-count {
        font-size: 0.75rem;
        color: rgba(245, 245, 240, 0.7);
        margin-top: 0.4rem;
        letter-spacing: 0.5px;
    }

    .mobile-wine-type-popup-varietal {
        padding: 1rem 1.25rem;
        background: linear-gradient(135deg, rgba(26, 26, 26, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%);
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
        position: relative;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }
    
    .mobile-wine-type-popup-varietal::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
        transition: left 0.5s ease;
        pointer-events: none;
    }
    
    .mobile-wine-type-popup-varietal:hover::before {
        left: 100%;
    }
    
    .mobile-wine-type-popup-varietal:hover {
        transform: translateX(5px);
        box-shadow: 0 6px 20px rgba(212, 175, 55, 0.25);
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%);
    }

    .mobile-wine-type-popup-varietal:active {
        transform: translateX(5px) scale(0.98);
        background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.1) 100%);
        box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
    }

    .mobile-wine-type-popup-varietal-name {
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--gold);
        margin: 0;
        font-family: var(--font-heading);
        letter-spacing: 0.8px;
    }

    .mobile-wine-type-popup-varietal-count {
        font-size: 0.75rem;
        color: rgba(245, 245, 240, 0.7);
        margin-top: 0.4rem;
        letter-spacing: 0.5px;
    }

    /* Day mode styles for mobile wine type popup */
    :root[data-theme="day"] .mobile-wine-type-popup {
        background: rgba(250, 250, 245, 0.85);
        backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
        -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
        box-shadow: 5px 0 50px rgba(0, 0, 0, 0.2), 
                    0 0 100px rgba(255, 255, 255, 0.3),
                    inset 0 0 80px rgba(212, 175, 55, 0.05),
                    inset -1px 0 0 rgba(0, 0, 0, 0.1);
        border-bottom: 0.5px solid rgba(139, 105, 20, 0.3);
        border-right: 2px solid rgba(139, 105, 20, 0.3);
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
    }

    :root[data-theme="day"] .mobile-wine-type-popup-overlay {
        background: rgba(255, 255, 255, 0.3);
    }

    :root[data-theme="day"] .mobile-wine-type-popup-header {
        border-bottom: 1px solid rgba(139, 105, 20, 0.2);
        background: rgba(250, 250, 245, 0.85);
        backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
        -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(1.1);
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1),
                    inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    }

    :root[data-theme="day"] .mobile-wine-type-popup-title {
        color: var(--gold, #8B6914);
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    :root[data-theme="day"] .mobile-wine-type-popup-close {
        border: 1px solid rgba(139, 105, 20, 0.4);
        color: var(--gold, #8B6914);
    }

    :root[data-theme="day"] .mobile-wine-type-popup-close:active {
        background: rgba(139, 105, 20, 0.15);
        border-color: var(--gold, #8B6914);
    }

    :root[data-theme="day"] .mobile-wine-type-popup-tabs {
        border-bottom: 1px solid rgba(139, 105, 20, 0.15);
        background: transparent;
    }

    :root[data-theme="day"] .mobile-wine-type-popup-tab {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(248, 246, 240, 0.95) 100%);
        border: 1.5px solid rgba(139, 105, 20, 0.3);
        color: var(--text-secondary, #1A1A1A);
        box-shadow: 0 2px 8px rgba(139, 105, 20, 0.08);
    }
    
    :root[data-theme="day"] .mobile-wine-type-popup-tab:hover {
        background: rgba(139, 105, 20, 0.1);
        border-color: rgba(139, 105, 20, 0.5);
        color: var(--gold, #8B6914);
    }

    :root[data-theme="day"] .mobile-wine-type-popup-tab.active {
        background: linear-gradient(135deg, rgba(139, 105, 20, 0.2) 0%, rgba(139, 105, 20, 0.1) 100%);
        border-color: var(--gold, #8B6914);
        color: var(--gold, #8B6914);
        box-shadow: 0 4px 16px rgba(139, 105, 20, 0.2);
    }

    :root[data-theme="day"] .mobile-wine-type-popup-content {
        background: transparent;
    }
    
    :root[data-theme="day"] .mobile-wine-type-popup-content::-webkit-scrollbar-track {
        background: rgba(248, 246, 240, 0.5);
    }
    
    :root[data-theme="day"] .mobile-wine-type-popup-content::-webkit-scrollbar-thumb {
        background: rgba(139, 105, 20, 0.4);
    }
    
    :root[data-theme="day"] .mobile-wine-type-popup-content::-webkit-scrollbar-thumb:hover {
        background: rgba(139, 105, 20, 0.6);
    }

    :root[data-theme="day"] .mobile-wine-type-popup-region,
    :root[data-theme="day"] .mobile-wine-type-popup-varietal {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(248, 246, 240, 0.95) 100%) !important;
        border: none !important;
        box-shadow: 0 2px 8px rgba(139, 105, 20, 0.08) !important;
    }
    
    :root[data-theme="day"] .mobile-wine-type-popup-region:hover,
    :root[data-theme="day"] .mobile-wine-type-popup-varietal:hover {
        background: linear-gradient(135deg, rgba(139, 105, 20, 0.1) 0%, rgba(139, 105, 20, 0.05) 100%) !important;
        box-shadow: 0 6px 20px rgba(139, 105, 20, 0.15) !important;
    }

    :root[data-theme="day"] .mobile-wine-type-popup-region:active,
    :root[data-theme="day"] .mobile-wine-type-popup-varietal:active {
        background: linear-gradient(135deg, rgba(139, 105, 20, 0.2) 0%, rgba(139, 105, 20, 0.1) 100%) !important;
        box-shadow: 0 4px 16px rgba(139, 105, 20, 0.2) !important;
    }

    :root[data-theme="day"] .mobile-wine-type-popup-region-name,
    :root[data-theme="day"] .mobile-wine-type-popup-varietal-name {
        color: #8B6914 !important;
    }

    :root[data-theme="day"] .mobile-wine-type-popup-region-count,
    :root[data-theme="day"] .mobile-wine-type-popup-varietal-count {
        color: #5A4A2A !important;
        opacity: 0.8;
    }

    /* Mobile Region Labels */
    .mobile-region-label {
        background: transparent !important;
        border: none !important;
        box-shadow: none !important;
        z-index: 500 !important; /* Above map layers but below overlays */
        pointer-events: none !important; /* Don't interfere with map interactions */
    }

    .mobile-region-label-text {
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--gold, #D4AF37);
        font-family: var(--font-body);
        /* Effetto luminoso intenso per il testo */
        text-shadow: 0 0 10px rgba(212, 175, 55, 1),
                     0 0 20px rgba(212, 175, 55, 0.8),
                     0 0 30px rgba(212, 175, 55, 0.6),
                     0 2px 4px rgba(0, 0, 0, 0.9);
        white-space: nowrap;
        background: transparent !important;
        padding: 0;
        border-radius: 0;
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
    }

    :root[data-theme="day"] .mobile-region-label-text {
        color: var(--gold, #8B6914);
        text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8),
                     0 0 4px rgba(255, 255, 255, 0.5);
        background: transparent !important;
    }

    /* Mobile Map View - Apple-like design with smooth transitions */
    .mobile-map-view {
        flex: 1;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        min-height: 0;
        padding: 1rem 1.25rem;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Sposta la mappa a destra quando il popup è visibile mantenendo la stessa larghezza */
    body:has(.mobile-wine-type-popup.show) .mobile-map-wines-container {
        margin-left: 150px;
        width: calc(100% + 150px);
        transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1), width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Quando wines-cards-expanded è attivo, ignora le regole del popup */
    body:has(.mobile-wine-type-popup.show) .mobile-map-wines-container.wines-cards-expanded {
        margin-left: 0 !important;
        width: 100% !important;
        left: 0 !important;
        right: 0 !important;
    }
    
    body:has(.mobile-wine-type-popup.show) .mobile-map-view {
        margin-left: 0;
        transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Fallback per browser che non supportano :has() */
    .mobile-wine-type-popup.show ~ .content-wrapper .mobile-map-wines-container {
        margin-left: 150px;
        width: calc(100% + 150px);
        transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1), width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Quando wines-cards-expanded è attivo, ignora le regole del popup */
    .mobile-wine-type-popup.show ~ .content-wrapper .mobile-map-wines-container.wines-cards-expanded {
        margin-left: 0 !important;
        width: 100% !important;
        left: 0 !important;
        right: 0 !important;
    }
    
    .mobile-wine-type-popup.show ~ .content-wrapper .mobile-map-view {
        margin-left: 0;
        transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .mobile-map-wrapper {
        flex: 0 0 auto;
        position: relative;
        width: 100%;
        height: 91vh; /* Aumentato del 30% da 70vh */
        min-height: 715px; /* Aumentato del 30% da 550px */
        max-height: 91vh; /* Aumentato del 30% da 70vh */
        border-radius: 20px;
        overflow: visible;
        border: 0.5px solid transparent;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4),
                    0 2px 8px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.05);
        background: rgba(48, 46, 40, 0.4);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        max-height: none;
        padding-top: 50px;
        padding-bottom: 50px;
    }
    
    .mobile-map-wrapper:active {
        transform: scale(0.99);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
    }

    #mobileMap {
        width: 100%;
        height: 100%;
        min-height: 715px; /* Aumentato del 30% da 550px */
        background: #0A0A0A !important;
        overflow: visible !important;
        margin-left: 51px; /* Modificato margin-left a 51px */
        margin-top: 83px; /* Modificato margin-top a 83px */
    }

    /* Day mode styles for #mobileMap */
    :root[data-theme="day"] #mobileMap {
        background: var(--bg-primary, #FDFBF7) !important;
    }

    /* Leaflet map container adjustments for mobile */
    .mobile-map-wrapper .leaflet-container {
        background: #000000 !important; /* Black background like in photo */
        position: relative;
        bottom: 110px;
        left: 50%;
        transform: translateX(-50%);
    }

    /* Day mode styles */
    :root[data-theme="day"] .mobile-map-wrapper .leaflet-container {
        background: var(--bg-primary, #FDFBF7) !important;
    }

    .mobile-region-info {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(26, 26, 26, 0.75);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        padding: 1.5rem 1.75rem;
        padding-top: 2.5rem;
        border-radius: 16px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6),
                    0 0 0 1px rgba(212, 175, 55, 0.1) inset;
        z-index: 1000;
        max-width: 85%;
        max-height: 80vh;
        overflow-y: auto;
        border: 1px solid rgba(212, 175, 55, 0.25);
        border-left: 4px solid var(--gold);
        opacity: 0;
        transform: translate(-50%, -50%) translateY(20px);
        transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                    transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        display: none;
    }

    .mobile-region-info.show {
        opacity: 1;
        transform: translate(-50%, -50%) translateY(0);
    }

    .mobile-region-info-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(212, 175, 55, 0.15);
        border: 1px solid rgba(212, 175, 55, 0.3);
        color: var(--gold);
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 10;
        font-size: 0.875rem;
    }

    .mobile-region-info-close:hover {
        background: rgba(212, 175, 55, 0.25);
        border-color: rgba(212, 175, 55, 0.5);
        transform: scale(1.1);
    }

    .mobile-region-info-close:active {
        transform: scale(0.95);
    }

    .mobile-region-info h3 {
        color: var(--gold);
        margin-bottom: 1rem;
        font-size: 1.1rem;
        font-family: var(--font-heading);
        letter-spacing: 1px;
        text-transform: uppercase;
        line-height: 1.3;
    }

    .mobile-region-info p {
        color: rgba(245, 245, 240, 0.85);
        font-size: 0.875rem;
        margin-bottom: 0.75rem;
        line-height: 1.6;
    }

    .mobile-region-info p strong {
        color: var(--gold);
        font-weight: 600;
    }

    .mobile-region-fact {
        font-style: italic;
        color: rgba(245, 245, 240, 0.75) !important;
        font-size: 0.85rem !important;
        margin-top: 1rem !important;
        padding-top: 1rem;
        border-top: 1px solid rgba(212, 175, 55, 0.2);
    }

    .mobile-region-wine-facts {
        color: rgba(212, 175, 55, 0.9) !important;
        font-size: 0.85rem !important;
        font-weight: 500;
        margin-top: 0.75rem !important;
    }

    /* Mobile Wines Cards Container - smooth transitions */
    .mobile-wines-cards-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        background: linear-gradient(180deg, rgba(30, 30, 28, 0.85), rgba(12, 12, 12, 0.8));
        transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        /* Fix for iPhone Safari - min-height will be set by JavaScript */
        height: auto;
        min-height: 0;
        max-height: none;
        /* Assicura che il container prenda tutta l'altezza disponibile su iPhone */
        position: relative;
        -webkit-overflow-scrolling: touch;
        /* Previene il collasso del container */
        flex-shrink: 0;
    }
    
    /* Smooth transition when switching between map and cards */
    .mobile-map-wines-container {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .mobile-wines-cards-header {
        padding: 1.25rem 1rem;
        flex-shrink: 0;
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .mobile-wines-cards-header-top {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .mobile-wines-cards-type-filters {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }

    .mobile-wine-type-filter-btn {
        background: rgba(26, 26, 26, 0.6);
        border: 1px solid rgba(212, 175, 55, 0.3);
        border-radius: 6px;
        color: rgba(245, 245, 240, 0.8);
        padding: 0.5rem 1rem;
        font-family: var(--font-body);
        font-size: 0.85rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        white-space: nowrap;
        letter-spacing: 0.3px;
    }

    .mobile-wine-type-filter-btn:hover {
        background: rgba(212, 175, 55, 0.15);
        border-color: rgba(212, 175, 55, 0.5);
        color: var(--gold);
    }

    .mobile-wine-type-filter-btn.active {
        background: rgba(212, 175, 55, 0.25);
        border-color: var(--gold);
        color: var(--gold);
        font-weight: 600;
    }

    .mobile-wine-type-filter-btn:active {
        transform: scale(0.95);
    }

    /* Day theme styles for filter buttons */
    :root[data-theme="day"] .mobile-wine-type-filter-btn {
        background: rgba(245, 245, 240, 0.6);
        border-color: rgba(212, 175, 55, 0.3);
        color: rgba(26, 26, 26, 0.8);
    }

    :root[data-theme="day"] .mobile-wine-type-filter-btn:hover {
        background: rgba(212, 175, 55, 0.15);
        border-color: rgba(212, 175, 55, 0.5);
        color: var(--brand-red);
    }

    :root[data-theme="day"] .mobile-wine-type-filter-btn.active {
        background: rgba(212, 175, 55, 0.2);
        border-color: var(--gold);
        color: var(--brand-red);
    }

    .mobile-back-to-map-btn {
        background: none;
        border: none;
        color: var(--gold);
        font-size: 1rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 0.75rem;
        border-radius: 6px;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        font-family: var(--font-heading);
        font-weight: 500;
        flex-shrink: 0;
    }

    .mobile-back-to-map-btn:active {
        transform: translateX(-3px);
        color: var(--gold-light);
        background: rgba(212, 175, 55, 0.1);
    }
    
    .mobile-back-to-map-btn:hover {
        background: rgba(212, 175, 55, 0.05);
    }

    .mobile-wines-cards-title {
        font-family: var(--font-heading);
        font-size: 1.4rem;
        color: var(--gold);
        margin: 0;
        margin-top: 20px;
        letter-spacing: 1.5px;
        flex: 1;
        overflow: hidden;
        text-overflow: ellipsis;
        text-align: center;
        white-space: nowrap;
    }

    .mobile-wines-cards-grid {
        flex: 1;
        overflow-y: auto;
        overflow-x: hidden;
        padding: 1rem;
        padding-top: max(1rem, env(safe-area-inset-top, 0px));
        padding-bottom: max(1rem, env(safe-area-inset-bottom, 0px));
        -webkit-overflow-scrolling: touch;
        display: grid;
        grid-template-columns: 1fr;
        grid-auto-rows: minmax(min-content, auto);
        /* Fix per iOS Safari vecchi - usa margin invece di gap */
        gap: 1.5rem;
        min-height: 0;
        align-content: start;
        /* Fix per iPhone - assicura che le card non vengano tagliate */
        box-sizing: border-box;
        /* Previene sovrapposizione delle card */
        contain: layout;
        /* Watermark logo background */
        position: relative;
    }
    
    .mobile-wines-cards-grid::before {
        content: '';
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 400px;
        height: 400px;
        background-image: url('../image/gcaLogoWall.jpeg');
        background-position: center;
        background-repeat: no-repeat;
        background-size: contain;
        opacity: 0.04;
        pointer-events: none;
        z-index: 0;
    }
    

    .mobile-wines-cards-grid::-webkit-scrollbar {
        width: 4px;
    }

    .mobile-wines-cards-grid::-webkit-scrollbar-track {
        background: rgba(26, 26, 26, 0.5);
    }

    .mobile-wines-cards-grid::-webkit-scrollbar-thumb {
        background: rgba(212, 175, 55, 0.5);
        border-radius: 2px;
    }

    .mobile-wine-card-grid {
        background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(15, 15, 15, 1));
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        position: relative;
        z-index: 1;
        padding: 0.875rem 1rem; /* Reduced by half */
        display: flex;
        flex-direction: column;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.7),
                    0 2px 8px rgba(0, 0, 0, 0.4);
        border: 1px solid rgba(212, 175, 55, 0.3);
        border-radius: 12px;
        position: relative;
        overflow: hidden;
        width: 100%;
        min-height: min-content;
        height: auto;
        flex-shrink: 0;
        box-sizing: border-box;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        will-change: transform;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    
    /* Ripple effect container */
    .mobile-wine-card-grid::after {
        content: '';
        position: absolute;
        top: var(--ripple-y, 50%);
        left: var(--ripple-x, 50%);
        width: 0;
        height: 0;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(212, 175, 55, 0.4) 0%, rgba(212, 175, 55, 0.2) 50%, transparent 100%);
        transform: translate(-50%, -50%);
        transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
                    height 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
                    opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        opacity: 0;
        pointer-events: none;
        z-index: 1;
    }

    .mobile-wine-card-grid::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.15), transparent);
        transition: left 0.5s ease;
        z-index: 2;
    }

    .mobile-wine-card-grid:active {
        transform: scale(0.96) translateY(-2px);
        box-shadow: 0 12px 32px rgba(212, 175, 55, 0.6),
                    0 6px 16px rgba(212, 175, 55, 0.4),
                    0 0 0 2px rgba(212, 175, 55, 0.2);
        border-color: rgba(212, 175, 55, 0.6);
    }
    
    /* Selected state - triggered on click */
    .mobile-wine-card-grid.selected {
        transform: scale(0.95) translateY(-3px);
        box-shadow: 0 16px 40px rgba(212, 175, 55, 0.7),
                    0 8px 20px rgba(212, 175, 55, 0.5),
                    0 0 0 3px rgba(212, 175, 55, 0.3),
                    inset 0 0 30px rgba(212, 175, 55, 0.1);
        border-color: rgba(212, 175, 55, 0.8);
        background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(30, 25, 15, 1));
    }
    
    /* Ripple effect when selected */
    .mobile-wine-card-grid.selected::after {
        width: 400px;
        height: 400px;
        opacity: 0.5;
        transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
                    height 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
                    opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Better touch feedback */
    .mobile-wine-card-grid:focus {
        outline: 2px solid rgba(212, 175, 55, 0.3);
        outline-offset: 2px;
    }

    .mobile-wine-card-grid:active::before {
        left: 100%;
    }
    
    /* Pulse glow effect on hover/touch */
    .mobile-wine-card-grid:hover {
        box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4),
                    0 3px 10px rgba(212, 175, 55, 0.2);
        border-color: rgba(212, 175, 55, 0.4);
    }

    .mobile-wine-card-grid-single-row {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        width: 100%;
    }

    .mobile-wine-card-grid-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 1rem;
        margin-bottom: 0.5rem;
    }

    .mobile-wine-card-grid-name {
        font-size: 1rem;
        color: var(--gold-light);
        font-weight: 700;
        line-height: 1.2;
        letter-spacing: 0.2px;
        flex: 1;
        min-width: 0;
        font-family: var(--font-heading);
        word-wrap: break-word;
        overflow-wrap: break-word;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .mobile-wine-card-grid-producer-inline {
        font-size: 0.85rem;
        color: rgba(212, 175, 55, 0.9);
        font-weight: 500;
        font-style: italic;
        font-family: var(--font-body);
    }
    
    .mobile-wine-card-grid-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
        margin-top: 0.75rem;
    }
    
    .mobile-wine-card-grid-vintage {
        font-size: 0.8rem;
        color: rgba(245, 245, 240, 0.7);
        font-weight: 400;
        white-space: nowrap;
        min-width: 3rem;
        text-align: center;
    }

    .mobile-wine-card-grid-price {
        font-size: 1.1rem;
        color: var(--gold);
        font-weight: 700;
        text-shadow: 0 0 10px rgba(212, 175, 55, 0.4);
        white-space: nowrap;
        font-family: var(--font-heading);
        flex-shrink: 0;
    }

    .mobile-wine-card-grid-producer {
        font-size: 0.85rem;
        color: rgba(212, 175, 55, 0.9);
        font-weight: 500;
        font-style: italic;
        font-family: var(--font-body);
        flex: 1;
        min-width: 0;
        line-height: 1.2;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    /* Additional wine card info for better UX */
    .mobile-wine-card-grid-region {
        font-size: 0.9rem;
        color: rgba(245, 245, 240, 0.85);
        font-style: italic;
        margin-bottom: 0.5rem;
        line-height: 1.4;
    }
    
    .mobile-wine-card-grid-grape {
        font-size: 0.85rem;
        color: rgba(245, 245, 240, 0.75);
        margin-bottom: 0.75rem;
        line-height: 1.4;
    }
    
    .mobile-wine-card-grid-subcategory-wrapper,
    .mobile-wine-card-subcategory-wrapper {
        margin-top: 0.5rem;
        padding: 0.5rem;
        background: rgba(212, 175, 55, 0.05);
        border-left: 3px solid var(--gold);
        border-radius: 4px;
        transition: all 0.3s ease;
    }
    
    .mobile-wine-card-grid-subcategory-wrapper:hover,
    .mobile-wine-card-subcategory-wrapper:hover {
        background: rgba(212, 175, 55, 0.1);
        border-left-color: var(--gold-light);
        transform: translateX(2px);
    }
    
    .mobile-wine-card-grid-subcategory {
        font-size: 0.75rem;
        color: var(--gold);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-family: var(--font-heading);
        margin-bottom: 0.25rem;
        display: block;
    }
    
    .mobile-wine-card-grid-subcategory-desc {
        font-size: 0.7rem;
        color: rgba(245, 245, 240, 0.8);
        font-style: italic;
        font-family: var(--font-body);
        line-height: 1.4;
        margin-top: 0.25rem;
    }
    
    .mobile-wine-card-grid-subcategory-header {
        grid-column: 1 / -1;
        margin: 1.5rem 0 0.75rem 0;
        padding: 0.75rem 1rem;
        background: rgba(212, 175, 55, 0.08);
        border-left: 4px solid var(--gold);
        border-radius: 6px;
        transition: all 0.3s ease;
    }
    
    .mobile-wine-card-grid-subcategory-header:first-child {
        margin-top: 0;
    }
    
    .mobile-wine-card-grid-subcategory-header .mobile-wine-card-grid-subcategory {
        font-size: 0.85rem;
        margin-bottom: 0.35rem;
    }
    
    .mobile-wine-card-grid-subcategory-header .mobile-wine-card-grid-subcategory-desc {
        font-size: 0.75rem;
        margin-top: 0.35rem;
    }
    
    .mobile-wine-card-subcategory {
        font-size: 0.7rem;
        color: var(--gold);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-family: var(--font-heading);
        margin-bottom: 0.25rem;
        display: block;
    }
    
    .mobile-wine-card-subcategory-desc {
        font-size: 0.65rem;
        color: rgba(245, 245, 240, 0.75);
        font-style: italic;
        font-family: var(--font-body);
        line-height: 1.3;
        margin-top: 0.2rem;
    }

    /* Layout spacing adjustments - unified and optimized */
    .main-layout {
        padding-top: 0;
    }

    /* Adjust content wrapper to account for fixed nav and wine type selector */
    .content-wrapper {
        padding: 0;
        margin-top: calc(var(--mobile-nav-height) + var(--mobile-wine-type-height) + constant(safe-area-inset-top)); /* iOS 11.0-11.2 */
        margin-top: calc(var(--mobile-nav-height) + var(--mobile-wine-type-height) + env(safe-area-inset-top)); /* iOS 11.2+ */
        padding-bottom: constant(safe-area-inset-bottom); /* iOS 11.0-11.2 */
        padding-bottom: env(safe-area-inset-bottom); /* iOS 11.2+ */
        overflow: hidden;
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 0;
        transition: margin-top 0.3s ease;
    }

    .content-wrapper.mobile-search-active {
        margin-top: calc(var(--mobile-nav-height) + var(--mobile-wine-type-height) + var(--mobile-search-height) + constant(safe-area-inset-top)); /* iOS 11.0-11.2 */
        margin-top: calc(var(--mobile-nav-height) + var(--mobile-wine-type-height) + var(--mobile-search-height) + env(safe-area-inset-top)); /* iOS 11.2+ */
    }

    /* Ensure mobile map container takes available space without overlapping selectors */
    .mobile-map-wines-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 0;
        overflow: hidden;
    }

    /* Mobile map wines container - positioned below search bar and wine type selector */
    .mobile-map-wines-container {
        margin-top: 0; /* Rimosso margine di 200px */
    }
    
    /* Quando mobile-wines-cards-container è visibile, espandi fino ai pulsanti */
    .mobile-map-wines-container.wines-cards-expanded {
        margin-top: 0 !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        z-index: 50 !important;
        padding-top: calc(var(--mobile-nav-height) + var(--mobile-search-height)) !important; /* Nav + search bar (fino ai pulsanti) */
    }
    
    /* Nascondi wine type selector quando wines-cards-expanded è attivo */
    body:has(.mobile-map-wines-container.wines-cards-expanded) .mobile-wine-type-selector {
        display: none !important;
    }
    
    /* Assicura che mobile-wines-cards-header parta subito dopo i pulsanti */
    .mobile-map-wines-container.wines-cards-expanded .mobile-wines-cards-header {
        margin-top: 0 !important;
    }
    
    /* Improve mobile wine type selector transitions - Card effect for tablet */
    .mobile-wine-type-chip {
        flex: 0 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.25rem;
        padding: 0.5rem 0.35rem;
        background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(15, 15, 15, 1));
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border: 1px solid rgba(212, 175, 55, 0.3);
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        width: 58px;
        min-height: 60px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.7),
                    0 2px 8px rgba(0, 0, 0, 0.4);
        box-sizing: border-box;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        will-change: transform;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    .mobile-wine-type-chip::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.15), transparent);
        transition: left 0.5s ease;
        z-index: 2;
    }

    .mobile-wine-type-chip:active {
        transform: scale(0.96) translateY(-2px);
        box-shadow: 0 12px 32px rgba(212, 175, 55, 0.6),
                    0 6px 16px rgba(212, 175, 55, 0.4),
                    0 0 0 2px rgba(212, 175, 55, 0.2);
        border-color: rgba(212, 175, 55, 0.6);
    }

    .mobile-wine-type-chip:active::before {
        left: 100%;
    }

    .mobile-wine-type-chip:hover {
        box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4),
                    0 3px 10px rgba(212, 175, 55, 0.2);
        border-color: rgba(212, 175, 55, 0.4);
    }
    
    .mobile-wine-type-chip.active {
        transform: scale(0.95) translateY(-3px);
        box-shadow: 0 16px 40px rgba(212, 175, 55, 0.7),
                    0 8px 20px rgba(212, 175, 55, 0.5),
                    0 0 0 3px rgba(212, 175, 55, 0.3),
                    inset 0 0 30px rgba(212, 175, 55, 0.1);
        border-color: rgba(212, 175, 55, 0.8);
        background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(30, 25, 15, 1));
    }

    .mobile-wine-type-icon {
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .mobile-wine-type-icon img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 6px;
        filter: drop-shadow(0 0 4px rgba(212, 175, 55, 0.3));
    }

    .mobile-wine-type-chip.active .mobile-wine-type-icon img {
        filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.6));
    }

    .mobile-wine-type-name {
        font-size: 0.5rem;
        color: var(--gold);
        font-weight: 600;
        text-align: center;
        letter-spacing: 0.2px;
        white-space: normal;
        line-height: 1.2;
        max-width: 100%;
        overflow: visible;
        word-wrap: break-word;
        hyphens: auto;
    }

    .mobile-wine-type-count {
        font-size: 0.55rem;
        color: var(--gold-dark);
        font-weight: 400;
    }
}

@media (max-width: 480px) {
    .mobile-side-menu {
        width: 90%;
    }

    .mobile-view-title {
        font-size: 1.3rem;
    }

    .mobile-region-card,
    .mobile-wine-card {
        padding: 1.25rem 1rem;
    }

    .mobile-region-name {
        font-size: 1.15rem;
    }

    .mobile-wine-name {
        font-size: 1.1rem;
    }

    .mobile-wine-price {
        font-size: 1.25rem;
    }

    .mobile-search-bar-container {
        padding: 0.875rem;
    }

    .mobile-search-input {
        font-size: 0.9rem;
        padding: 0.75rem 0.875rem 0.75rem 2.5rem;
    }

    .mobile-filter-btn {
        font-size: 0.85rem;
        padding: 0.625rem 0.875rem;
    }

    .content-wrapper {
        margin-top: 70px;
    }
}

/* Tablet UI Improvements - Apple-like design */
@media (min-width: 768px) and (max-width: 1024px) {
    /* Quando mobile-wines-cards-container è visibile, espandi fino ai pulsanti */
    .mobile-map-wines-container.wines-cards-expanded {
        margin-top: 0 !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        z-index: 50 !important;
        padding-top: calc(var(--mobile-nav-height) + var(--mobile-search-height)) !important; /* Nav + search bar (fino ai pulsanti) */
    }
    
    /* Nascondi wine type selector quando wines-cards-expanded è attivo */
    body:has(.mobile-map-wines-container.wines-cards-expanded) .mobile-wine-type-selector {
        display: none !important;
    }
    
    /* Assicura che mobile-wines-cards-header parta subito dopo i pulsanti */
    .mobile-map-wines-container.wines-cards-expanded .mobile-wines-cards-header {
        margin-top: 0 !important;
    }
    
    /* Optimized for tablet TLC */
    .mobile-wine-card-grid {
        padding: 0.75rem 1rem;
    }
    
    /* Ensure selection effects work on tablet */
    .mobile-wine-card-grid:active {
        transform: scale(0.96) translateY(-2px);
        box-shadow: 0 12px 32px rgba(212, 175, 55, 0.6),
                    0 6px 16px rgba(212, 175, 55, 0.4),
                    0 0 0 2px rgba(212, 175, 55, 0.2);
        border-color: rgba(212, 175, 55, 0.6);
    }
    
    .mobile-wine-card-grid.selected {
        transform: scale(0.95) translateY(-3px);
        box-shadow: 0 16px 40px rgba(212, 175, 55, 0.7),
                    0 8px 20px rgba(212, 175, 55, 0.5),
                    0 0 0 3px rgba(212, 175, 55, 0.3),
                    inset 0 0 30px rgba(212, 175, 55, 0.1);
        border-color: rgba(212, 175, 55, 0.8);
        background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(30, 25, 15, 1));
    }
    
    .mobile-wine-card-grid.selected::after {
        width: 400px;
        height: 400px;
        opacity: 0.5;
        transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
                    height 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
                    opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .mobile-wine-card-grid:hover {
        box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4),
                    0 3px 10px rgba(212, 175, 55, 0.2);
        border-color: rgba(212, 175, 55, 0.4);
    }
    
    .mobile-wine-card-grid-single-row {
        gap: 0.5rem;
    }
    
    .mobile-wine-card-grid-name {
        font-size: 0.9rem;
    }
    
    .mobile-wine-card-grid-producer {
        font-size: 0.75rem;
    }
    
    .mobile-wine-card-grid-vintage {
        font-size: 0.7rem;
        min-width: 2.5rem;
    }
    
    .mobile-wine-card-grid-price {
        font-size: 1rem;
    }

    /* Ensure mobile-wine-type-chip has proper layout on tablet */
    .mobile-wine-type-chip {
        flex: 0 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.25rem;
        padding: 0.5rem 0.35rem;
        background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(15, 15, 15, 1));
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border: 1px solid rgba(212, 175, 55, 0.3);
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        width: 58px;
        min-height: 60px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.7),
                    0 2px 8px rgba(0, 0, 0, 0.4);
        box-sizing: border-box;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        will-change: transform;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    .mobile-wine-type-icon {
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .mobile-wine-type-icon img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 6px;
        filter: drop-shadow(0 0 4px rgba(212, 175, 55, 0.3));
    }

    .mobile-wine-type-chip.active .mobile-wine-type-icon img {
        filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.6));
    }

    .mobile-wine-type-name {
        font-size: 0.5rem;
        color: var(--gold);
        font-weight: 600;
        text-align: center;
        letter-spacing: 0.2px;
        white-space: normal;
        line-height: 1.2;
        max-width: 100%;
        overflow: visible;
        word-wrap: break-word;
        hyphens: auto;
    }

    .mobile-wine-type-count {
        font-size: 0.55rem;
        color: var(--gold-dark);
        font-weight: 400;
    }
}

@media (min-width: 768px) and (max-width: 819px) {
    /* Quando mobile-wines-cards-container è visibile, espandi fino ai pulsanti */
    .mobile-map-wines-container.wines-cards-expanded {
        margin-top: 0 !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        z-index: 50 !important;
        padding-top: calc(var(--mobile-nav-height) + var(--mobile-search-height)) !important; /* Nav + search bar (fino ai pulsanti) */
    }
    
    /* Nascondi wine type selector quando wines-cards-expanded è attivo */
    body:has(.mobile-map-wines-container.wines-cards-expanded) .mobile-wine-type-selector {
        display: none !important;
    }
    
    /* Assicura che mobile-wines-cards-header parta subito dopo i pulsanti */
    .mobile-map-wines-container.wines-cards-expanded .mobile-wines-cards-header {
        margin-top: 0 !important;
    }
    
    /* Improved spacing for tablet */
    .top-nav {
        padding: 1.25rem 1.5rem;
    }
    
    .search-bar-container {
        padding: 1.25rem 1.5rem;
    }
    
    /* Better typography for tablet */
    .nav-title {
        font-size: 1.5rem;
        letter-spacing: -0.02em;
        font-weight: 600;
    }
    
    .nav-subtitle {
        font-size: 0.9375rem;
        letter-spacing: -0.01em;
        opacity: 0.75;
    }
    
    /* Improved search input on tablet */
    .luxury-search-input {
        font-size: 1rem;
        padding: 0.875rem 1.125rem;
        border-radius: 12px;
        background: rgba(26, 26, 26, 0.8);
        border: 0.5px solid rgba(212, 175, 55, 0.2);
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .luxury-search-input:focus {
        background: rgba(26, 26, 26, 0.95);
        border-color: rgba(212, 175, 55, 0.4);
        outline: none;
        box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
    }
    
    /* Improved filter buttons on tablet */
    .luxury-filter-btn {
        padding: 0.75rem 1.25rem;
        border-radius: 10px;
        font-size: 0.9375rem;
        font-weight: 500;
        letter-spacing: -0.01em;
        min-height: 40px;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .luxury-filter-btn:active {
        transform: scale(0.98);
    }
    
    /* Better breadcrumb on tablet - show desktop breadcrumb */
    .breadcrumb {
        display: flex !important;
        padding: 0 1.5rem;
        margin: 1.25rem auto 1.25rem;
        font-size: 0.875rem;
    }
    
    /* Hide mobile breadcrumb on tablet */
    .mobile-breadcrumb {
        display: none !important;
    }
    
    /* Improved wine cards on tablet */
    .wine-card-sidebar {
        padding: 1.25rem;
        border-radius: 16px;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .wine-card-sidebar:active {
        transform: scale(0.98);
    }
    
    /* Better map styling on tablet */
    .map-wrapper {
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                    0 2px 8px rgba(0, 0, 0, 0.2);
    }
    
    /* Rimuovi gap 155px nella mobile view map solo per tablet */
    .mobile-map-view {
        padding: 1rem 1.25rem !important;
    }
}

/* Schermi 1920x1200 (aspect ratio 16:10) - Rimuovi gap 155px nella mobile view map */
@media (width: 1920px) and (height: 1200px),
       (aspect-ratio: 16/10) and (min-width: 1920px) {
    .mobile-map-view {
        padding: 1rem 1.25rem !important;
    }
}

/* TLC 11 Gen 2 - 2000x1200 (aspect ratio 5:3) - Layout desktop completo */
/* NOTA: Il menu mobile è nascosto su questo dispositivo (usa layout desktop).
   Le modifiche al menu mobile (effetto glass, "Gran Caffe Experience", switch in fondo)
   sono comunque applicate tramite le regole CSS generali, ma il menu non è visibile. */
@media (width: 2000px) and (height: 1200px),
       (min-width: 1900px) and (max-width: 2100px) and (min-height: 1100px) and (max-height: 1300px),
       (aspect-ratio: 5/3) and (min-width: 1900px) {
    /* Nascondi elementi mobile - TLC usa layout desktop */
    .mobile-menu-btn,
    .mobile-search-btn,
    .mobile-search-bar-container,
    .mobile-map-wines-container,
    .mobile-views-container,
    .mobile-side-menu,
    .mobile-wine-type-selector,
    .breadcrumb,
    .mobile-breadcrumb {
        display: none !important;
    }
    
    /* Popup mobile con larghezza limitata per mostrare mappa sottostante */
    .mobile-wine-type-popup {
        width: 28% !important;
        max-width: 250px !important;
        left: 0 !important;
        right: auto !important;
        background: linear-gradient(180deg, rgba(10, 10, 10, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%) !important;
        border-right: 2px solid rgba(212, 175, 55, 0.3) !important;
    }
    
    .mobile-wine-type-popup-overlay {
        background: rgba(0, 0, 0, 0.3) !important;
    }
    
    .mobile-wine-type-popup-header {
        padding: 0.75rem 1rem !important;
    }
    
    .mobile-wine-type-popup-title {
        font-size: 0.95rem !important;
    }
    
    .mobile-wine-type-popup-close {
        width: 32px !important;
        height: 32px !important;
    }
    
    .mobile-wine-type-popup-tabs {
        padding: 0.5rem 0.75rem !important;
        gap: 0.5rem !important;
    }
    
    .mobile-wine-type-popup-tab {
        padding: 0.5rem 0.625rem !important;
        gap: 0.375rem !important;
        font-size: 0.75rem !important;
    }
    
    .mobile-wine-type-popup-tab i {
        display: none !important;
    }
    
    .mobile-wine-type-popup-content {
        background: transparent !important;
        padding: 0.5rem 0.75rem !important;
    }
    
    .mobile-wine-type-popup-regions,
    .mobile-wine-type-popup-varietals {
        display: flex !important;
        flex-direction: column !important;
        gap: 0.75rem !important;
    }
    
    .mobile-wine-type-popup-region,
    .mobile-wine-type-popup-varietal {
        padding: 0.75rem 0.875rem !important;
        border-radius: 10px !important;
    }
    
    .mobile-wine-type-popup-region-name,
    .mobile-wine-type-popup-varietal-name {
        font-size: 0.8125rem !important;
    }
    
    .mobile-wine-type-popup-region-count,
    .mobile-wine-type-popup-varietal-count {
        font-size: 0.65rem !important;
    }
    
    /* Sposta la mappa a destra quando il popup è visibile mantenendo la stessa larghezza */
    body:has(.mobile-wine-type-popup.show) .mobile-map-wines-container {
        margin-left: 150px !important;
        width: calc(100% + 150px) !important;
        transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1), width 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }
    
    /* Quando wines-cards-expanded è attivo, ignora le regole del popup */
    body:has(.mobile-wine-type-popup.show) .mobile-map-wines-container.wines-cards-expanded {
        margin-left: 0 !important;
        width: 100% !important;
        left: 0 !important;
        right: 0 !important;
    }
    
    :root[data-theme="day"] .mobile-wine-type-popup {
        background: linear-gradient(180deg, rgba(253, 251, 247, 0.95) 0%, rgba(248, 246, 240, 0.95) 100%) !important;
        border-right: 2px solid rgba(139, 105, 20, 0.3) !important;
        border-top-right-radius: 20px !important;
        border-bottom-right-radius: 20px !important;
    }
    
    :root[data-theme="day"] .mobile-wine-type-popup-content {
        background: transparent !important;
    }
    
    /* Mostra elementi desktop */
    .main-content-desktop {
        display: flex !important;
        margin-left: 0 !important;
    }
    
    .content-wrapper {
        margin-left: 0 !important;
        margin-top: 0 !important;
        flex-direction: row !important;
    }
    
    .map-wrapper {
        display: flex !important;
        min-height: 600px !important;
        max-height: 75vh !important;
    }
    
    #map {
        min-height: 600px !important;
        max-height: 75vh !important;
    }
    
    .interactive-map-main {
        display: flex !important;
    }
    
    .sidebar {
        display: flex !important;
    }
    
    .search-bar-container {
        display: block !important;
    }
    
    .top-nav {
        position: relative !important;
        box-shadow: none !important;
    }
    
    .logo {
        display: block !important;
    }
    
    .wines-grid-container {
        display: grid !important;
    }
    
    /* Rimuovi gap nella mobile view map */
    .mobile-map-view {
        padding: 1rem 1.25rem !important;
        padding-top: 1rem !important;
    }
    
    /* Assicura che la mappa desktop sia visibile */
    .main-content-desktop .map-wrapper {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    .main-content-desktop #map {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
}

/* TLC 11 Gen 2 - Gestione viewport Chrome (potrebbe usare viewport ridotto) */
/* NOTA: Anche qui il menu mobile è nascosto. Le modifiche CSS generali (effetto glass, etc.)
   sono comunque presenti nel codice ma non visibili su questo dispositivo. */
@media (min-width: 1900px) and (max-width: 2100px) and (min-height: 1100px) and (max-height: 1300px),
       (min-width: 1600px) and (max-width: 2200px) and (aspect-ratio: 5/3),
       (min-width: 1600px) and (max-width: 2200px) and (min-aspect-ratio: 1.6) and (max-aspect-ratio: 1.7) {
    /* Forza layout desktop anche se Chrome usa viewport ridotto */
    .mobile-menu-btn,
    .mobile-search-btn,
    .mobile-search-bar-container,
    .mobile-map-wines-container,
    .mobile-views-container,
    .mobile-side-menu,
    .mobile-wine-type-selector {
        display: none !important;
    }
    
    /* Popup mobile con larghezza limitata per mostrare mappa sottostante */
    .mobile-wine-type-popup {
        width: 28% !important;
        max-width: 250px !important;
        left: 0 !important;
        right: auto !important;
        background: linear-gradient(180deg, rgba(10, 10, 10, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%) !important;
        border-right: 2px solid rgba(212, 175, 55, 0.3) !important;
    }
    
    .mobile-wine-type-popup-overlay {
        background: rgba(0, 0, 0, 0.3) !important;
    }
    
    .mobile-wine-type-popup-content {
        background: transparent !important;
    }
    
    .mobile-wine-type-popup-regions,
    .mobile-wine-type-popup-varietals {
        display: flex !important;
        flex-direction: column !important;
        gap: 0.75rem !important;
    }
    
    :root[data-theme="day"] .mobile-wine-type-popup {
        background: linear-gradient(180deg, rgba(253, 251, 247, 0.95) 0%, rgba(248, 246, 240, 0.95) 100%) !important;
        border-right: 2px solid rgba(139, 105, 20, 0.3) !important;
        border-top-right-radius: 20px !important;
        border-bottom-right-radius: 20px !important;
    }
    
    :root[data-theme="day"] .mobile-wine-type-popup-content {
        background: transparent !important;
    }
    
    .main-content-desktop {
        display: flex !important;
    }
    
    .map-wrapper,
    #map {
        display: flex !important;
        visibility: visible !important;
    }
    
    .sidebar {
        display: flex !important;
    }
    
    .search-bar-container {
        display: block !important;
    }
}

/* ==================== DESKTOP RESPONSIVE FIXES ==================== */
/* Desktop map - ensure proper visibility (solo >= 1024px) */
@media (min-width: 1024px) {
    .map-wrapper {
        min-height: 500px;
        display: flex;
    }

    #map {
        min-height: 500px;
    }

    /* Desktop main content */
    .main-content-desktop {
        display: flex;
        flex-direction: column;
        min-height: 500px;
    }

    /* Desktop wines grid */
    .wines-grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
    }
    
    /* Rimuovi gap 155px nella mobile view map per tablet grandi (>= 1024px) */
    .mobile-map-view {
        padding: 1rem 1.25rem !important;
        padding-top: 1rem !important;
    }
}

/* iPad Pro and larger tablets (1024px+) - Usa layout desktop */
/* NOTA: TLC 11 Gen 2 (2000x1200) è gestito dalla media query specifica sopra */
@media (min-width: 1024px) and (max-width: 1366px) {
    .main-content-desktop .map-wrapper {
        display: flex !important;
        min-height: 600px !important;
        max-height: 75vh !important;
    }
    
    .main-content-desktop #map {
        min-height: 600px !important;
        max-height: 75vh !important;
    }
}

/* TLC 11 Gen 2 - Priorità alta per risoluzione 2000x1200 e simili */
@media (min-width: 1900px) and (min-height: 1100px) {
    /* Assicura che il layout desktop sia sempre attivo per tablet ad alta risoluzione */
    .main-content-desktop {
        display: flex !important;
    }
    
    .map-wrapper,
    #map {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    .sidebar {
        display: flex !important;
    }
    
    .wines-grid-container {
        display: grid !important;
    }
    
    /* Nascondi sempre elementi mobile su tablet ad alta risoluzione */
    .mobile-menu-btn,
    .mobile-search-btn,
    .mobile-search-bar-container,
    .mobile-map-wines-container,
    .mobile-views-container,
    .mobile-wine-type-selector {
        display: none !important;
    }
    
    /* Popup mobile con larghezza limitata per mostrare mappa sottostante */
    .mobile-wine-type-popup {
        width: 28% !important;
        max-width: 250px !important;
        left: 0 !important;
        right: auto !important;
        background: linear-gradient(180deg, rgba(10, 10, 10, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%) !important;
        border-right: 2px solid rgba(212, 175, 55, 0.3) !important;
    }
    
    .mobile-wine-type-popup-overlay {
        background: rgba(0, 0, 0, 0.3) !important;
    }
    
    .mobile-wine-type-popup-content {
        background: transparent !important;
    }
    
    .mobile-wine-type-popup-regions,
    .mobile-wine-type-popup-varietals {
        display: flex !important;
        flex-direction: column !important;
        gap: 0.75rem !important;
    }
    
    :root[data-theme="day"] .mobile-wine-type-popup {
        background: linear-gradient(180deg, rgba(253, 251, 247, 0.95) 0%, rgba(248, 246, 240, 0.95) 100%) !important;
        border-right: 2px solid rgba(139, 105, 20, 0.3) !important;
        border-top-right-radius: 20px !important;
        border-bottom-right-radius: 20px !important;
    }
    
    :root[data-theme="day"] .mobile-wine-type-popup-content {
        background: transparent !important;
    }
}

/* Tutti i dispositivi sotto 820px (max-width: 819px) - Layout unificato tablet e mobile 
   NOTA: 820px-1023px usa layout desktop, iPad Pro standard (1024px) e superiori usano layout desktop */
@media (max-width: 819px) {
    /* Desktop map nascosta - usa mobile map */
    .main-content-desktop .map-wrapper {
        display: none !important;
    }
    
    /* Mobile map container unificato per tablet e mobile */
    .mobile-map-wrapper {
        min-height: 715px; /* Aumentato del 30% da 550px */
        max-height: 91vh; /* Aumentato del 30% da 70vh */
        height: 91vh; /* Aumentato del 30% da 70vh */
        border-radius: 20px;
    }

    #mobileMap {
        min-height: 715px; /* Aumentato del 30% da 550px */
        height: 100%;
        border-radius: 20px;
    }
    
    /* Mobile wine cards grid - single column */
    .mobile-wines-cards-grid {
        grid-template-columns: 1fr;
        grid-auto-rows: minmax(min-content, auto);
        gap: 1.25rem;
        padding: 1.25rem 1rem;
        align-content: start;
        contain: layout;
    }
    
    /* Desktop wines grid nascosto */
    .wines-grid-container {
        display: none !important;
    }
    
    /* Mobile map view container - Rimuovi gap 155px per dispositivi non iPhone */
    .mobile-map-view {
        padding: 1rem 1.25rem !important;
    }
}

/* Mobile size (max-width: 767px) - Layout già unificato con tablet in @media (max-width: 1023px) */

/* Small mobile size (max-width: 480px) - Optimized for small screens */
@media (max-width: 480px) {
    /* Mobile map container - ingrandito per piccoli schermi */
    .mobile-map-wrapper {
        min-height: 455px; /* Aumentato del 30% da 350px */
        max-height: 65vh; /* Aumentato del 30% da 50vh */
        height: 65vh; /* Aumentato del 30% da 50vh */
        border-radius: 16px;
    }
    
    #mobileMap {
        min-height: 455px; /* Aumentato del 30% da 350px */
        height: 100%;
        border-radius: 16px;
        margin-left: 51px; /* Modificato margin-left a 51px */
        margin-top: 83px; /* Modificato margin-top a 83px */
    }
    
    /* Label regioni ben visibili anche su schermi piccoli */
    .mobile-region-label-text {
        font-size: 0.7rem !important;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7),
                     0 0 6px rgba(0, 0, 0, 0.5);
    }
    
    /* Wine cards - optimized spacing for small screens */
    .mobile-wine-card-grid {
        padding: 0.875rem 1rem; /* Reduced by half */
        border-radius: 12px;
    }
    
    .mobile-wine-card-grid-name {
        font-size: 0.95rem;
    }
    
    .mobile-wine-card-grid-price {
        font-size: 1rem;
    }
    
    .mobile-wine-card-grid-producer {
        font-size: 0.8rem;
    }
    
    .mobile-wine-card-grid-vintage {
        font-size: 0.75rem;
    }
    
    /* Improve spacing for small screens */
    .mobile-wines-cards-grid {
        grid-auto-rows: minmax(min-content, auto);
        gap: 1rem;
        padding: 1rem 0.875rem;
        align-content: start;
        contain: layout;
    }
    
    /* Improved readability for wine cards on small screens */
    .mobile-wine-card-grid {
        padding: 1.5rem 1.25rem;
        width: 100%;
        min-height: min-content;
        height: auto;
        flex-shrink: 0;
        box-sizing: border-box;
    }
    
    .mobile-wine-card-grid-name {
        font-size: 1.25rem;
    }
    
    .mobile-wine-card-grid-price {
        font-size: 1.4rem;
    }
    
    .mobile-wine-card-grid-producer {
        font-size: 0.95rem;
    }
    
    .mobile-wine-card-grid-region {
        font-size: 0.85rem;
    }
    
    .mobile-wine-card-grid-grape {
        font-size: 0.8rem;
    }
    
    /* Improved table readability on small screens */
    .regions-table {
        font-size: 0.9rem;
    }
    
    .regions-table th,
    .regions-table td {
        padding: 0.875rem 0.625rem;
    }
    
    .table-region-name {
        font-size: 0.95rem;
    }
}

/* ==================== iOS COMPATIBILITY FIXES ==================== */
/* Safe areas per iPhone con notch */
@media (max-width: 768px) {
    /* Fallback per iOS Safari che non supporta gap in grid (solo iOS) */
    @supports not (gap: 1.5rem) {
        .mobile-wines-cards-grid > .mobile-wine-card-grid {
            margin-bottom: 1.5rem;
        }
        
        .mobile-wines-cards-grid > .mobile-wine-card-grid:last-child {
            margin-bottom: 0;
        }
    }
    
    /* Fallback per iOS Safari che non supporta gap in flex (solo iOS) */
    @supports not (gap: 1.75rem) {
        .mobile-wine-card-grid > * {
            margin-bottom: 1.75rem;
        }
        
        .mobile-wine-card-grid > *:last-child {
            margin-bottom: 0;
        }
    }
    /* Solo mobile-map-view mantiene padding-top 155px per iPhone iOS */
    /* Questa regola si applica solo a dispositivi iOS grazie a constant() e env() */
    .mobile-map-view {
        padding-top: calc(155px + constant(safe-area-inset-top)); /* iOS 11.0-11.2 */
        padding-top: calc(155px + env(safe-area-inset-top)); /* iOS 11.2+ */
        padding-bottom: constant(safe-area-inset-bottom); /* iOS 11.0-11.2 */
        padding-bottom: env(safe-area-inset-bottom); /* iOS 11.2+ */
        padding-left: constant(safe-area-inset-left); /* iOS 11.0-11.2 */
        padding-left: env(safe-area-inset-left); /* iOS 11.2+ */
        padding-right: constant(safe-area-inset-right); /* iOS 11.0-11.2 */
        padding-right: env(safe-area-inset-right); /* iOS 11.2+ */
    }
    
    /* Per dispositivi non iOS, rimuovi il padding-top 155px */
    @supports not (padding-top: env(safe-area-inset-top)) {
        .mobile-map-view {
            padding-top: 1rem !important;
        }
    }
    
    /* iOS fixes per mobile-wine-card-grid */
    .mobile-wine-card-grid {
        /* Assicura rendering corretto su iOS */
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        /* Fix per backdrop-filter su iOS */
        background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(15, 15, 15, 1)) !important;
        /* Assicura che le card non vengano tagliate */
        box-sizing: border-box;
        /* Fix per overflow su iOS */
        -webkit-overflow-scrolling: touch;
        /* Assicura dimensioni corrette */
        max-width: 100%;
        min-width: 0;
        /* Previene sovrapposizione - assicura che ogni card occupi il suo spazio */
        min-height: min-content;
        height: auto;
        /* Assicura che le card non si sovrappongano */
        position: relative;
        z-index: 1;
    }
    
    /* Fix per il container delle card su iOS */
    .mobile-wines-cards-grid {
        /* Assicura scroll fluido su iOS */
        -webkit-overflow-scrolling: touch;
        /* Fix per rendering su iOS */
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        /* Assicura che il container non collassi su iOS */
        min-height: 0;
        height: auto;
        /* Previene sovrapposizione delle card */
        grid-auto-rows: minmax(min-content, auto);
        contain: layout;
        /* Padding per safe area su iPhone */
        padding-top: max(1rem, constant(safe-area-inset-top)); /* iOS 11.0-11.2 */
        padding-top: max(1rem, env(safe-area-inset-top)); /* iOS 11.2+ */
        padding-bottom: max(1rem, constant(safe-area-inset-bottom)); /* iOS 11.0-11.2 */
        padding-bottom: max(1rem, env(safe-area-inset-bottom)); /* iOS 11.2+ */
    }
    
    /* Fix per il container principale su iOS */
    .mobile-wines-cards-container {
        /* Assicura altezza corretta su iPhone */
        min-height: 100vh;
        min-height: 100dvh; /* Dynamic viewport height per iOS Safari */
        /* Assicura che il container prenda tutta l'altezza disponibile */
        display: flex;
        flex-direction: column;
        position: relative;
    }
    
    /* Fix aggiuntivi per elementi interni delle card su iOS */
    .mobile-wine-card-grid-header,
    .mobile-wine-card-grid-name,
    .mobile-wine-card-grid-producer,
    .mobile-wine-card-grid-price {
        /* Assicura rendering corretto del testo su iOS */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
    }
    
    /* Altri elementi mappa senza padding-top 155px, solo safe-area */
    .map-container,
    .mobile-map-wrapper,
    .interactive-map-main,
    .map-wrapper,
    #map,
    #mobileMap,
    .leaflet-container {
        padding-top: constant(safe-area-inset-top); /* iOS 11.0-11.2 */
        padding-top: env(safe-area-inset-top); /* iOS 11.2+ */
        padding-bottom: constant(safe-area-inset-bottom); /* iOS 11.0-11.2 */
        padding-bottom: env(safe-area-inset-bottom); /* iOS 11.2+ */
        padding-left: constant(safe-area-inset-left); /* iOS 11.0-11.2 */
        padding-left: env(safe-area-inset-left); /* iOS 11.2+ */
        padding-right: constant(safe-area-inset-right); /* iOS 11.0-11.2 */
        padding-right: env(safe-area-inset-right); /* iOS 11.2+ */
    }
    
    /* Forza visibilità elementi mappa su mobile iOS */
    .map-wrapper,
    #map,
    .leaflet-container,
    .mobile-map-wrapper,
    #mobileMap {
        visibility: visible !important;
        opacity: 1 !important;
        background: #0A0A0A !important;
        display: block !important;
    }
    
    /* Assicura che la mappa mobile sia sempre visibile */
    .mobile-map-view .leaflet-container {
        background: #0A0A0A !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    /* Day mode styles */
    :root[data-theme="day"] .map-wrapper,
    :root[data-theme="day"] #map,
    :root[data-theme="day"] .leaflet-container,
    :root[data-theme="day"] .mobile-map-wrapper,
    :root[data-theme="day"] #mobileMap {
        background: var(--bg-primary, #FDFBF7) !important;
    }

    :root[data-theme="day"] .mobile-map-view .leaflet-container {
        background: var(--bg-primary, #FDFBF7) !important;
    }
}

/* Reset per garantire visualizzazione su iOS */
.leaflet-container {
    background: #0A0A0A !important;
}

.mobile-map-view .leaflet-container {
    background: #0A0A0A !important;
}

/* Day mode styles */
:root[data-theme="day"] .leaflet-container {
    background: var(--bg-primary, #FDFBF7) !important;
}

:root[data-theme="day"] .mobile-map-view .leaflet-container {
    background: var(--bg-primary, #FDFBF7) !important;
}

/* =========================================================
   OTTIMIZZAZIONI PORTRAIT vs LANDSCAPE
   Regole specifiche per orientamento verticale e orizzontale
   ========================================================= */

/* PORTRAIT (verticale) - schermo alto e stretto */
@media (max-width: 819px) and (orientation: portrait) {
    /* Mappa più alta in portrait per sfruttare lo spazio verticale */
    .mobile-map-wrapper {
        height: 75vh !important;
        min-height: 600px !important;
        max-height: 75vh !important;
    }

    #mobileMap {
        min-height: 600px !important;
    }

    /* Label regioni più grandi in portrait */
    .mobile-region-label-text {
        font-size: 0.9rem !important;
    }

    /* Container query per schermi molto alti in portrait */
    @container (min-height: 800px) {
        .mobile-map-wrapper {
            height: 70vh !important;
            min-height: 550px !important;
        }
        
        .mobile-region-label-text {
            font-size: 0.85rem !important;
        }
    }
}

/* LANDSCAPE (orizzontale) - schermo largo e basso */
@media (max-width: 819px) and (orientation: landscape) {
    /* Mappa più bassa in landscape per dare spazio ai vini */
    .mobile-map-wrapper {
        height: 40vh !important;
        min-height: 280px !important;
        max-height: 40vh !important;
    }
    
    #mobileMap {
        min-height: 280px !important;
    }
    
    /* Label regioni visibili anche in landscape */
    .mobile-region-label-text {
        font-size: 0.7rem !important;
    }
    
    /* Ottimizza selettore verticale per landscape */
    .mobile-wine-type-selector {
        max-height: none; /* Rimossa limitazione per mostrare tutti i chip */
        height: auto; /* Altezza automatica */
        width: 65px;
        padding: 0.5rem 0.4rem;
        overflow-y: visible; /* Nessuno scroll */
    }
    
    .mobile-wine-type-chip {
        width: 52px;
        min-height: 60px; /* Aumentato per permettere testo su più righe */
        padding: 0.5rem 0.35rem; /* Ridotto padding laterale */
        gap: 0.3rem;
        overflow: hidden; /* Card effect con overflow hidden */
    }
    
    .mobile-wine-type-icon {
        width: 24px;
        height: 24px;
    }
    
    .mobile-wine-type-name {
        font-size: 0.5rem;
        white-space: normal; /* Permette testo su più righe */
        word-wrap: break-word; /* Permette di spezzare parole lunghe */
        overflow: visible; /* Non taglia il testo */
    }
    
    .mobile-wine-type-count {
        font-size: 0.5rem;
    }
    
    /* Container query per schermi molto larghi in landscape */
    @container (min-width: 800px) {
        .mobile-map-wrapper {
            height: 45vh !important;
            min-height: 320px !important;
        }
        
        .mobile-region-label-text {
            font-size: 0.75rem !important;
        }
    }
}

/* =========================================================
   MOBILE-FIRST OPTIMIZATIONS 2025
   Ottimizzazioni moderne per performance e UX mobile
   ========================================================= */

/* --------------- MOBILE & TABLET 2025 FIXES --------------- */
/* Solo per dispositivi mobile/tablet piccoli (max-width: 819px) */
@media (max-width: 819px) {
    /* 1. Forza mappa sempre visibile */
    .map-wrapper,
    #map,
    #mobileMap,
    .mobile-map-wrapper,
    .leaflet-container {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        background: #0A0A0A !important;
    }
    
    .leaflet-tile-pane {
        display: none !important;
    }

    /* Day mode styles */
    :root[data-theme="day"] .map-wrapper,
    :root[data-theme="day"] #map,
    :root[data-theme="day"] #mobileMap,
    :root[data-theme="day"] .mobile-map-wrapper,
    :root[data-theme="day"] .leaflet-container {
        background: var(--bg-primary, #FDFBF7) !important;
    }
}

/* Fix tecnici anche per 820px-1023px (ma senza nascondere elementi desktop) */
@media (min-width: 820px) and (max-width: 1023px) {
    /* 1. Forza mappa sempre visibile */
    .map-wrapper,
    #map,
    .leaflet-container {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        background: #0A0A0A !important;
    }
    
    .leaflet-tile-pane {
        display: none !important;
    }

    /* Day mode styles */
    :root[data-theme="day"] .map-wrapper,
    :root[data-theme="day"] #map,
    :root[data-theme="day"] .leaflet-container {
        background: var(--bg-primary, #FDFBF7) !important;
    }

    /* 2. Safe-area iOS */
    .mobile-map-wrapper,
    .map-wrapper {
        padding-top: env(safe-area-inset-top, 0px);
        padding-bottom: env(safe-area-inset-bottom, 0px);
        padding-left: env(safe-area-inset-left, 0px);
        padding-right: env(safe-area-inset-right, 0px);
    }
    
    /* Ensure selection effects work on tablet (820px-1023px) */
    .mobile-wine-card-grid:active {
        transform: scale(0.96) translateY(-2px);
        box-shadow: 0 12px 32px rgba(212, 175, 55, 0.6),
                    0 6px 16px rgba(212, 175, 55, 0.4),
                    0 0 0 2px rgba(212, 175, 55, 0.2);
        border-color: rgba(212, 175, 55, 0.6);
    }
    
    .mobile-wine-card-grid.selected {
        transform: scale(0.95) translateY(-3px);
        box-shadow: 0 16px 40px rgba(212, 175, 55, 0.7),
                    0 8px 20px rgba(212, 175, 55, 0.5),
                    0 0 0 3px rgba(212, 175, 55, 0.3),
                    inset 0 0 30px rgba(212, 175, 55, 0.1);
        border-color: rgba(212, 175, 55, 0.8);
        background: linear-gradient(145deg, rgba(26, 26, 26, 0.98), rgba(30, 25, 15, 1));
    }
    
    .mobile-wine-card-grid.selected::after {
        width: 400px;
        height: 400px;
        opacity: 0.5;
        transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
                    height 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
                    opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .mobile-wine-card-grid:hover {
        box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4),
                    0 3px 10px rgba(212, 175, 55, 0.2);
        border-color: rgba(212, 175, 55, 0.4);
    }

    /* 3. Touch & scroll 2025 */
    .mobile-map-view,
    .map-wrapper {
        overscroll-behavior: contain;
        touch-action: pan-x pan-y;
        isolation: isolate;
    }

    /* 4. Container query altezza dinamica */
    @container (max-height: 600px) {
        .mobile-map-wrapper {
            height: 65vh; /* Aumentato del 30% da 50vh */
            min-height: 455px; /* Aumentato del 30% da 350px */
        }
    }

    /* 5. GPU acceleration */
    .leaflet-pane,
    .leaflet-marker-icon,
    .leaflet-marker-shadow {
        transform: translateZ(0);
        will-change: transform;
    }

    /* 6. Pulsanti zoom OLED-safe */
    .leaflet-control-zoom a {
        width: 44px !important;
        height: 44px !important;
        line-height: 44px !important;
        background: rgba(26, 26, 26, 0.98) !important;
        color: #d4af37 !important;
        border: 0.5px solid rgba(212, 175, 55, 0.4) !important;
        border-radius: 10px !important;
        font-size: 20px !important;
        font-weight: 600 !important;
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
        transition: all 0.2s ease !important;
    }
    
    .leaflet-control-zoom a:active {
        transform: scale(0.95);
        background: rgba(212, 175, 55, 0.15) !important;
    }

    /* 7. Dark-mode auto OLED */
    @media (prefers-color-scheme: dark) {
        .leaflet-container {
            background: #0a0a0a;
        }
    }

    /* 8. Fix doppio container */
    #map:empty,
    #mobileMap:empty {
        display: none;
    }

    /* 9. Region-info card mobile con glassmorphism */
    .region-info,
    .mobile-region-info {
        max-width: 85%;
        font-size: 0.875rem;
        line-height: 1.6;
        border-radius: 16px;
        border: 1px solid rgba(212, 175, 55, 0.25);
        border-left: 4px solid var(--gold);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6),
                    0 0 0 1px rgba(212, 175, 55, 0.1) inset;
        padding-top: 2.5rem;
    }

    /* 10. Tooltip 2025 */
    .region-tooltip {
        font-size: 0.8rem;
        padding: 0.5rem 0.75rem;
        border-radius: 8px;
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 0.5px solid rgba(212, 175, 55, 0.4);
        transform: translateX(-50%) translateY(-6px);
        animation: tooltipFadeIn 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: transform, opacity;
    }
    
    @keyframes tooltipFadeIn {
        from { opacity: 0; transform: translateX(-50%) translateY(-12px); }
        to { opacity: 1; transform: translateX(-50%) translateY(-6px); }
    }

    /* 11. Contain performance */
    .leaflet-marker-icon,
    .leaflet-marker-shadow,
    .leaflet-tile {
        contain: layout style paint;
    }
}

/* --------------- SMALL PHONES ≤ 390px --------------- */
@media (max-width: 390px) {
    .mobile-map-wrapper {
        height: 48vh;
        min-height: 320px;
    }
    
    #mobileMap {
        min-height: 320px;
    }
    
    /* Label regioni ottimizzate per telefoni piccoli */
    .mobile-region-label-text {
        font-size: 0.68rem !important;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7),
                     0 0 6px rgba(0, 0, 0, 0.5);
    }
    
    .leaflet-control-zoom a {
        width: 40px !important;
        height: 40px !important;
        line-height: 40px !important;
    }
}

/* --------------- PRINT OPTIMIZATION --------------- */
@media print {
    * {
        background: transparent !important;
        color: black !important;
        box-shadow: none !important;
        text-shadow: none !important;
    }
}

/* ==================== DAY MODE - E-PAPER OPTIMIZED ==================== */
/* Ottimizzato per e-reader e dispositivi e-paper con alto contrasto */

:root[data-theme="day"] .top-nav {
    background: var(--bg-primary) !important;
    border-bottom: 2px solid var(--border-color) !important;
    box-shadow: 0 2px 4px var(--shadow-color) !important;
}

:root[data-theme="day"] .nav-title,
:root[data-theme="day"] .nav-subtitle {
    color: var(--text-primary) !important;
    text-shadow: none !important;
}

:root[data-theme="day"] .mobile-menu-btn,
:root[data-theme="day"] .mobile-search-btn {
    color: var(--text-primary) !important;
}

:root[data-theme="day"] .wine-card,
:root[data-theme="day"] .wine-card-sidebar,
:root[data-theme="day"] .mobile-wine-card {
    background: var(--bg-primary) !important;
    border: 2px solid var(--border-color) !important;
    box-shadow: 0 2px 4px var(--shadow-color) !important;
    color: var(--text-primary) !important;
}

/* Rimuovi gradienti scuri dai pseudo-elementi in day mode */
:root[data-theme="day"] .wine-card::after {
    background: none !important;
    display: none !important;
}

:root[data-theme="day"] .wine-card::before {
    background: linear-gradient(135deg, transparent, rgba(212, 175, 55, 0.1), transparent) !important;
}

:root[data-theme="day"] .wine-card:hover {
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15) !important;
    border-color: var(--gold) !important;
}

:root[data-theme="day"] .wine-name,
:root[data-theme="day"] .wine-price {
    text-shadow: none !important;
}

:root[data-theme="day"] .wine-producer,
:root[data-theme="day"] .wine-region {
    text-shadow: none !important;
}

:root[data-theme="day"] .wine-producer {
    color: var(--brand-red, #8B0000) !important;
}

:root[data-theme="day"] .wine-region {
    color: var(--text-primary, #1a1a1a) !important;
}

:root[data-theme="day"] .wine-card-title,
:root[data-theme="day"] .wine-card-subtitle {
    color: var(--text-primary) !important;
}

/* === CORREZIONE CONTRASTO: Testo oro su sfondo chiaro === */
/* Nel day mode, sostituisci testo oro con nero/charcoal per WCAG AA */
:root[data-theme="day"] .wine-name,
:root[data-theme="day"] .wine-price,
:root[data-theme="day"] .luxury-title,
:root[data-theme="day"] .nav-title,
:root[data-theme="day"] .wines-list-title,
:root[data-theme="day"] .region-info h3,
:root[data-theme="day"] [class*="title"],
:root[data-theme="day"] [class*="name"] {
    color: var(--text-primary, #1A1A1A) !important;
}

/* Mantieni oro solo per elementi su sfondo scuro nel day mode */
:root[data-theme="day"] .wine-card,
:root[data-theme="day"] .wine-card-sidebar {
    background: var(--bg-primary) !important;
}

:root[data-theme="day"] .wine-card .wine-name,
:root[data-theme="day"] .wine-card .wine-price {
    color: var(--text-primary, #0A0A0A) !important;
}

:root[data-theme="day"] * {
    /* Rimuovi gradienti complessi per e-paper */
    background-image: none !important;
}

:root[data-theme="day"] .luxury-container::before,
:root[data-theme="day"] .luxury-container::after {
    display: none !important;
}

/* Mantieni alcuni gradienti semplici solo se necessari */
:root[data-theme="day"] .wine-family-rosso {
    background: var(--wine-primary) !important;
}

/* Rimuovi backdrop-filter per e-paper */
:root[data-theme="day"] * {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
}

/* Ottimizza contrasto per testo */
:root[data-theme="day"] p,
:root[data-theme="day"] span,
:root[data-theme="day"] div {
    color: var(--text-primary);
}

:root[data-theme="day"] .mobile-menu-category-name {
    color: var(--text-primary) !important;
}

:root[data-theme="day"] .day-night-switch-slider {
    background-color: var(--border-color) !important;
}

/* Assicura che lo switch sia visibile su mobile e tablet */
@media (max-width: 1023px) {
    .day-night-switch {
        display: inline-block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    .mobile-menu-category:has(.day-night-switch) {
        display: flex !important;
        visibility: visible !important;
    }
}

/* Day mode per mobile map view */
:root[data-theme="day"] .mobile-map-view {
    background: var(--bg-primary) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="day"] .mobile-map-wrapper {
    border: 0.5px solid transparent !important;
    box-shadow: 0 2px 4px var(--shadow-color) !important;
}

/* Day theme - Bordo trasparente per il container della mappa */
:root[data-theme="day"] .interactive-map-main {
    border: 2px solid transparent !important;
    background: var(--bg-primary) !important; /* Light background for day mode */
}

:root[data-theme="day"] .map-wrapper {
    border: none !important;
}

:root[data-theme="day"] #map-container {
    border: none !important;
}

:root[data-theme="day"] #map {
    border: none !important;
    background: var(--bg-primary) !important; /* Light background for day mode */
}

:root[data-theme="day"] .leaflet-container {
    border: none !important;
    background: var(--bg-primary) !important; /* Light background for day mode */
}

:root[data-theme="day"] #mobileMap {
    background: var(--bg-primary) !important; /* Light background for day mode */
}

:root[data-theme="day"] .mobile-map-wrapper .leaflet-container {
    background: var(--bg-primary) !important; /* Light background for day mode */
}

:root[data-theme="day"] .mobile-map-view .leaflet-container {
    background: var(--bg-primary) !important; /* Light background for day mode */
}

/* Day mode per tablet - assicura che lo sfondo della mappa sia chiaro anche su tablet */
@media (min-width: 768px) and (max-width: 1024px) {
    :root[data-theme="day"] #map,
    :root[data-theme="day"] #mobileMap,
    :root[data-theme="day"] .leaflet-container,
    :root[data-theme="day"] .mobile-map-wrapper .leaflet-container,
    :root[data-theme="day"] .mobile-map-view .leaflet-container,
    :root[data-theme="day"] .interactive-map-main {
        background: var(--bg-primary) !important; /* Light background for day mode on tablet */
    }
}

/* ==================== DAY MODE - MOBILE SEARCH BAR ==================== */
:root[data-theme="day"] .mobile-search-bar-container {
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.98) 0%, rgba(250, 250, 245, 0.98) 100%) !important;
    border-bottom: 1px solid rgba(139, 105, 20, 0.2) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

:root[data-theme="day"] .mobile-search-input {
    background: rgba(245, 245, 240, 0.9) !important;
    color: var(--text-primary, #1a1a1a) !important;
    border: 1px solid rgba(139, 105, 20, 0.2) !important;
}

:root[data-theme="day"] .mobile-search-input:focus {
    background: rgba(255, 255, 255, 1) !important;
    border-color: rgba(139, 105, 20, 0.4) !important;
}

:root[data-theme="day"] .mobile-search-icon {
    color: rgba(139, 105, 20, 0.7) !important;
}

:root[data-theme="day"] .mobile-quick-search-btn {
    background: rgba(245, 245, 240, 0.6) !important;
    border-color: rgba(139, 105, 20, 0.3) !important;
    color: var(--text-primary, #1a1a1a) !important;
}

:root[data-theme="day"] .mobile-quick-search-btn:hover,
:root[data-theme="day"] .mobile-quick-search-btn:active {
    background: rgba(212, 175, 55, 0.15) !important;
    border-color: rgba(139, 105, 20, 0.5) !important;
    color: var(--brand-red, #8B0000) !important;
}

/* ==================== DAY MODE - MOBILE WINE TYPE SELECTOR ==================== */
:root[data-theme="day"] .mobile-wine-type-selector {
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.98) 0%, rgba(250, 250, 245, 0.95) 100%) !important;
    border-right: 1px solid rgba(139, 105, 20, 0.25) !important;
    box-shadow: 4px 0 16px rgba(0, 0, 0, 0.1), 
                0 0 0 1px rgba(139, 105, 20, 0.2),
                inset -1px 0 0 rgba(0, 0, 0, 0.05) !important;
}

:root[data-theme="day"] .mobile-wine-type-chip {
    background: linear-gradient(145deg, rgba(245, 245, 240, 0.98), rgba(235, 235, 230, 1)) !important;
    border-color: rgba(139, 105, 20, 0.3) !important;
    color: var(--text-primary, #1a1a1a) !important;
}

:root[data-theme="day"] .mobile-wine-type-chip:hover {
    box-shadow: 0 6px 20px rgba(139, 105, 20, 0.3),
                0 3px 10px rgba(139, 105, 20, 0.15) !important;
    border-color: rgba(139, 105, 20, 0.4) !important;
}

:root[data-theme="day"] .mobile-wine-type-chip.active {
    background: linear-gradient(145deg, rgba(245, 245, 240, 0.98), rgba(250, 240, 200, 1)) !important;
    border-color: rgba(139, 105, 20, 0.6) !important;
    box-shadow: 0 16px 40px rgba(139, 105, 20, 0.5),
                0 8px 20px rgba(139, 105, 20, 0.3),
                0 0 0 3px rgba(139, 105, 20, 0.2),
                inset 0 0 30px rgba(139, 105, 20, 0.08) !important;
    color: var(--brand-red, #8B0000) !important;
}

:root[data-theme="day"] .mobile-wine-types-scroll::-webkit-scrollbar-track {
    background: rgba(245, 245, 240, 0.5) !important;
}

:root[data-theme="day"] .mobile-wine-types-scroll::-webkit-scrollbar-thumb {
    background: rgba(139, 105, 20, 0.5) !important;
}

/* ==================== DAY MODE - WINES LIST CONTAINER ==================== */
:root[data-theme="day"] .wines-list-container {
    background: var(--bg-primary) !important;
    color: var(--text-primary) !important;
}

:root[data-theme="day"] .wines-list-header {
    background: var(--bg-primary) !important;
    border-bottom: 1px solid var(--border-color) !important;
}

:root[data-theme="day"] .wines-list-title,
:root[data-theme="day"] .wines-list-subtitle {
    color: var(--text-primary) !important;
}

:root[data-theme="day"] .btn-back-to-map {
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;
}

:root[data-theme="day"] .btn-back-to-map:hover {
    background: rgba(212, 175, 55, 0.1) !important;
    border-color: var(--gold) !important;
}

:root[data-theme="day"] .wines-grid-container {
    background: var(--bg-primary) !important;
}

/* ==================== DAY MODE - MOBILE WINES CARDS ==================== */
:root[data-theme="day"] .mobile-wines-cards-container {
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(250, 250, 245, 0.9)) !important;
}

:root[data-theme="day"] .mobile-wines-cards-header {
    background: transparent !important;
    border-bottom: 1px solid var(--border-color) !important;
}

:root[data-theme="day"] .mobile-wines-cards-title {
    color: var(--text-primary, #1a1a1a) !important;
}

:root[data-theme="day"] .mobile-wines-cards-grid {
    background: var(--bg-primary) !important;
}

:root[data-theme="day"] .mobile-wines-cards-grid::-webkit-scrollbar-track {
    background: rgba(245, 245, 240, 0.5) !important;
}

:root[data-theme="day"] .mobile-wines-cards-grid::-webkit-scrollbar-thumb {
    background: rgba(139, 105, 20, 0.5) !important;
}

:root[data-theme="day"] .mobile-back-to-map-btn {
    color: var(--text-primary, #1a1a1a) !important;
}

:root[data-theme="day"] .mobile-back-to-map-btn:hover,
:root[data-theme="day"] .mobile-back-to-map-btn:active {
    background: rgba(212, 175, 55, 0.1) !important;
    color: var(--brand-red, #8B0000) !important;
}

/* ==================== DAY MODE - MOBILE WINE CARD ==================== */
:root[data-theme="day"] .mobile-wine-card {
    background: rgba(255, 255, 255, 0.9) !important;
    border: 1px solid rgba(139, 105, 20, 0.3) !important;
    color: var(--text-primary, #1a1a1a) !important;
}

:root[data-theme="day"] .mobile-wine-card:active {
    background: rgba(212, 175, 55, 0.15) !important;
}

:root[data-theme="day"] .mobile-wine-card-header,
:root[data-theme="day"] .mobile-wine-card-name,
:root[data-theme="day"] .mobile-wine-card-price {
    color: var(--text-primary, #1a1a1a) !important;
}

/* ==================== DAY MODE - MOBILE WINE CARD GRID ==================== */
:root[data-theme="day"] .mobile-wine-card-grid {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(250, 250, 245, 1)) !important;
    border: 1px solid rgba(139, 105, 20, 0.3) !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.05) !important;
}

:root[data-theme="day"] .mobile-wine-card-grid:hover {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15),
                0 4px 12px rgba(212, 175, 55, 0.1) !important;
    border-color: var(--gold) !important;
}

:root[data-theme="day"] .mobile-wine-card-grid::before {
    background: linear-gradient(135deg, transparent, rgba(212, 175, 55, 0.1), transparent) !important;
}

:root[data-theme="day"] .mobile-wine-card-grid::after {
    background: radial-gradient(circle, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.1) 50%, transparent 100%) !important;
}

:root[data-theme="day"] .mobile-wine-card-grid-name,
:root[data-theme="day"] .mobile-wine-card-grid-price {
    color: var(--text-primary, #1a1a1a) !important;
    text-shadow: none !important;
}

:root[data-theme="day"] .mobile-wine-card-grid-producer {
    color: var(--brand-red, #8B0000) !important;
    text-shadow: none !important;
}

:root[data-theme="day"] .mobile-wine-card-grid-region,
:root[data-theme="day"] .mobile-wine-card-grid-grape {
    color: var(--text-primary, #1a1a1a) !important;
    text-shadow: none !important;
}

/* ==================== TABLET OPTIMIZATION (768px - 1024px) ==================== */
/* Ottimizzazioni specifiche per esperienza tablet */
@media (min-width: 768px) and (max-width: 1023px) {
    /* === 1. GERARCHIA TIPOGRAFICA TABLET === */
    :root {
        --fs-900: 3.052rem;  /* Riduci leggermente scale per tablet */
        --fs-800: 2.441rem;
        --fs-700: 1.953rem;
        --fs-600: 1.563rem;
        --fs-500: 1.25rem;
    }
    
    /* === 2. LAYOUT GRIGLIA TABLET PER LISTA VINI === */
    .wines-grid-container {
        grid-template-columns: repeat(2, 1fr) !important; /* 2 colonne invece di 1 o 3 */
        gap: var(--space-md) !important;
        padding: var(--space-md);
    }
    
    /* === 3. MAPPA INTERATTIVA TABLET === */
    #wine-region-map,
    #map,
    #mobileMap {
        height: 400px !important; /* Altezza ottimale per tablet */
        margin: var(--space-lg) 0;
    }
    
    .map-wrapper {
        min-height: 400px !important;
        max-height: 50vh !important;
    }
    
    /* === 4. CARD VINI TABLET === */
    .wine-card {
        display: flex;
        flex-direction: column;
        height: 100%; /* Usa altezza piena nella griglia */
        padding: var(--space-md);
        margin-bottom: var(--space-lg);
    }
    
    .wine-card-image,
    .wine-card img {
        height: 180px !important; /* Altezza fissa per uniformità */
        object-fit: cover;
        width: 100%;
    }
    
    /* === 5. NAVIGAZIONE TABLET === */
    .main-nav,
    .top-nav {
        padding: var(--space-sm) var(--space-md) !important;
        min-height: auto !important; /* Rimuovi altezza minima fissa */
    }
    
    .top-nav {
        padding: var(--space-xs) var(--space-md) !important; /* Ancora più compatto */
        min-height: 60px !important; /* Ridotto da 90px per tablet */
    }
    
    /* === 12. LOGO VISIBILE E OTTIMIZZATO PER TABLET === */
    .logo {
        display: flex !important; /* Assicura visibilità su tablet */
        width: 56px !important; /* Leggermente più grande su tablet */
        height: 56px !important;
        min-width: 56px !important;
        min-height: 56px !important;
    }
    
    .logo-image {
        width: 100% !important;
        height: 100% !important;
        object-fit: contain !important;
    }
    
    .luxury-logo {
        display: flex !important; /* Assicura visibilità su tablet */
    }
    
    .luxury-logo.small {
        width: 80px !important; /* Dimensioni ottimizzate per tablet */
        height: 80px !important;
    }
    
    .luxury-logo .logo-image {
        width: 100% !important;
        height: 100% !important;
        object-fit: contain !important;
    }
    
    /* === LOGO CONTAINER E HEADER VISIBILI SU TABLET === */
    .logo-container {
        display: flex !important;
    }
    
    .luxury-header {
        display: block !important;
        visibility: visible !important;
    }
    
    /* Wine details logo ottimizzato per tablet */
    .wine-details-logo {
        width: 56px !important;
        height: 56px !important;
    }
    
    .tlc11-logo {
        width: 56px !important;
        height: 56px !important;
    }
    
    /* === 6. TIPOGRAFIA LEGGERMENTE RIDOTTA PER TABLET === */
    body {
        font-size: 0.95rem; /* Leggera riduzione per schermi medi */
    }
    
    /* === 7. TOUCH TARGET MINIMI 44x44px === */
    button,
    .btn,
    .btn-filter,
    .luxury-filter-btn,
    .wine-type-filter-btn,
    .mobile-wine-type-filter-btn,
    .leaflet-control-zoom a {
        min-width: 44px !important;
        min-height: 44px !important;
        padding: var(--space-xs) var(--space-sm) !important;
    }
    
    /* === 8. PADDING GENEROSI PER COMFORT NAVIGAZIONE === */
    .wines-list-header {
        padding: var(--space-md) var(--space-lg) !important;
    }
    
    .search-bar-container {
        padding: var(--space-sm) var(--space-md) !important; /* Ridotto per tablet */
        min-height: auto !important;
    }
    
    .search-input {
        padding: var(--space-xs) var(--space-sm) !important;
        font-size: 0.95rem !important;
    }
    
    /* === 11. TITOLI OTTIMIZZATI PER TABLET === */
    .nav-title {
        font-size: var(--fs-500, 1.25rem) !important; /* Ridotto per tablet */
        font-weight: 600 !important;
    }
    
    .wines-list-title {
        font-size: var(--fs-500, 1.25rem) !important; /* Ridotto per tablet */
        font-weight: 600 !important;
    }
    
    .luxury-title {
        font-size: var(--fs-700, 1.953rem) !important; /* Ridotto per tablet */
        font-weight: 600 !important;
    }
    
    .luxury-title.medium {
        font-size: var(--fs-600, 1.563rem) !important;
    }
    
    .luxury-title.small {
        font-size: var(--fs-500, 1.25rem) !important;
    }
    
    .nav-subtitle,
    .wines-list-subtitle {
        font-size: 0.85rem !important;
    }
    
    /* === 9. OTTIMIZZAZIONI SPECIFICHE PER CARD === */
    .wine-name {
        font-size: var(--fs-500) !important; /* Usa scala tipografica */
        margin-bottom: var(--space-xs);
    }
    
    .wine-price {
        font-size: var(--fs-400) !important;
    }
    
    /* === 10. REGION INFO TABLET === */
    .region-info {
        padding: var(--space-md);
        font-size: 0.95rem;
    }
    
    .region-info h3 {
        font-size: var(--fs-600) !important;
        margin-bottom: var(--space-sm);
    }
}

/* Compare Wines Button Styles */
.compare-wines-btn {
    position: relative;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
}

.compare-wines-btn i {
    font-size: 1rem;
    transition: transform 0.3s ease;
}

.compare-wines-btn:hover i,
.compare-wines-btn:active i {
    transform: scale(1.1) rotate(-5deg);
}

.compare-wines-btn:hover {
    background: rgba(212, 175, 55, 0.15) !important;
    border-color: var(--gold) !important;
    transform: translateY(-2px);
}

.compare-wines-btn:active {
    transform: translateY(0) scale(0.97);
}
